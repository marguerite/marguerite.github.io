<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta name="generator" content="Hugo 0.76.5" />
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Marguerite Su: Golang/Ruby Programmer, openSUSE Member</title>
	
	
	<link rel="stylesheet" href="/css/style.css">
	<link rel="alternate" type="application/rss+xml" href="/index.xml" title="Marguerite Su: Golang/Ruby Programmer, openSUSE Member">
</head>
<body>
	<header>
	<a href="https://marguerite.github.io">Marguerite Su: Golang/Ruby Programmer, openSUSE Member</a>
	
</header>

	
	<main>
		
		
			<article>
	<h1><a href="https://marguerite.github.io/posts/opensuse_%E7%89%B9%E6%AE%8A%E5%9B%BD%E6%83%85%E6%9C%89%E5%85%B3%E7%9A%84_faq/">openSUSE 特殊国情有关的 FAQ</a></h1>
	<time>26.03.2013 00:00</time>
	
	<div>
		
		<p>引子 —— 能解决的是技术，不能解决的是人心。</p>
<h4 id="为什么我们开发者要用-gtalk-和-irc">为什么我们开发者要用 Gtalk 和 IRC？</h4>
<p>跟 Google 没一毛钱关系。我们需要一个全球性的网络，因为我们面对的不只是用户，还有其它国家地区的开发者。就 openSUSE 来说，我没有理由去要求台湾地区的开发者用 QQ，也没有理由去要求他们的用户在官方论坛转简体。我们需要开放而成熟的技术，以便于进行二次开发。二次开发就是「修复」一些原本没有「坏」的东西来满足自己的需要，非开放而不能为。Gtalk 后面的 XMPP 协议坏了吗？没有，但是我需要与 IRC #opensuse-cn 互通的机器人、需要群组机器人、需要网页的聊天记录，于是我「修复」了它。现在我们有了 ~~<a href="mailto:talk@suse.ws">talk@suse.ws</a>，有了 <a href="https://talk-marguerite.rhcloud.com">https://talk-marguerite.rhcloud.com</a>。~~Update: Gtalk 群组地址变更为 <a href="mailto:talk@suse.org.cn">talk@suse.org.cn</a>。（IRC/Gtalk/QQ 群三网合一），聊天记录地址变更为 <a href="https://forum.suse.org.cn/log.html">https://forum.suse.org.cn/log.html</a></p>
<p>而 IRC 就像你们的 QQ 一样，我一样不爱用。我至今不会它的指令，也不会每天挂着。但是有需要我还是会去，就像开会要去会议室一样。你可以不参加会议，你可以选择不去会议室听自己非常想听的东西，但你不能要求别人围着你的桌子开会。</p>
<h4 id="为什么我们要用论坛">为什么我们要用论坛？</h4>
<p>我们需要一个 default to open 的地方，能够存档我们回复过的东西，避免重复工作。</p>
<p>我们需要一个延时的地方。避免你滴滴滴滴吵到我们的工作和生活。</p>
<p>我们需要一个多人的氛围。</p>
<h4 id="为什么我们要用维基文档甚至-manpage">为什么我们要用维基、文档甚至 manpage？</h4>
<p>我们需要一个说明书性质的东西。</p>
<p>说明书一个人是写不完的，在所有人都有权利去写的情况下，说维基、文档不全实际上是在骂你自己，不全？你干嘛了？</p>
<h4 id="为什么我们不用-qq-群">为什么我们不用 QQ 群？</h4>
<p>Update：1. 勇敢地像现实低头 2. Gentoo 社区的 <a href="http://microcai.org/">microcai</a> 博士开发了搞定 QQ 的 avbot， Fcitx 社区的 <a href="https://www.csslayer.info/wordpress/">csslayer</a> 翁学天博士友善帮助在自己的服务器运行它，Ubuntu 社区的 <a href="http://shellexy.info/">shellexy</a> 大神帮助推荐了印度阿三的人肉验证码识别服务 3. 我的一些个人思想转变。于是支持了。但是，QQ/贴吧永远只会是你 Linux 生涯的一个暂住之地，如果你非要永久居留，那你是体会不到 Linux 社区的魅力的。我们为你点亮了一盏灯，而不是帮你推倒窝棚鸟枪换炮，真正的风景在 <a href="https://forum.suse.org.cn/">openSUSE 中文论坛</a></p>
<p><del>它不是 default to open 的。</del></p>
<p><del>它是实时的。</del></p>
<p><del>它是工作场合用不了的。</del></p>
<p><del>它是外国用户用不了的。</del></p>
<p><del>我回答它的问题对于减轻我的工作没有意义。没有人把我的答复 document 到 wiki 上。没有第二个人听见。</del></p>
<p><del>一个人只能用她爱用的几样，抱歉 QQ 不在我的喜爱列表里。</del></p>
<p><del>This is not the SuSE way. 你不能新装 openSUSE，第一件事就是装 QQ，干什么呢？去 QQ 群提问。如果一直惯着这些 Windows way，那你帮助的人永远不能成为 SuSE 的贡献者，你的奉献没有意义。</del></p>
<h4 id="论坛好慢啊">论坛好慢啊…</h4>
<p>你想不想解决发生在你身上的问题？</p>
<p>想，就去，不想，可以不用去。既想，又不想去，那即使我在人人网也帮不到你。</p>
<p>发生在自己身上的问题，别人没有责任替你铺路。</p>
<p>开源没有售后。脸长我头上，不用你赏。</p>
<p>openSUSE 不教你 FQ。也不会给你买 VPN。</p>
<p>所以不要用全民问题去苛责一个操作系统。Windows 也没人类解放啊。</p>
<p>技术上，我可以做个国内论坛，也正在做。 但是初衷是自己觉得好玩，跟你没有关系。Update：<a href="https://forum.suse.org.cn/">openSUSE 中文论坛</a></p>
<h4 id="gtalk-身边没人用">Gtalk 身边没人用…</h4>
<p>身边人能解决你的问题吗？</p>
<p>能解决你的问题的人在用，对于一个想解决问题的人来说，这理由不充分吗？</p>
<h4 id="你应该干掉我的问题所以你要迁就我">你「应该」干掉我的问题，所以你要迁就我。</h4>
<p>openSUSE 我自己用的好好的，显卡没长我电脑上; 软件不是我开发的，bug 和我没关系，社区一份钱没 pay 过我，为什么我要迁就你？</p>
<p>求人要姿态低态度好。求人办事我也是孙子脸，别看我跟你横。</p>
<h4 id="google-说鸟语我看不懂">Google 说鸟语，我看不懂…</h4>
<p>所以请去学英语。</p>
<p>不要幼稚地把个人问题赖到一个操作系统上。Windows 也没帮你找妹子啊，不然会修电脑，岂不是满大街都是愿意给你发卡的？</p>
<h4 id="搜索到的东西太分散了你告诉我不行吗">搜索到的东西太分散了…你告诉我不行吗</h4>
<p>我也是那么分散的看过来才告诉你的。然后下次我就有了经验。</p>
<p>所以不要把自己应该做的事强加到别人身上，谋杀别人的生命。长本事长能耐的事情要自己来。
为什么我们不用百度贴吧？</p>
<p>它发不了带 <a href="https://zh.opensuse.org">https://zh.opensuse.org</a> <a href="https://forums.opensuse.org">https://forums.opensuse.org</a> <a href="https://software.opensuse.org">https://software.opensuse.org</a> 的任何东西。立刻删除，然后投诉会告诉你主帖没被删我们就不管。</p>
<p>我用百度贴吧唯一的成就就是解决了一个 fcitx bug。</p>
<h4 id="为什么我们不用渣浪微博">为什么我们不用渣浪微博？</h4>
<p>这个可以有。但是我不想让小白的提问污染我同事的时间线，也不想你能看到我的日常。也没有开小号的习惯。更没有每天被瘦腿袜阿迪鞋虐一百遍的习惯。也没有对着僵尸粉的棺材说话的想法。</p>
<h4 id="维基找不到东西啊">维基找不到东西啊…</h4>
<p>openSUSE 维基有自己的组织方式，我们的文章是放在一个个 Portal（专题）下面。不要用 Ubuntu way 去要求 openSUSE。我们是它的黑老大，不是狗仔。</p>
<p>我在醒目的位置做了一个「全站搜索」。只能帮你到这里了。</p>
<p>提问的人有责任把得到的答复 document 到维基，这是对回答者的行动感谢。</p>
<p>看到不新不全的文章，或文章出错，你有责任立刻去更新它，这是你对上一个编辑者的行动感谢。除非它没有帮到你或没有为你提供思路，这是你唯一需要联系我的情况，因为我作为管理员需要把它删掉。</p>
<p>如果你用 openSUSE 完成了一项工作，发现自己是第一个。那你更应该 document 到 wiki 而不是个人博客。这是你对一分钱没收你却帮助你完成了一项工作的 openSUSE 的行动感谢。另外 zh.opensuse.org 永远比你的博客访问量大。</p>
<h4 id="界面和文档翻译">界面和文档翻译</h4>
<p><a href="https://zh.opensuse.org/Portal:">https://zh.opensuse.org/Portal:</a>翻译</p>
<h4 id="官方源好慢啊">官方源好慢啊…</h4>
<p><a href="https://mirrors.opensuse.org">https://mirrors.opensuse.org</a></p>
<p><del>四月份的 hackweek 北京各大学的孩子们准备去 debug 这个问题。愿神眷顾他们。</del></p>
<p>Update：事实是没人去，我很失望。但神确实眷顾了另一个人：Zen Zhong，<a href="http://zenzhong8383.blogspot.com/2013/06/zypper-update-broken-cuz-curl-network-unreachable-on-opensuse-zh.html">openSUSE升级由于curl网络不可达错误失败（持续更新）</a>。</p>
<h4 id="opensuse-有活动吗">openSUSE 有活动吗？</h4>
<p>有，北京。Update：因为 SuSE 在国内只有全球第四大的研发中心。其它广州上海的都是 Novell 的，它们现在是不同的业务实体。</p>
<h4 id="我想在本地办一个">我想在本地办一个…</h4>
<p>找我，出钱出资源请不要客气。</p>
<h4 id="我身边没有-opensuse-用户">我身边没有 openSUSE 用户…</h4>
<p>拉拢、转化、腐蚀他们。</p>
<h4 id="为啥-yast-加多源总是搞坏我的操作系统">为啥 YaST 加多源总是搞坏我的操作系统？！</h4>
<p>在你没有学会 SuSE way 的时候用 SuSE 装 ×，这就是代价。</p>
<p>新手中规中矩用没说过这问题。</p>
<h4 id="你丫为啥就是没有解码器">你丫为啥就是没有解码器？！</h4>
<p>openSUSE 为北美欧洲注册的 NGO 实体。</p>
<p>在那些地方你不能不花钱取得受版权保护的东西。因为 MP3 是版权保护的，所以即使解码它的是开源实现的，也可以侵犯专利。openSUSE Project 没有钱成为被告。也没有钱为你付版权费。即使有，我们也不会资助那些试图囚禁人类的行为。</p>
<h4 id="我捐款">我捐款！</h4>
<p>这个我爱听，打我卡上就行了。</p>
<p><del>近期准备开个支付宝社区帐号来收款。</del></p>
<p><del>因为林子翔同学借了一个 VPS 给社区。我想买下来。</del></p>
<p><del>Update：捐款方式是<a href="https://forum.suse.org.cn/viewtopic.php?f=19&amp;t=870">这个帖子</a>里那个。</del> Update：活动结束了。</p>
<p>总之，不要为自己的懒惰和习惯找借口。Be brave to the world, and the world will care you.</p>
<p>另现接收各类序员的卖身投靠…有大事情做…</p>

		
			<a href="https://marguerite.github.io/posts/opensuse_%E7%89%B9%E6%AE%8A%E5%9B%BD%E6%83%85%E6%9C%89%E5%85%B3%E7%9A%84_faq/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/%E5%9F%B9%E8%82%B2%E5%BC%80%E6%BA%90_ngo_%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83/">培育开源 NGO 的一些思考</a></h1>
	<time>23.03.2013 00:00</time>
	
	<div>
		
		<p>这是周六北京 GNOME 小组活动 openSUSE 社区的讲稿。撰稿人是我。主讲人是来自 SuSE 的 Lance Wong。</p>
<p>大家来自不同的社区，面对的问题也不同。我这次先来拨一拨 openSUSE 中文社区这只洋葱。</p>
<p>首先提到 openSUSE，大家想到的应该是：</p>
<ul>
<li>华丽</li>
<li>稳定</li>
<li>用户少</li>
<li>很少人讲</li>
<li>千年老二。红帽的小弟。</li>
</ul>
<p>一个华丽而稳定的系统，为什么 Linux 中文圈却没有声音？我能想到的有两方面：</p>
<ul>
<li>宣传不到位</li>
<li>沉默的大多数</li>
</ul>
<p>这就是我们的现状。为什么会有这些现状，玛格丽特有几篇选料生猛的文章。社区的管理者应该都有共鸣。我们试图解决这一问题。</p>
<h4 id="宣传不到位">宣传不到位</h4>
<p>宣传不到位的常见原因有以下几种：</p>
<ul>
<li>投入不够</li>
<li>政策错</li>
<li>没有细分用户</li>
</ul>
<h6 id="投入不够">投入不够</h6>
<p>这里的投入不够不只是批评 SUSE，也在批评社区自己。SUSE 对 Linux 社区一直是有期待的，这种期待到了什么程度呢？如果你是一个来自其它社区的成员，想要去参与 openSUSE Conference，我们的 Travel team 出机票。SUSE 也曾为 openSUSE 在大陆的推广做过很多工作，「最漂亮的 Linux 发行版」，听说过吧，但是很遗憾，在一个没有培育出「我应该怎样」的国家，这些努力都可悲的失败了。这是所有开源活动都会面临的问题，玛格丽特总结的很好，大家都是站在泡沫上的，人家爱的就是你这股冒傻气似的不要钱。</p>
<p>金钱社会，奉献总是看得很轻。这就是为什么至今中国开源运动的中坚依然是 70 末 80 初这些人。因为理想已经被现实取代了，我们没法在用「开源是为人类解放」来招揽用户了。或者说，在一个全民追求「装逼又不贵」的社会，我们已经断代了。在这样的社会，用户的多少已经不能说明问题了。我们必须认识到：现在是末法时代，不是传教的时代，不是我扯起大旗就能拉帮结伙的时代，而是，我们要把我们的理想，贩卖，给我们想要卖的人。</p>
<p>为什么要批评社区呢？因为中文社区没有发出过自己的声音。会哭的孩子有奶吃。Ubuntu 宣传的多，人家就认识它。你中文社区没有哭过，国际社区和 SUSE 又怎么会知道你饿？</p>
<p>很幸运，现在这个问题已经开始着手解决了。SUSE 中国目前指定了两位 Site Manager，Sunny 和 Jia ju 来作为联系社区的纽带，再加上 SUSE Desktop Team 的协助，弹药的问题总算解决了，现在能拉起一个加强排还是一个加强连，就看社区能够吸引到多少大头兵了。</p>
<h6 id="政策错">政策错</h6>
<p>这是很多社区都不愿承认的问题。Linux 社区总是基友少，嘴炮多，越活跃的，嘴炮越多。像 openSUSE/Fedora 这种完全没冲突的基友社区，少。但我想问一句，我们的理想不是一起的么？</p>
<p>目前几乎所有的社区的定性思维就是：用户？（学三国杀司马懿，天命？）哈哈哈哈…</p>
<p>正如马晓骏在 Linuxtoy 说的那样，一群市场份额不到 1% 的在窝里斗。我们的星辰大海在哪里？在 Windows！ 在 Mac！根本不在 Linux。所以每天去喷 RedHat 的 GNOME 输入法、去喷 Ubuntu 的 Mir，去八卦开发者之间的总总过节，其实是在自掘坟墓。</p>
<p>玛格丽特想让我代表，群嘲大家一句，你们非常幼稚可笑。</p>
<p>Linux 应该是一个大家庭，是一个和 Windows/Mac 分庭抗礼的社区。是一个「我是一个 Linuxer 」在任何人面前说起来都自豪骄傲的社区。是一个所有发行版像兄弟姐妹一样团结有爱的社区。而不是一个相互挖角，转化对方用户，这个不行用那个，那个不行用这个的社区。不是一个用 Linux 不好意思说，像加入了邪教一样的社区。而不是一个鄙视 Windows/Mac 的社区。鄙视是因为自卑，不敢跟人家站在一起，才会拼命的说自己好。对，我用 Linux，我是一个 Linuxer，这是一个 bug 重重没事死给你看的系统，但是，那是完全属于我的系统，那是，我，的系统。而不是一个用了几年转投 Mac 的社区。亲！我们不是回收站 ！</p>
<h6 id="没有细分用户">没有细分用户</h6>
<p>好吧（摊手），大家都意识到了我们的问题出在那里。下面就让我简单教教大家该怎么卖吧。这是玛格丽特教的。她是搞金融的，滚雪球她最在行了。</p>
<p>首先是细分用户</p>
<p>在座的诸位都非营销专业，这个应该不懂。所以我们都是犯了错的，都是有原罪的。</p>
<p>两个误区： 1. 用户就是社区 2. 用户就是用户</p>
<p>用户就是社区。这点 openSUSE 社区犯过错。用户不是社区。贡献者才是社区。</p>
<p>用户是，迎面而来的一片刀子，心胸有多大，就插多少刀子。你做了 99% 的好事，一件事没让那帮爷满意，你就是千夫所指。这就是用户。丝毫不会想你没有收过一分钱，上班时间抽空照顾社区，下班整个人就交给社区，是多么的不容易，是多么的难能可贵，自己应该对你有多么的亏欠。理解都做不到！这就是用户。你就生来是他们的奴隶，开发他们的东西，他们吃饱一抹嘴开始挑捡你。这就是用户。我们也是人！不是服务器！更不是资源！</p>
<p>贡献者与用户的不同，就在于理解。所以使用即支持，完全是屁话，有时候某些人使用完全是给你添堵！Fedora 的，问句，马同学在你们社区，你们堵吗？Ubuntu 的，问句，一堆嘴巴很脏的小白在你们社区，你们堵吗？看到你在厕所吃「饭」，会默默帮你把门带上的，这才是贡献者。想你所想，不明觉厉，就是理解。使用不是支持，理解才是支持！</p>
<p>用户就是用户。</p>
<p>用户不是一整块蛋糕，要么全吃掉，要么全别吃！用户是多种多样的，吃蛋糕，你爱吃鲜奶，可以把鲜奶吃了，爱吃水果，可以把水果吃了，爱吃蛋糕，可以把蛋糕吃了。没有爱吃蛋糕的？那就给 Windows 去吃嘛。</p>
<p>细分用户就是回答这样一个问题：</p>
<p>我想要什么样的使用者？</p>
<p>这个问题，openSUSE 社区就是当初没有思考过这个问题，才导致了现在这种「虚假繁荣」、「尾大不掉」、「百足之虫死而不僵」。为什么这么说呢？ OpenSUSE 是一个国际性大社区，在中文圈用户也很多，但是为什么没有社区？因为你的使用者都是用户，而不是贡献者。简单说，你的使用者都是沉默的大多数，而非积极分子。要么是用 openSUSE 开发其它东西的，也即生产环境，要么是用 openSUSE 就为求方便求稳定不爱找事的。就是说，来你这儿的都是为了从你这拿东西的，而不是有借有还的。</p>
<p>有借有还才是一个社区，如果你的社区全是嗷嗷待哺的，要维基文章，要软件包，要新手指南。而没有几个正常的成年人。那么这是一个客服站台，而不是一个社区。再次强调，社区不是客服站台。如果你把社区当作客服站台来做，而不去引导使用者贡献，那么挨累是你活该。社区充其量是一个接站司机。把用户从不自由的微软接到 Linux，教会他游泳，之后汪洋大海任君驰骋。</p>
<p>这是 openSUSE 曾经犯过的错误。也就是说，一整个 Thruth 时代我们其实都在犯错，这个错误被吃饱了一抹嘴的用户总结为「用 openSUSE 就是用 Thruth」。王总多可悲啊，被一群抠脚大汉公用了好几年！</p>
<p>所以这种错误我们以后不会再犯。</p>
<p>细分用户就是把用户归类，然后选出你要的那类。</p>
<p>用户大致可以分为以下几类，是根据他们处在了解 Linux 的不同阶段划分的。这里面没有任何的身份地位，钱多钱少，学历高低，总之现实当中唯一的、在虚拟社会依然需要衡量的只有以下几点：</p>
<ul>
<li>人品</li>
<li>修养</li>
</ul>
<p>人品不好你不能让他管钱发礼品。修养不够你不能让他做新手的引导员。农民工一样可以成为社区的中坚力量，这点我们比现实中的教会要好的多。教会都能做那么大，我们凭什么不能？！</p>
<p>用户的分类是：</p>
<ul>
<li>完全小白。电脑上还是 Windows。知道 Linux，好奇，没用过。</li>
<li>装机客。就是一张硬盘上面好几个操作系统的。</li>
<li>双系统。Windows 和 Linux</li>
<li>单系统。</li>
<li>单系统开发。</li>
</ul>
<p>其中完全小白是最方便勾引的。数量也最大。这里 openSUSE 和 Ubuntu 都有先天优势，那就是我们的 UI 做的漂亮。但是大家都很排斥这部分人。其实这部分人如果有一个耐心的大哥哥大姐姐引导，再有一些人陪他聊天，关怀他，一个 Release，就可以变成死忠用户。甚至都不会换发行版，因为他的所有 Linux 知识都来自于一个发行版。比如玛格丽特，她就知道 openSUSE 漂亮，那就是她的第一套。勾引这部分人其实非常简单：Linux 不中毒。Linux 漂亮。Linux 能装逼。Linux 不用关机，等等等等。勾引一个人的好奇心，远比勾引一个没有好奇心神秘感的人容易得多。唯一需要的，就是一点点耐心，一点点设身处地，和一些死机、崩溃处理的基本知识。这类人一旦选了某个发行版，都是因为自己解决不了的问题或没人搭理才被逼走的，而没有一个主动想走的。习惯是非常强大的力量！但是除了 Ubuntu，我们似乎都忽略了这些人。在这一点上，就算 Ubuntu 有千万不好，它的方向是对的。我们其它发行版也要自己去地里刨食吃，而不是等着偷鸡！</p>
<p>openSUSE 的愿景就是继续发扬自己的外观，以及像 Windows 一样的稳定，这是我们的先天条件，都不用去特意做就能达到，我们需要的是一些热心的用户，趴在论坛上，一些热心的用户，用简单的文字去写维基。然后说两句暖心的话，做一些基本的指引。我们社区的目标就是要建立这样的一个系统。</p>
<p>但是这样的系统需要牢牢记住我前面的那句话：社区不是客服站台！</p>
<p>目前的 80 后有不看说明书遇到问题不思考直接找人的臭毛病。如果听之任之，那么你就是客服站台。要学会说不，做社区呢，就是为了一个开心，把自己搞成奴隶或服务生、接线生的角色，那误人误己不如不做。也就是说，回答问题的时候一定不能直接说答案，是的，那样显得你很牛逼，但是牛逼的后果就是，能者多劳。要像数学考试一样，写清推理思路，直接写得数是没分的！</p>
<p>再说装机客。</p>
<p>目前各大 Linux 社区的主要拉拢对象都是这部分人。我的看法则正好相反。这部分人恰恰是你最不需要重视的一部分人。因为他们就没有一丝一豪的发行版忠诚度。</p>
<p>因为基本 Linux 知识和各大发行版的入门知识他们都懂，他们比较的完全是你发行版的底蕴，比如稳定性，维基文章和软件包数量，是否支持特定硬件，有没有特定开发工具，而人气在他们的考虑中权重相当低。因为他们懂得如何使用 bugzilla 直接联系开发者。所有的中间渠道对他们来说完全没用。这时的他们也不可能参与到特定发行版的中间渠道中去。简单说，如果你不是开发者，在论坛上回答这类人的问题，多余。因为他们只是 80 后的毛病作祟，回头人家自己就 google 到了。而他们关注的，恰恰是你在服务小白过程中大浪淘沙积累下的东西。如果把目标定位这类人，就好像和一个没国籍的人说爱国一样，事倍功半都是多的，完全就是徒劳。</p>
<p>而最后三类，完全是可遇而不可求的了，因为人家完全建立了自己的 Linux 价值观，有了固定的发行版。转换发行版只有在自己的发行版深深伤了他的心，或者盛情难却同时受邀的发行版又确实比现在用的好或至少要不相上下，才会发生。简单说，我用着 openSUSE，你邀请我去用 puppy，这不是侮辱我智商呢么？是的，所有发行版的地位都是平等的，但是用户体验不一样呀！</p>
<p>好，简单分类清楚了。现在我们来讲原则。原则就是：</p>
<p>不要贪多嚼不烂。不要干自己能力不及的事情。</p>
<p>贪多嚼不烂就是要专一。你可以服务多个小白，但不能挑捡问题。如果做不到，那么只服务一个。</p>
<p>不要自己是普通用户试图去拉拢对方开发者。会被喷很惨，你解释不明白，反而给人家留下了坏印象。括弧，女生除外。</p>
<p>下面是小白的详细分类：</p>
<ul>
<li>理工科专业的在校小白。（计算机、通讯工程之类有 Bonus）</li>
<li>个人能力非常强的外向型社会人员。（营销、市场、互联网行业有 Bonus）</li>
<li>营销类、社会活动类在校小白。</li>
<li>其他在校小白。</li>
<li>IT 公司程序员。</li>
<li>其他社会人员对社区有兴趣的。</li>
<li>其他社会人员对社区没兴趣的。</li>
</ul>
<p>这些人的权重是不同的。理工科在校小白是火种。因为拿下他们你就拿下了这个学校。外向型社会人员。这是中坚。你拿到他们立刻就可以去办推广活动。比如我拿下一个 SUSE 的漂亮前台，那我立刻就进北邮搭台。剩下的权重逐级降低。在校生要优于社会人员，一是社会人员事情多，二是社会人员激情少。至于职业，在校生特别好问，社会人员只要他不做安利，一般也会回答的。</p>
<p>过程中你必须要建立起小白们有借有还的理念。比如「这个问题我和某某某探讨过，他遇到的是一模一样的情况，他答应后头 document 到维基上，要不你私信他一下？」建立他与社区之间的 connection，让他感受到被重视，于是才会有责任感去参与社区。你白帮忙，帮完了什么都不说，那你是雷锋，不是做社区。</p>
<h4 id="沉默的大多数">沉默的大多数</h4>
<p>特点：</p>
<ul>
<li>常年潜水（多数）</li>
<li>说话必吐槽（少数）</li>
<li>倚老卖老（极少数）</li>
</ul>
<p>处理原则：</p>
<ul>
<li>潜水就当他不在。</li>
<li>吐槽就当他不在。</li>
<li>卖老就当他不在。</li>
</ul>
<p>潜水用户除非你有深水炸弹，否则就请允许他们阴魂不散。而且如果是你上一个决策错误带来的潜水用户，他们冬眠也不见得是坏事。</p>
<p>吐槽用户基本是对系统的某一点特别不满。但是这种人常常忽略了一点就是，发行版的缺点除了内部整合问题和打包 bug，绝大部分来自上游。还忽略的一点就是，这可能是特定硬件问题。对于一个以偏概全的人，你的话是被曲解成狡辩的，而且中国人素质普遍较差，如果不是为了 debug troll，建议节省自己的口舌和生命。</p>
<p>卖老用户是吐槽用户进化的，Linuxtoy 上比较多见。特点就是 I know Linux from day one。你一不了解科技史的跟我瞎掰什么。他们是不知道只有有目的的做事的人才有资格掰社区的。而且经常会想象出一些虚无飘渺的权力与镇压，你是社区管理者是吧，那你为了手中的权力是一定会挥舞大棒的。而且还经常会捆绑民意，制造你欺压良善的感觉。因为这种人一般很自卑很懒，不想干活又想要尊重。只能带着一种我是社区的代表的尊严法相来和你对抗才会找到自尊。典型的「人在心不在」的麻瓜却想假装一个「心在人不在」的撒手大佬。所以最简单的方法就是照章办事，触犯直接开革。这时不能讲究人情。因为他不会领你情的。反而你落下了一个软弱可欺的形象。</p>
<p>也许有人说，社区不是要民主吗？对，有限民主，建立在每个人都对自己说话负责，彼此尊重的基础上。因为反对而反对的人，如果大家都能够视而不见，那么就视而不见，否则有这样的队友参与社区事务讨论是不会产生任何建设性意见的，因为他做的事情就是水混好摸鱼。只有一个意见的社区，比起意见太多以至于拿不出意见的社区要好很多，因为至少无论正确错误，我们大方向上是在前进。而 Linux 社区，好就好在，它没有「错误的方向」。</p>
<h4 id="opensuse-的愿景">openSUSE 的愿景</h4>
<ul>
<li>一个对新人完全友好的发行版。（DOING）</li>
<li>一个能让 Refugee 们一定程度上满意的发行版。（DONE）</li>
<li>一个多核心的社区。单核心是极为不稳定的。（TODO）</li>
<li>一个充满了「我觉得我该干点什么」的贡献者的社区。（TODO）</li>
<li>一个团结有爱的 Linux 中文圈中的一份子。（PARTIAL）</li>
</ul>
<p>谢谢大家！</p>

		
			<a href="https://marguerite.github.io/posts/%E5%9F%B9%E8%82%B2%E5%BC%80%E6%BA%90_ngo_%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/opensuse_%E4%B8%AD%E6%96%87%E7%A4%BE%E5%8C%BA%E9%9D%A2%E4%B8%B4%E7%9A%84%E8%8B%A5%E5%B9%B2%E9%97%AE%E9%A2%98/">openSUSE 中文社区面临的若干问题</a></h1>
	<time>21.03.2013 00:00</time>
	
	<div>
		
		<p>一直有人批评 openSUSE 的玛格丽特时代带了意识形态，还给我总结出两个凡是：凡是 openSUSE 的都是好的，凡是 openSUSE 上出现的问题都是用户不对。那我就来巴一些坏处，只有一个声音是不对的。但我巴坏处肯定是想让它好，毕竟我是玛格丽特女王大人。</p>
<p>（一） 中文社区</p>
<p>Ubuntu 肯定是最大的中文社区，Arch 肯定是最活跃的中文社区，Fedora 肯定是最爱交际的中文社区，openSUSE 肯定是最宅的中文社区。</p>
<p>首先我们应该没有多少活跃的大学用户。我们的用户据我观察应该是企业用户居多。这种人的优点在于他们都非常强，缺点在于他们都非常懒。如果我能解决自己的问题，而且我只用 openSUSE 挣口粮，那我为什么要帮助你使用 openSUSE？你能想象一群 Intel 员工，SuSE 员工，中兴的软件开发科长做你的成员，然后中文社区的基础设施是一个人生前 22 年没见过立式服务器的女生搭建的么？就像我在 Gtalk 群里怒喷的一样：你们呀，什么都会，就是不帮我，对吧。</p>
<p>其次我们一直是一个单核心的社区。我不是说开发，是说社区建设。开发牛人多了去了，我这种 CPP 指针数组都不会的肯定排不上号。苏哲时代（SuSE 9），我在上初中，但提 SuSE 9 老人都知道，几乎就是：Linux 是 SuSE 9 与硬件通信的工具。Thruth 时代，我在上大学，「用 SuSE 就是用 Thruth」，这也不是我说的。现在是缝缝补补吃老本的玛格丽特时代。我不会开发啊，只能根据长老们灌顶得到的经验盲修 bug，修好了，说明我逻辑和交际比较强。我一般是，看到 bug，用人类逻辑而不是机器逻辑去猜，不能开机？好，systemd，然后去找 Lennart; btrfs？去找 John; GNOME？Vincent/DimStar; Build Service？Adrian/Coolo; 输入法坏了？翁学天出列; Bash 支援？花花; Python？以前是 Hicro Kee 现在是 Felix Yan。懂了吧，openSUSE 的社区管理对我来说就是打牌，我就是拿着满手不情不愿看你是女生帮帮你的大王，用户出什么我都出大王，用户出大王？好，是用户你的不对，我不赢钱白跟你玩牌，你怎么能出大王赢我呢？</p>
<p>但我给自己的定位是 Coordinator，中文翻译为办公室主任。我希望 openSUSE 有几个强有力的男性领导，各管一摊，有推广的，有集会的，有开发的，有答疑的，有翻译的，有维基的…然后我就每天上线发 task 定 deadline 随手卖个萌就好。但是没有。于是手比较贱（处女座就是你骂我一句我下套也要还回去，不然今天就不完美了我睡不安稳），慢慢就都抓自己手上了。一个单核心的社区是没有活力和前途的。商业上是该给那个核心上巨额保险。但开源事业不行，我要钱干嘛？我就要东西。你能跑到保险公司去说哦如果玛格丽特不用 openSUSE 了你赔我一个能妥妥的骑住微软的 openSUSE 吗？</p>
<p>也许有人会说，没有你，openSUSE 不还是一样？那些年都怎么过来的。这种人活该你没有妹子，你一定不明白在心里怎么念 L.o.v.e。你没出现过的那些年你怎样我没资格管，但若你出现在了我的生活里，烙上了我的印记，那若我无法伴你终老，我一定要好好的把全身都是闪光点的你交到接盘侠手上，甚至让你在未来的生活中念我那无法复刻的传说。若干年后我可以对我的孩子说，你看到街角那个高贵冷艳的大叔没有，那是老娘的初恋。This is puppy love。当然如果你是从一个没有 dead soul 没有经历过社区成员的 RIP 的发行版转过来的，我说这些你可能不懂。但是我是记得，openSUSE 的 daemon（听 ID 就知道多牛逼了）升天堂时全网那种缅怀的气氛。整个开源圈有 70 以上的成员的社区也没几个吧，我们有。我尽量以后我也能有这种待遇。</p>
<p>第三，每一个活跃用户对我来说都很珍贵。但是在一个没有建立起「我应该怎样」的社会里谈奉献的人注定寂寞。而寂寞的人分散到各个城市又杯水车薪，这导致在没有社区背后的公司运作的情况下我们不太可能组织起自己的活动。也许 openSUSE 的人会说，公司支持不是很应该的吗？这种想法在我们社区里非常普遍。但请你想想 Arch。所以任何事情都有原因，人在社区，心不在社区，我们仍然欢迎来帮扩充用户基数，但谈到社区推广的时候您应该跟心在社区的人聊不到一块去。所以只能请下次同学们再想为 openSUSE 做点事的时候，面对这些困难，请问问你的本心，应该做的事情就一定要去做，在一个普遍没有理想的社会，能有点理想，虽然白痴，但似乎还不错的样子？</p>
<p>第四，我们现有的人不太会也不太可能成为社区实体 Body 的组织者。也就是说没有 LUG，没有 openSUSE Chinese Conference，没有 Release Party。只有一群每天在网上陪你扯还总暴粗的前辈。人间社会就是，不尊重前辈，前辈不给你机会，尊重前辈，做事情除了前辈没人记得你。不过好在我们的前辈还算很开明？steue，swyear，hillwood 都比我早，但似乎目前还没人给我下绊使坏嘛。比起 Ubuntu/Fedora，我们还算一个比较团结的社区吧。其它社区你可以想象成一群抠脚大汉到处使力，都分散掉了，所以人家面临的是如何凝聚的问题，而我们面临的是如何产生力这一物理学终极命题。</p>
<p>第五。个人原因。我在北京上班，在上海居住。周末北京有空，我在上海。上海也有空？对不起我在家就呆两天我不想出街。平时？抱歉我要上班。开源不给钞票啊亲！让我写 PPT 你出人讲？没问题。让我讲？网上讲行不行？不行？那抱歉我不想出街。我想其它做类似办公室工作的应该都有这个通病。电话网上讲得通的，那我人绝对不去。简单说，我们需要「外勤特工」，我们的「机关」搞内务的已经多到外面没人认识你了。</p>
<p>（二） 公司支援</p>
<p>很多人都说 SuSE 嘛，跟红帽一样在开源界的双核，数一数二的带头大哥，还是微软的战略伙伴，拥有最多的服务器认证，肯定给社区砸好多钱。错，至今中文社区好多东西，我还是能用免费用免费，能黑基友黑基友（比如服务器我用 openshift，发布我一般找 linuxtoy），就这样还每年给它花好多钱。但是做社区不是养儿子，我不能出工出力卖脸还搭钱吧！</p>
<p>所有人都认为 openSUSE 是 SuSE 儿子，但那是在国外。在中国是侄子。且不说 SuSE 中国只是一个办公室，大部分都是对 Linux 社区是啥都不知道的销售，开发也是开发不和最终用户接轨的软件你根本见不到人，整个中国大陆只有 5 个员工参与社区吧。我们没有社区经费，因为能批社区经费的 Site Manager 不在中国招。至于德国，可能给，但怎么给，通过 SuSE 中国？通过谁？那你是给人家升职还是给人家补钱？不然谁白做？我们没有 Legal，你想开个淘宝店？抱歉问德国。德国知道个屁的淘宝呀！甚至你想举报个中国境内的滥用 openSUSE 商标牟利，都要向德国举报。为毛？中国的 Legal 包给律所，普通员工不能联系，必须是市场部才能联系。但是 SuSE 在境内没有市场部，只有 Novell 的市场部，人家现在归了 attachmate 是两个 BU，我的工资没给我为你 SuSE 跑活的钱啊！</p>
<p>对 SuSE 中国的感觉是，中式办公室文化导致大家都不伸手，德国过问肯定问老外，老外被架空又不敢说，或者说可能老外也觉得我就是个在德国斗争失败被流放的，就挣工资没激情，也不主动要钱要物要人，看好企业版，腾讯淘宝缴费我就有业绩（这段我猜的）。导致我们是被自我隔离在国际社区之外的，国际社区想帮你也隔着千山万水。而中文社区又存在太多的不专业不接轨，导致人家对你兴趣也不是很多。比如，官方镜像？那你该找大学啊，但大学教育网，公网流量没多少还受开大会影响这事你和人家解释得明白吗？比如公仔？我德国有生产线，可以给你配齐，但你配到亚洲不到 10 个…好歹您当「办公用品」配别当「营销工具」配好不？老外是不明白公仔的抢手程度的，到中国，内部员工装修办公室先抢一遍，营销留几个，再被社区跪着要一两个…老外没学过国际贸易是想不明白我这儿烂大街的东西为啥到你那儿总报货源紧张？然后还经常丢失？比如官方商店，不 shipment 中国，为啥？你中国邮政不讲英文，中国快递也不讲英文还丢东西，别的国际物流你限制人家营业区域，你让我们怎么办？</p>
<p>所以至少我觉得，openSUSE 在国内的推广，一是靠社区自己的努力和在校生那可歌可叹的 passion，一是在 SuSE 指定负责亚洲甚至中文社区事务的专员，然后培养他们本土员工的开源意识，就是说我 SuSE 中国不止办公室里这几十号人，那几万不领工资的也是我「员工」，甚至他们比员工还高尚，所以我们要聆听他们的诉求。做市场也不能只推企业版，买不起的可以推荐社区版嘛，先把坑占上，那样有支付能力的时候肯定首选还是你。就是要自己养鸡，不能总到地里刨食。再次你进大学招工招实习的时候，可以优先考虑本社区和兄弟社区的成员啊。去一个大学，埋下些种子和希望啊。你说 SuSE 里有北邮的吗？肯定有啊，但为什么北邮没几个人听过 openSUSE？那肯定呗，你只找了最能干活的，没找最能引导自主干活的呗。</p>
<p>相信这样，前期可能不明显，过几个时代，比如后玛格丽特时代，hillwood 时代，甚至 douglarek 时代、multipe1902 时代、郭云鹤时代、hottea 时代什么的，总会开枝散叶。</p>
<p>（三）软件源</p>
<p>由于我们社区现有成员和在校学生没有办法建立联系。他们有 channel 但学生一般比较 shy，我们不 shy 但是没 channel，就是缺少一个身为学生的话事人。导致了现在国内高校的 openSUSE 源不少，但都不是官方源，可能就十几个、几十个人用。我建议都去把它申请成官方源，考虑到目前中文用户可能真的不是很多，额外的流量可能也不会太多。</p>
<p>而官方不推荐使用镜像源。因为官方使用的是一个名为 MirrorBrian 的我们自主研发的外星科技，被 KDE 社区使用。我不是服务器专精，所以不是很懂，原理大意就是它可以根据你的 IP 自动分配离你最近的源。也就是说 download.opensuse.org 这个开头在境内的下载流量根本不是国外的，而是 mirrors.opensuse.org 上列出的中国官方源之一。</p>
<p>而中国一是被 Debian 搞出来的镜像源会快的理念，二是可能这种技术应对国内网络环境真的有问题。（希望有同学去帮我抓包分析下，使用 download.o.o 默认 OSS 源的时候真正的软件包流量是来自境内镜像还是德国主服务器）。</p>
<p>所以导致几乎全网络的人都在说：哎呀没有境内源啊，慢啊，没有 Packman 啊种种。有时候我听了想笑。openSUSE 技术最先进了（两个「凡是」），咋不见骂 KDE？这都什么年代的老黄历了…然后这种思维导致我真的不愿意公开的去点名哪个或哪几个镜像快，因为 MirrorBrian 是根据人家镜像管理员跟主服务器管理员商议的权重来公平转发流量的。你浙大源刚建可能很快，但我要是点名了，可能两天后你镜像就挂了。这既不科学也不公平。</p>
<p>所以目前的折中方法就是：</p>
<p>希望真正懂的来帮助针对特殊国情 debug 一下，甚至 commit 一下。</p>
<p>需要快的镜像的人请去 mirrors.opensuse.org，选一个真正离你近的。可以 ping IP 然后去反查地理位置。Packman 在北交的镜像里有源。</p>
<p>另外需要特别提示的就是，OBS 源，除非你镜像管理员主动请求，否则是不推送的，因为更新太频繁。对你的服务器开销很大。中国大学都 90 年代的老硬盘，也没几个主动申请的。但南方用户可以用台湾的，北方用日本的，速度不错。大陆的镜像一般都是 ISO 下载+主源+升级源，没了。这可能就是为「灵活性」要必然付出的代价吧。至少用了这么久的我，要不是因为作为中文社区的 coordinator 必须要去关注新版发布，个人可能都不太需要新版发布。因为 zypper 你会用了之后想用什么新版有什么新版，滚动升级？嘿，Tumbleweed 没出来之前我就用 OBS 自己滚了一年多了…</p>
<p>好了。如果这些在你眼里都是小问题，甚至你突然热血上脑想要加入 openSUSE 为开源事业奋斗终身，那么，欢迎加入 openSUSE 社区。</p>

		
			<a href="https://marguerite.github.io/posts/opensuse_%E4%B8%AD%E6%96%87%E7%A4%BE%E5%8C%BA%E9%9D%A2%E4%B8%B4%E7%9A%84%E8%8B%A5%E5%B9%B2%E9%97%AE%E9%A2%98/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/openshift_%E6%90%AD%E5%BB%BA_rawdog_%E5%AE%9E%E7%8E%B0%E9%83%A8%E8%90%BD%E6%A0%BC%E8%81%9A%E5%90%88/">OpenShift 搭建 rawdog 实现部落格聚合</a></h1>
	<time>19.03.2013 00:00</time>
	
	<div>
		
		<p>因为 <a href="https://planet.opensuse.org/">Planet openSUSE</a> 的管理员一直 unavailable，导致我无法正常的推送对 Planet 的修复和处理中文新成员的加入，考虑到中文博客又太多，总去找一个 unavailable 的人，两边都互相嫌嘛，于是就架设了这个：<del>community.suse.org.cn</del> Update: 挂了</p>
<p>这篇文章中的教学其实我只完成了一半，python wsgi 前台是 Arch 维护者 <a href="http://blog.felixc.at/">Felix Yan</a> 帮写的，所以在前面感谢一下 co-worker。
准备</p>
<p>你要去开一个新 <code>Application</code>，类型是 <code>Python 2.7 Community Cartridge</code>，然后要新添加一个 <code>Cron 1.4 Cartridge</code>。其它的 openshift 必要知识我假设你已经了解了，不了解的话请去看我之前的文章。
rawdog 架设</p>
<p><code>rawdog</code> 是 KDE 社区开发的部落格聚合程序。简单说，这就是一个 python 程序，它只能获取 feed，并输出 HTML，至于怎么让 HTML 能被用户在互联网上看到，这就是 HTTP Server 需要做的事情了。而 openshift python 默认的 HTTP Server 就是 Apache + python wsgi。如果你用 VPS 还可以使用如 Apache，Nginx，Lighttpd 等配置 FastCGI 什么的。HTTP Server 这块我不懂，所以只能拿人家写好的 Server 出来讲。但是一定要记住，只配置好 rawdog 你才成功了一半。</p>
<p>另外这里我用的也不是原装的，是三转之后的 rawdog，就是被 Planet openSUSE 改了一次，我自己又改了一次的。代码在 <a href="https://github.com/marguerite/susews-planet">susews-planet</a>。</p>
<p>ssh 进你的 application，然后</p>
<pre><code>cd $OPENSHIFT_DATA_DIR
git clone https://github.com/marguerite/susews-planet.git
cd susews-planet
</code></pre>
<p>这个你只能使用 openSUSE 的 bento 风格，想改风格请在本地 Git 捡出，然后修改 planetsuse/planet_template.html 和 planetsuse/feedlist_template.html，website/css，website/js，website/images 下的内容。</p>
<p>修改完成后依次使用 l10n-extract-from-template 和 l10n-merge.sh 提取翻译，去 locale 文件夹用 lokalize 翻译 .po 文件，翻译好后运行 l10n-compile-po.sh 生成 .mo 文件。</p>
<p>然后通过各种方法把它上传到上面所说的目录。</p>
<p>接着运行一次：</p>
<pre><code>./compile.sh
</code></pre>
<p>这会编译 python 的 .pyc 和 .pyo。</p>
<p>然后修改 planetsuse/feeds 文件，加入要聚合的部落格：</p>
<pre><code>feed 15m http://www.marguerite.su/feed/
  define_name Marguerite Su
  define_nick marguerite
  define_face marguerite
  define_lang cn
  define_irc  marguerite
  define_member 1
</code></pre>
<p>这是一个比较全的单个 feed 配置。其中 defineface 会用在 website/hackergotchi/ 下的同名 .png 头像。definemember 是判断你是不是 openSUSE 社员。本质上你可以 define 任何关键词，只要你在前面的两个 template 里有对它们规定风格。</p>
<p>改好了 feeds 和上传了 hackergotchi 头像后。运行：</p>
<pre><code>./update.sh
</code></pre>
<p>这会预取 feeds，也会提示一些比如 feed 301 重定向了，新 feed 在哪里的消息。</p>
<pre><code>./write.sh
</code></pre>
<p>这会在 website/global 和 website/[lang] 这样的文件夹下写入 HTML。</p>
<p>至此，rawdog 配置完成。</p>
<h4 id="wsgi-伺服器架设">wsgi 伺服器架设</h4>
<p>首先，在本地 git clone [openshift 给你的那个 ssh:// 的仓库地址]。</p>
<p>然后修改 setup.py</p>
<pre><code>from setuptools import setup

setup(name='openSUSE Chinese Community', version='1.0',
description='OpenShift Python-2.7 Community Cartridge based application',
author='Marguerite Su', author_email='marguerite@opensuse.org',
url='http://www.python.org/sigs/distutils-sig/',

#  Uncomment one or more lines below in the install_requires section
#  for the specific client drivers/modules your application needs.
install_requires=['greenlet', 'gevent', 'bottle',
  #  'MySQL-python',
  #  'pymongo',
  #  'psycopg2',
  ],
)
</code></pre>
<p>重点要改的是 name，author，authoremail 和下面的 installrequires。</p>
<p>接着修改 wsgi/application，这个是 Felix 的工作，我完全看不懂，不过你的 susews-planet/website 的位置和我的一样的话，可以直接复制粘贴：</p>
<pre><code>#!/usr/bin/env python
import os
from bottle import route, default_app, static_file, redirect, HTTPError

root = os.environ['OPENSHIFT_HOMEDIR'] + 'app-root/runtime/data/susews-planet/website'

@route('/')
def homepage():
    redirect('/global/')


@route('/&lt;path:path&gt;/')
def static_dir(path):
    return static_file(path + &quot;/index.html&quot;, root=root)

@route('/&lt;path:path&gt;')
def static(path):
    result = static_file(path, root=root)
    if isinstance(result, HTTPError):
        result = static_file(path + &quot;/index.html&quot;, root=root)
        if not isinstance(result, HTTPError):
            redirect(path + &quot;/&quot;)
     return result

application = default_app()
</code></pre>
<p>然后我们还要做一件事，因为你的 planetsuse/feeds 和 website/hackergotchi 都在你用 git 修改不到的地方，这给后续更新带来了麻烦，所以要修改下。</p>
<p>首先 ssh 登入把它们两个删掉。</p>
<p>然后把你本地的 planetsuse/feeds 和 website/hackergotchi 复制到 git 根目录下。</p>
<p>接着编辑 .openshift/action_hooks/build，内容如下：</p>
<pre><code>ln -sf ${OPENSHIFT_REPO_DIR}/hackergotchi ${OPENSHIFT_DATA_DIR}/susews-planet/website/
ln -sf ${OPENSHIFT_REPO_DIR}/feeds ${OPENSHIFT_DATA_DIR}/susews-planet/planetsuse/
</code></pre>
<p>就是把我们 git 上传的这两个文件软链接到它们应该在的地方去。</p>
<h4 id="cron-jobs">Cron jobs</h4>
<p>前面已经说了，rawdog 只管制作 HTML，但是我们需要这些 HTML 始终最新，所以需要用 cron jobs 每小时跑一次它来更新 feeds。</p>
<p>进入到 .openshift/cron/hourly 做一个 fetch.sh，内容如下：</p>
<pre><code>{
$LOG_DATE=`date -R`
echo -n &quot;========== START $LOG_DATE ==========&quot;
${OPENSHIFT_DATA_DIR}/susews-planet/update.sh 2&gt;&amp;1
${OPENSHIFT_DATA_DIR}/susews-planet/write.sh 2&gt;&amp;1
echo -n &quot;========== END $LOG_DATE ==========&quot;
} &gt; &quot;${OPENSHIFT_DATA_DIR}/log.txt&quot; 2&gt;&amp;1
</code></pre>
<p>然后回退到 git 根目录：</p>
<pre><code>git add .
git commit -m &quot;add cron and soft link&quot;
git push
</code></pre>
<p>本教学到此就结束了，如果您想去绑定域名，请看我这篇文章：</p>
<p><a href="http://marguerite.su/openshift-host-wordpress-tutorial">openshift 搭建 wordpress 教程</a></p>
<p>如果您想弄个备份，请看我这篇文章：</p>
<p><a href="http://marguerite.su/openshift-setup-a-gtalk-group-chat-with-a-bind-in-irc-channel">openshift 搭建和 IRC 频道互通的 Gtalk 群聊</a></p>
<p>Enjoy life！</p>
<h4 id="2013-10-01-update-nginx-相关">2013-10-01 Update: Nginx 相关</h4>
<p>Nginx 相对要简单一些，只需要本地捡出，然后相应修改，传到你的 htdocs/子文件夹。写对配置就可以，这是迁移到 community.suse.org.cn 后由我和 phonixlzx 共同修改的 nginx 配置，写到 /etc/nginx/nginx.conf 还是 /etc/nginx/vhosts.d/xxx.conf 要看你的需求了。</p>
<pre><code>server {
    server_name community.suse.org.cn;
    listen   80;
    listen   [::]:80;

    root /srv/www/htdocs/community.suse.org.cn/website/;
    index index.html;

    # Only match requests for /
    location = / {
        rewrite ^ /global permanent;
    }
}
</code></pre>

		
			<a href="https://marguerite.github.io/posts/openshift_%E6%90%AD%E5%BB%BA_rawdog_%E5%AE%9E%E7%8E%B0%E9%83%A8%E8%90%BD%E6%A0%BC%E8%81%9A%E5%90%88/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/openshift_%E6%90%AD%E5%BB%BA%E5%92%8C_irc_%E9%A2%91%E9%81%93%E4%BA%92%E9%80%9A%E7%9A%84_gtalk_%E7%BE%A4%E8%81%8A/">openshift 搭建和 IRC 频道互通的 Gtalk 群聊</a></h1>
	<time>17.03.2013 00:00</time>
	
	<div>
		
		<p>Long long ago，大概八九个月前，看到翁学天的 ikde 群居然能和 IRC 互通，感觉很惊艳，于是也想弄一个替代现在的 <a href="mailto:opensuse_zh@im.partych.at">opensuse_zh@im.partych.at</a>。</p>
<p>Party Chat 是一个很好的免折腾 Gtalk 群聊主机服务，架设在 Amazon 上面，但是有以下缺点：</p>
<ul>
<li>不能和 IRC 互通。作为一个开源社区，要是没有利用上 IRC，总感觉少了点什么。</li>
<li>在线时间不能保证。也就是说你没有 schduled_maintenance 的权利，只能它在线你就聊，它离线你就歇息。</li>
<li>大于 300 人的群拒绝服务。也就是说你的群是顶着地雷的，到了 300 人整个群就会消失，因为 Party Chat 不能承担那些多出来的流量钱。你交钱也不给你提供额外服务。</li>
</ul>
<p>所以几十个人的小社群还是可以应付的，但是人满了之后迁移成本特别大。所以就想着趁人少迁移到 ikde 那种高级群里去。</p>
<p>打听了一下，这种群聊是使用依云(<a href="http://lilydjwg.is-programmer.com/">@lilydjwg</a> 写的两个软件在 VPS 上搭建的，分别是 <a href="https://github.com/lilydjwg/xmpptalk">xmpptalk</a> 和 <a href="https://github.com/lilydjwg/ircbindxmpp">ircbindxmpp</a>。</p>
<p>但问题出来了，我没有 VPS。当时 <a href="https://openshift.redhat.com/">openshift</a> 这种 PaaS 已经出现了，只是还比较新鲜，我不会用。于是去年 9 月的一次尝试就可耻地失败了。</p>
<p>当时（甚至至今）网上关于这两个软件的文章只有两篇：</p>
<ul>
<li>依云自己的<a href="http://lilydjwg.is-programmer.com/2012/5/14/xmpptalk-chatroom-bot-and-xmpp-group-recommandation.33537.html">介绍性文章</a>，但是太粗略了。</li>
<li>StarBrilliant 的稍微详细一些的<a href="http://m13253.blogspot.jp/2012/08/xmpptalk-get-started.html">文章</a>，但是还是有点犯了程序员的通病：普通用户不知所云。如果你是一个已有 VPS 的博主，看了也得折腾一会儿，要是麻瓜的话，恐怕也就只能看个热闹了。</li>
</ul>
<p>于是逼迫我们群里的 douglarek 写了一篇在 openshift 上折腾它们的文章给我：</p>
<p><a href="http://blog.icocoa.me/xmpptalk-on-openshift/">Openshift 折腾 xmpptalk</a></p>
<p>但实际上这篇文章很水。反正看过就知道啦，到处都是「凑合」。实际上你看它也根本架设不起来（好多致命细节都没说）。</p>
<p>当时我就是在这种情况下开始折腾的。</p>
<p>首先我开了 <code>Do it yourself</code> 应用，然后进去编译，结果很悲剧，红帽给的内存太小，mongodb 编译不成功; 后来我使用 Build Service 模拟了一个 openshift 环境（一个 x86_64 的 RHEL），然后编译编译，我犯懒了…</p>
<p>今年三月份挖出了作者，又折腾了一个多礼拜，总算搞定了。下面是正文：</p>
<h4 id="注册一个-do-it-yourself-应用">注册一个 Do it yourself 应用</h4>
<p>注册、配置 ssh 和怎么使用 ssh 登入服务器的教学见 douglarek 和我之前几篇讲 openshift 的教学，都是最基本的英文，基本能注册 GMail 的都会弄，不能注册 GMail 的基本你也不能在墙外看见我的文章。</p>
<h4 id="编译">编译</h4>
<p>基本的 <code>Do it yourself</code> 应用是带有以下部分的：Git，bz2/gz 的解压软件。所以你这些是不需要的。</p>
<p>ssh 进去之后，<code>cd $OPENSHIFT_DATA_DIR</code>，这个文件夹的完整位置是在 <code>app-root/runtime/data</code>，当然你也可以使用 <code>echo $OPENSHIFT_DATA_DIR</code> 看到它的完整路径。</p>
<p>在这个文件夹里使用 wget URL 去下载源代码，git clone 捡出 git 仓库。这些我都假设你已经知道了。</p>
<p>所有的编译过程都是源自依云的 scripts/quick_install.sh，但是我更新了一些东西，所以最好还是看我的。</p>
<h4 id="编译-python-27">编译 Python 2.7</h4>
<p>下载 python 2.7.3 和 3.3 的源代码（你看到这篇的文章的时候可能已经更新了，所以请去 python.org 下载最新版）。然后解压。</p>
<p>编译 2.7.3 是因为后面我们有个程序要用 2to3 把针对 Python 2 gen 写的代码转义到 Python 3 gen。</p>
<pre><code>mkdir python2.7 (我们要把最终的 python 2.7 装进去，因为你没有权限往 /usr 装)
cd Python-2.7.3
// 依云原版的多了个 `--with-computed-gotos`，但这个选项已经没有了，变默认了。另外一个 `--with-wide-unicode` 作废了，现在默认就是 long。
./configure --enable-shared --with-threads --enable-ipv6 --with-system-expat --with-system-ffi --prefix=${OPENSHIFT_DATA_DIR}/python2.7/
make -j4
make install
</code></pre>
<p>这样 python2.7 里就有 python 了。</p>
<h4 id="编译-python-33">编译 Python 3.3</h4>
<p>这才是主依赖，因为依云的代码是基于 3.2 版 Python 写的。</p>
<pre><code>mkdir python3.3
cd Python-3.3
./configure --enable-shared --with-threads --with-computed-gotos --enable-ipv6 --with-system-expat --with-system-ffi --prefix=${OPENSHIFT_DATA_DIR}/python3.3/
make -j4
make install
</code></pre>
<p>需要注意的就是：<code>--prefix=${OPENSHIFT_DATA_DIR}/pythonX.X/</code> 一定要有，而且必须写在最后，否则不起作用。至于原因我也不知道，openshift 就是这样的。如果你看了 douglarek 的文章的话，你可能会知道一个 <code>${OPENSHIFT_RUNTIME_DIR}</code>，这个也作废了。</p>
<h4 id="编译-python3-distribute">编译 python3-distribute</h4>
<p>去 PYPI 下载 <a href="https://pypi.python.org/pypi/distribute">distribute</a>。</p>
<p>这时编译需要用我们前面刚制作好的 python 3.3 来编译它。所以我们需要修改一下系统的 <code>PATH</code> 和 <code>LDLIBRARYPATH</code> 让系统能够找到 python3</p>
<pre><code>export PATH=${OPENSHIFT_DATA_DIR}/python3.3/bin:$PATH
export LD_LIBRARY_PATH=${OPENSHIFT_DATA_DIR}/python3.3/lib:$LD_LIBRARY_PATH
</code></pre>
<p>这个 export 命令只对当前 Shell 有效，也就是说你 ssh logout 再登入，是要重新做的。</p>
<p>编译：</p>
<pre><code>cd distribute-0.6.35
// 我们把所有的子模块都装到 python3.3 目录，下同
python3 setup.py install --prefix=${OPENSHIFT_DATA_DIR}/python3.3/
</code></pre>
<h4 id="编译-python3-dns">编译 python3-dns</h4>
<p>去 dnspython.org 下载 Python 3.x stable 对应的软件包。我这时是 1.10.0，解压用 unzip 命令。编译方法同 distribute。</p>
<h4 id="编译-pyxmpp2">编译 pyxmpp2</h4>
<p>要用依云修改的：</p>
<pre><code>git clone https://github.com/lilydjwg/pyxmpp2.git
</code></pre>
<p>这时需要注意的是，最新版有问题，我们要使用 b3a01f03a10e319a833d2f57639bb696790c930e 这个 commit 的版本：</p>
<pre><code>git checkout b3a01f03a10e319a833d2f57639bb696790c930e pyxmpp2
</code></pre>
<p>以后的编译方法同 distribute。</p>
<h4 id="编译-pymongo">编译 pymongo</h4>
<p>下载在 <a href="https://pypi.python.org/pypi/pymongo">PYPI</a>。</p>
<p>编译方法同 distribute。</p>
<h4 id="安装-mongodb-的预制包">安装 mongodb 的预制包</h4>
<p>前面已经说了，在 openshift 上编译的话内存会耗尽，所以我们用编译好的。下载在 mongodb.org，要下载 Linux 64-bit 的版本。</p>
<p>然后解压，把 bin 目录下的所有东西都复制到 python3.3/bin 中去就可以了：</p>
<pre><code>cp -r mongodb-*/bin/* python3.3/bin/
</code></pre>
<h4 id="用-python-273-安装-mongokit">用 Python 2.7.3 安装 mongokit</h4>
<p>下载 <code>github.com/namlook/mongokit.git</code></p>
<pre><code>git clone https://github.com/namlook/mongokit.git
</code></pre>
<p>因为要用 python 2.7.3 编译，所以我们要像前面一样把 python2.7/bin 和 python2.7/lib 导入到环境变量中去，具体方法见 distribute。</p>
<p>编译：</p>
<pre><code>// 就这个不是 python3
python setup.py install --prefix=${OPENSHIFT_DATA_DIR}/python2.7/
</code></pre>
<p>接着我们要做 2to3，方法是：</p>
<pre><code>cd python2.7/lib/python2.7/site-packages/mongokit-*-py2.7.egg/mongokit
2to3 -w .
</code></pre>
<p>然后把 mongokit-*-py2.7.egg 文件夹复制到 python3.3 的相应位置去：</p>
<pre><code>cp -r python2.7/lib/python2.7/site-packages/mongokit-*-py2.7.egg python3.3/lib/python3.3/site-packages/mongokit-*-py3.3.egg
// * 的位置请自己补充
</code></pre>
<p>至此，xmpptalk 的依赖我们就安装完了。下面安装 ircbindxmpp 的。</p>
<h4 id="编译-tornado">编译 tornado</h4>
<p>捡出地址在 github.com/facebook/tornado。编译方法同 distribute。</p>
<p>下面我们的操作都将在 python3.3/lib/python3.3/site-packages 下进行。 取得一些 winterpy 的小脚本</p>
<pre><code>git clone https://github.com/lilydjwg/winterpy.git
</code></pre>
<p>然后把里面的 pylib/myutils.py 和 pylib/xmppbot.py 复制到 site-packages 目录下，winterpy 就可以删掉了。</p>
<p>至此，ircbindxmpp 的依赖安装完毕。下面获取它们两个。</p>
<p>在 site-packages 中捡出它们：</p>
<pre><code>git clone https://github.com/lilydjwg/xmpptalk
git clone https://github.com/lilydjwg/ircbindxmpp
</code></pre>
<h4 id="一些清理">一些清理</h4>
<p>如果你不准备未来升级你的程序的依赖，那么你可以把 python3.3 下除了 bin 和 lib 的文件夹全部干掉节省空间。也可以不干掉。</p>
<p>除了 python3.3 这个目录外的其它编译中间文件目录都可以 rm -rf 掉。</p>
<h4 id="准备配置">准备配置</h4>
<p>你需要两个 xmpp 账户，一个用来做 Gtalk 群聊，比如 <a href="mailto:talk@suse.org.cn">talk@suse.org.cn</a>，另一个用来转发 IRC 上的消息，比如 <a href="mailto:irc@suse.org.cn">irc@suse.org.cn</a>。xmpp 账户怎么来你可以看 StarBrilliant 的文章学习配置 prosody，也可以像我一样直接在我的 Google Apps 里新建两个账户（Google 的服务据说发送太多链接和说话太勤对方会收不到，但是目前我还没遇到）。所以我就用 Google Apps 为例了。怎么使用 prosody 我也不会，我的 bundle 里也没有 prosody 的依赖和主包，估计 openshift 在你不绑定域名（见我搭建 wordpress 那篇文章）的情况下也跑不起来（因为要设 SRV 记录，红帽提供的二级域名肯定没这功能）。</p>
<p>注册 Google Apps，需要你有一个个人持有的域名。这个教学我省略了，因为太多了。只讲几个新建账户的注意事项：</p>
<p>你建完账户是 temporary password，可以在该账户的明细里看到，首次登入是会要你改的，所以不要建完就去配置了，那样不会成功。一定要登入改密码。</p>
<p>如果你用 Google Apps 弄过 Gtalk 就知道需要<a href="http://support.google.com/a/bin/answer.py?hl=zh-Hans&amp;answer=34143">设置一个 DNS 的 SRV 记录</a>，才能在非 Google 的客户端比如 Pidgin 上登入。但是这段 SRV 记录并不全，你之所以能在 Pidgin 上登入是你告诉了 Pidgin 我这就是 Google Talk。xmpptalk 是不知道的，它会一直 ping 你的域名的 A 记录，但那上面通常都是个博客或者别的什么，肯定不是 xmpp 服务器。所以你要多加下面一段 SRV 记录，和 Google 给的一起，加到你的 DNS 服务商比如 cloudns.net（不是每个 DNS 服务商都支持用 SRV 记录，至少我知道的免费的就这一个，反正你的域名注册商甚至共享主机商提供的 DNS 都不行），至于怎么改域名的 DNS 请自行搜索。</p>
<pre><code>_xmpp-client._tcp.你的域名. IN SRV 5 0 5222 xmpp-server.l.google.com.
_xmpp-client._tcp.你的域名. IN SRV 20 0 5222 alt1.xmpp-server.l.google.com.
_xmpp-client._tcp.你的域名. IN SRV 20 0 5222 alt2.xmpp-server.l.google.com.
_xmpp-client._tcp.你的域名. IN SRV 20 0 5222 alt3.xmpp-server.l.google.com.
_xmpp-client._tcp.你的域名. IN SRV 20 0 5222 alt4.xmpp-server.l.google.com.
</code></pre>
<p>至于各项的意思，搜索一下就能明白，反正 cloudns 是蛮简单的，就顺序填空…</p>
<p>等 DNS 刷新好了之后，然后请把两个账户相互加为好友。不然到了 ircbindxmpp 的时候，由于不是好友，转发机器人没法把 IRC 说的话转发到 Gtalk 群聊里去。</p>
<p>这样你的账户就准备好了。我们开始配置。</p>
<h4 id="开始配置">开始配置</h4>
<p>我们需要改两个配置文件：site-packages 中的 xmpptalk/config.py 和 ircbindxmpp/config.py。没有就把 config.py.example 复制一下：</p>
<pre><code>cp -r config.py.example config.py
</code></pre>
<p>下面先说 xmpptalk。</p>
<pre><code>TODO: your bot's JID： 这个是要写群聊机器人使用的账户，比如 talk@suse.org.cn/bot
TODO: your JID：这个是管理员的 Gtalk 账户，比如我的 marguerite@opensuse.org
TODO: type a random string below：这个需要一个随机字符串，可以用 cat /dev/urandom | tr -dc A-Za-z0-9_ | fold -w 12 | head -5 得到一堆。
nickchangeinterval = datetime.timedelta(days=10)：这个是群成员改昵称的间隔，默认是 10 天。
TODO: select a database：这里唯一需要改的是 host，不能用 localhost，可以用 echo $OPENSHIFT_INTERNAL_IP 得到一个 IP 地址，用它。
warnv105 = True：这个改成 False，不然用 Gtalk 105 版的就会持续收到警告说你的客户端不安全之类的，但问题我们群里有台湾地区的用户，我们面临的问题人家不需要。
TODO: the password of your bot：群聊机器人的密码。
</code></pre>
<p>这样就好了。其它的不用管（如果你用 Prosody 的话可能还需要管一个 <del># Which IP to connect?</del>）。[Update] 依云酱说一般不需要，这个是给 Prosody 不支持 IPv6 准备的，一般填也填 IPv6 地址。</p>
<p>然后你还需要新建一个 xmpptalk/mongodb.conf，指定数据库的存放位置和日志的存放位置，完整见下：</p>
<pre><code>dbpath=/var/lib/openshift/513c7ceb5973cab51b0002c5/app-root/runtime/data/openshift-xmpptalk-ircbindxmpp-bundle/data
logpath=/var/lib/openshift/513c7ceb5973cab51b0002c5/app-root/runtime/data/openshift-xmpptalk-ircbindxmpp-bundle/log/mongodb.log
logappend=true
#auth = true
smallfiles = true
nojournal = true
bind_ip = 127.5.76.1
</code></pre>
<p>其中 <code>/var/lib/openshift/513c7ceb5973cab51b0002c5/app-root/runtime/data/</code> 就是 <code>$OPENSHIFT_DATA_DIR</code>，可以用 <code>echo $OPENSHIFT_DATA_DIR</code> 得到，<code>openshift-xmpptalk-ircbindxmpp-bundle</code> 是我预制的那个 bundle（在 git 上），data 和 log 是我自己建的。那个 bind_ip 就是前面刚讲的 <code>$OPENSHIFT_INTERNAL_IP</code>。在配置文件中是不能使用 openshfit 预定义的宏的，因为使用这个配置的程序读不出。</p>
<p>然后新建一个 start_mongo.sh 来启动 mongod 的 daemon，内容如下：</p>
<pre><code>mongod --config ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/lib/python3.3/site-packages/xmpptalk/mongodb.conf --fork
</code></pre>
<p>那个 &ndash;config 跟的也是 mongodb.conf 所在的完整路径。</p>
<p>ircbindxmpp 的配置：</p>
<pre><code>targetJID = JID('talk@suse.org.cn')：这是你的群聊机器人的账户
BotJID = JID('irc@suse.org.cn/bot')：这是你的转发机器人的账户
'channel': 'opensuse-cn',：你要互通的 IRC 频道
'nick': 'SuSE-Lady'：机器人在频道上的名字
'realname': 'Gtalk Bot'：机器人在频道说话时显示的名字，我们互通 Gtalk 自然叫 Gtalk
password = ''：你的转发机器人的密码。
</code></pre>
<h4 id="运行">运行</h4>
<p>export 环境变量（如果你已经登出了的话）。</p>
<p>进入 xmpptalk 文件夹：</p>
<pre><code>// 启动数据库
chmod +x start_mongo.sh
./start_mongo.sh
// 初始化数据库
python3 dbman.py
// 运行群聊机器人
nohup python3 main.py &gt; ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/log/xmpptalk.log 2&gt;&amp;1 &amp;
</code></pre>
<p>其中 nohup 是不让 python3 进程一直占用你的 shell，后面那一套是把返回在 shell 屏幕上的 runtime 日志给重定向到一个文件中去。不然的话，在你 ssh 退出之后，这些 python3 进程会被 openshift 杀死，你的群就掉线了。</p>
<p>这时您就可以加群聊机器人与其它人通过机器人聊天了。</p>
<p>进去 ircbindxmpp 文件夹：</p>
<pre><code>// 运行 IRC 转发机器人
nohup python3 ircbindxmpp &gt; ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/log/ircbindxmpp.log 2&gt;&amp;1 &amp;
</code></pre>
<p>原理同上。这时您就可以在 IRC 频道里看到你的机器人上线了。</p>
<p>停止机器人：</p>
<pre><code>killall python3
</code></pre>
<p>简单粗暴但行之有效。</p>
<p>你也可以做个重启脚本 restart.sh 放在根目录下面（一般 mongodb 跑起来就不用我们去管它了，所以不包括这个）：</p>
<pre><code>export PATH=${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/bin:$PATH
export LD_LIBRARY_PATH=${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/lib:$LD_LIBRARY_PATH
killall python3
#killall mongod
#mongod --config ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/lib/python3.3/site-packages/xmpptalk/mongodb.conf --fork
nohup python3 ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/lib/python3.3/site-packages/xmpptalk/main.py &gt; ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/log/xmpptalk.log 2&gt;&amp;1 &amp;
nohup python3 ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/lib/python3.3/site-packages/ircbindxmpp/ircbindxmpp &gt; ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/log/ircbindxmpp.log 2&gt;&amp;1 &amp;
</code></pre>
<p>uncomment mongod 那两行可以连 mongod 一起重启。</p>
<h4 id="特殊注意">特殊注意：</h4>
<p>是不是以为万事大吉了？还没呢…红帽说了，后台程序（在网页访问不到的），两天就会被 idle。也就是说两天后两个机器人就都掉线了。怎么办呢？</p>
<p><code>Do-it-yourself</code> 应用的 Git（就是网页上让你 clone 的那个 URL）里面有一个 diy 文件夹，里面是一个 ruby 写的超小网页服务器，我们把那个跑起来，不就有一个非后台应用在跑了么？</p>
<pre><code>git clone ssh://*************@talk-**********.rhcloud.com/~/git/talk.git/
</code></pre>
<p><del>然后啥也不用干，直接 touch 个什么东西，提交回去就行了：</del> [Update] 要改 ./openshift/action_hooks/{start,stop}，不然提交的时候会停掉服务器上正在跑的程序只跑一个 ruby 的网页服务器。</p>
<pre><code>cd talk/.openshift/action_hooks/
</code></pre>
<p>在 start 尾部添加以下几行：</p>
<pre><code>export PATH=${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/bin:$PATH
export LD_LIBRARY_PATH=${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/lib:$LD_LIBRARY_PATH
nohup python3 ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/lib/python3.3/site-packages/xmpptalk/main.py &gt; ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/log/xmpptalk.log 2&gt;&amp;1 &amp;
nohup python3 ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/lib/python3.3/site-packages/ircbindxmpp/ircbindxmpp &gt; ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/log/ircbindxmpp.log 2&gt;&amp;1 &amp;
</code></pre>
<p>在 stop 里面的 exit 0 上面插入一行：</p>
<pre><code>killall python3
</code></pre>
<p>然后提交：</p>
<pre><code>git add .
git commit -m &quot;initial commit&quot;
git push
</code></pre>
<p>然后 <code>.openshift/action_hooks/start</code> 就会在服务器跑，就会把那个网页服务器跑起来了。</p>
<h4 id="额外">额外</h4>
<h6 id="prosody">Prosody</h6>
<p>这个确实不懂。不过需要提醒大家注意的一点是，如果你打算在 openshift 上编译并搭建它，你需要了解 openshift 不是每个端口都可以对外的。大部分你熟悉的端口都已经<a href="https://openshift.redhat.com/community/kb/kb-e1038-i-cant-bind-to-a-port">在内外两边都为官方应用保留了</a>，内部你只可以用 15000 – 35530，对外只可以 bind 到 <code>${OPENSHIFT_INTERNAL_PORT}</code> 也就是 8080，会通过 80 端口转发给外部。</p>
<h6 id="群日志">群日志</h6>
<p>在 mongodb 数据库里。可以用 mongoexport 导出。</p>
<p>[Update] 今天他们非要一个 IRC 日志，我就直接把日志做成 cron jobs 放到我们之前跑起来的那个 ruby 网页服务器上了。</p>
<p>[Update1] 他们非要 HTML 格式的日志。好吧：<a href="https://talk-marguerite.rhcloud.com/index.html">https://talk-marguerite.rhcloud.com/index.html</a></p>
<p>把以下内容保存为 log_to_web.sh，放在 .openshfit/cron/hourly 并 <code>chmod +x</code> 后提交：</p>
<pre><code>${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/bin/mongoexport --host ${OPENSHIFT_INTERNAL_IP}:27017 -d talk -c log --csv -f time,jid,msg -o ${OPENSHIFT_REPO_DIR}/diy/chat.txt
${OPENSHIFT_DATA_DIR}/text2html.sh ${OPENSHIFT_REPO_DIR}/diy/chat.txt &gt; ${OPENSHIFT_REPO_DIR}/diy/index.html
rm -rf ${OPENSHIFT_REPO_DIR}/diy/chat.txt
killall ruby
nohup $OPENSHIFT_REPO_DIR/diy/testrubyserver.rb $OPENSHIFT_INTERNAL_IP $OPENSHIFT_REPO_DIR/diy &gt; $OPENSHIFT_HOMEDIR/diy-0.1/logs/diy_server.log 2&gt;&amp;1 &amp;
</code></pre>
<p>解释下就是导出 log，转为 HTML，然后重启网页服务器生效。</p>
<p>然后把以下内容保存为 text2html.sh，放在 $OPENSHIFT_DATA_DIR 下面然后 chmod +x。</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<pre><code>            &lt;/head&gt;
        &lt;body&gt;&quot;
echo '&lt;h2&gt;openSUSE 中文社團聊天記錄'
echo &quot;`date -R`&quot;
echo '&lt;/h2&gt;&lt;div id='content'&gt;'
cat &quot;$1&quot; | while read p; do
        echo &quot;&lt;p&gt;&quot;
        echo $p
        echo &quot;&lt;/p&gt;&quot;
done
echo '&lt;/div&gt;
                &lt;span&gt;2013 版權所有 suse.ws。這是 openSUSE 中文社區的官方聊天室。&lt;/span&gt;
                &lt;span&gt;添加 talk@suse.ws 爲 Gtalk 好友或 IRC 加入 #opensuse-cn 頻道即可參與。&lt;/span&gt;
        &lt;/body&gt;
    &lt;/html&gt;'
</code></pre>
<p><!-- raw HTML omitted --></p>
<h6 id="备份方案">备份方案</h6>
<p>你当然可以使用我在之前搭建 wordpress 的文章里讲的 snapshot 方法。不过下面介绍一种自动的：使用 <a href="https://github.com/andreafabrizi/Dropbox-Uploader">Dropbox-Uploader</a> 配合 openshift 的 Cron Cartridge。</p>
<p>首先在网页版的 My Applications 里点进去，然后进入你的 Do-it-yourself 应用，点 add cartridge，加一个 Cron 1.4 的 cartridge。</p>
<p>然后 ssh 进你的应用程序：</p>
<pre><code>cd $OPENSHIFT_DATA_DIR
git clone https://github.com/andreafabrizi/Dropbox-Uploader
</code></pre>
<p>然后把里面那个脚本复制到上级目录，文件夹可以删了。需要修改一个地方：</p>
<pre><code>sed -i &quot;s/CONFIG_FILE=~/CONFIG_FILE=\./&quot; ./dropbox_uploader.sh
</code></pre>
<p>不然会提示权限不够。再：</p>
<pre><code>chmod +x dropbox_uploader.sh
./dropbox_uploader.sh
</code></pre>
<p>一次，跟随设置。这样以后你就可以 ./dropbox_uploader.sh upload 文件 了。</p>
<p>先备份一下我们整个的 openshift-xmpptalk-ircbindxmpp-bundle 吧。注意，以下所有脚本都是在 ${OPENSHIFT_DATA_DIR} 运行的。这是 dump_all.sh 脚本的内容：</p>
<pre><code>pushd ${OPENSHIFT_DATA_DIR}
# 压缩整个 openshift-xmpptalk-ircbindxmpp-bundle 文件夹
tar -cjvf openshift-xmpptalk-ircbindxmpp-bundle-`date +%Y-%m-%d`.tar.bz2 openshift-xmpptalk-ircbindxmpp-bundle/
# 上传到 Dropbox
./dropbox_uploader.sh upload `ls | grep tar.bz2`
# 删除 tar
rm -rf openshift-xmpptalk-ircbindxmpp-bundle-*.tar.bz2
popd
</code></pre>
<p>然后我们编写一个 backup_data.sh 备份脚本，需要备份的有数据库，config.py，mongodb.conf，和 data 与 log 文件夹，以及 mongodump 导出的群消息日志：</p>
<pre><code># 备份 mongodb
${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/bin/mongodump --host ${OPENSHIFT_INTERNAL_IP}:27017 -d talk -o ${OPENSHIFT_DATA_DIR}/backup/database/
# 导出聊天记录
${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/bin/mongoexport --host ${OPENSHIFT_INTERNAL_IP}:27017 -d talk -c log --csv -f time,jid,msg -o ${OPENSHIFT_DATA_DIR}/backup/chatlog.csv
# 备份 config(s)
mkdir -p ${OPENSHIFT_DATA_DIR}/backup/config/
cp -r ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/lib/python3.3/site-packages/xmpptalk/config.py ${OPENSHIFT_DATA_DIR}/backup/config/xmpptalk.config.py
cp -r ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/lib/python3.3/site-packages/ircbindxmpp/config.py ${OPENSHIFT_DATA_DIR}/backup/config/ircbindxmpp.config.py
cp -r ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/lib/python3.3/site-packages/xmpptalk/mongodb.conf ${OPENSHIFT_DATA_DIR}/backup/config/
# 备份 log(s)
mkdir -p ${OPENSHIFT_DATA_DIR}/backup/log/
cp -r ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/log/* ${OPENSHIFT_DATA_DIR}/backup/log/
# 备份裸数据库
mkdir -p ${OPENSHIFT_DATA_DIR}/backup/raw/
cp -r ${OPENSHIFT_DATA_DIR}/openshift-xmpptalk-ircbindxmpp-bundle/data/* ${OPENSHIFT_DATA_DIR}/backup/raw/
# 改名
mv ${OPENSHIFT_DATA_DIR}/backup ${OPENSHIFT_DATA_DIR}/backup-`date +%Y-%m-%d-%H_%M_%S`
pushd ${OPENSHIFT_DATA_DIR}
tar -cjf `ls | grep backup-20`.tar.bz2 backup-*/
# 上传
./dropbox_uploader.sh upload *.tar.bz2
# 清理
rm -rf backup-20*
popd
</code></pre>
<p>现在是 cron 设置了。还记得刚才你弄的那个 talk 的 Git 吗？用那个去搞（以下命令是在本地的）：</p>
<pre><code>cd talk
cd .openshift/cron
</code></pre>
<p>能够看到下面有 minutely 什么的这样的文件夹。openshift 的 cron 就是把脚本扔到这样的文件夹里，就会按照文件夹名所说的时间来跑。我们的 dump_all.sh 一个月执行一次就好了，而 backup_data.sh 可以每天执行一次。于是就把那两个脚本也放到相应的文件夹里去（服务器上的是给你手动跑的），不要忘记 chmod +x 哦！然后：</p>
<pre><code> git add .
git commit -m &quot;scheduled backup&quot;
git push
</code></pre>
<p>完成，enjoy！
呜谢</p>
<ul>
<li>依云酱</li>
<li>douglarek</li>
</ul>

		
			<a href="https://marguerite.github.io/posts/openshift_%E6%90%AD%E5%BB%BA%E5%92%8C_irc_%E9%A2%91%E9%81%93%E4%BA%92%E9%80%9A%E7%9A%84_gtalk_%E7%BE%A4%E8%81%8A/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/openshift_%E5%AE%89%E8%A3%85_owncloud_%E5%8F%96%E4%BB%A3_google_reader/">openshift 安装 owncloud 取代 Google Reader</a></h1>
	<time>15.03.2013 00:00</time>
	
	<div>
		
		<p>Google Reader’s sunset is the dawn of ownCloud news.</p>
<p>翻译过来就是 GR 的夕阳正是 ownCloud 新闻订阅的佛晓。</p>
<p>相信 Google Reader 在 7 月 1 号关闭对大家都是一个打击，虽然大家的未读都是 1000+。但是一种生活方式突然变了，总归有点怅然。至少我听闻这个消息的时候第一反应就是：妈呀！我的那么多红心怎么办！</p>
<p>是小企鹅输入法的作者翁学天让我意识到了：哦，好在还有替代。虽然我是它的简体中文翻译者，但是我以前真的不知道嘿嘿。</p>
<p>首先这个替代目前装起来还是有一点困难的。所以需要一个这样的中文教学来教大家怎么才能装上有 News 的 ownCloud。</p>
<p>我们开始吧。（以 openSUSE 为例）</p>
<h4 id="下载">下载</h4>
<p>首先我们需要 Git。因为现在只有 Git 版的 ownCloud Apps 才有这个功能。</p>
<pre><code>sudo zypper in git
</code></pre>
<p>安装好了 Git，我们需要下载这些源码</p>
<pre><code>git clone https://github.com/owncloud/core
</code></pre>
<p>这是核心组件。</p>
<pre><code>git clone https://github.com/owncloud/apps
</code></pre>
<p>这是带 News 的 apps。</p>
<pre><code>git clone https://github.com/owncloud/themes
</code></pre>
<p>这是新的 responsive 主题。</p>
<pre><code>git clone https://github.com/owncloud/3rdparty
</code></pre>
<p>这是一些第三方的比较好用的 apps。当然如果不用也可以不装（我装了也没发现有太大用）。</p>
<pre><code>cd apps
git clone https://github.com/owncloud/mail
</code></pre>
<p>这是 ownCloud 新写的邮件收发界面，愿意尝试的可以下。</p>
<p>然后，把 apps, themes, 3rdparty 文件夹下的所有内容都放到 core 里相关文件夹下面。</p>
<p>于是你就有了完整版的 ownCloud 6.0 alpha。</p>
<h4 id="注册-openshift-应用">注册 OpenShift 应用</h4>
<p>下面去要去 openshift 申请一个账户。</p>
<p>然后在「我的应用程序」去新建一个应用程序。</p>
<p>选 PHP 5.3, 然后为你的 Web app 设置一个好记的网址。</p>
<p>注意下面的「Scaling」要设成「是」。OpenShift 默认可以建立三个应用程序，每个应用程序 1 GB 空间，但是 1 GB 空间对于一个个人网盘有点少。所以我们选了「是」就是说如果我装满了，就再挤占我另外的一个 Gear 的空间，直到三个都用光。</p>
<p>点「创建应用」，然后在右手边，会有一个添加「Cartridge」的按钮，进去添加一个 MySQL 的 Cartridge。</p>
<p>之后应该返回给你一个框，需要你的 SSH 公钥。Linux 下只需要</p>
<pre><code>ssh-keygen 
</code></pre>
<p>就可以在 $HOME/.ssh/isa.pub 生成一串公钥，把那个贴过去就好了。 安装</p>
<p>你需要用刚才装的 Git 去克隆 OpenShift 给你的那个 URL。</p>
<pre><code>git clone 那串 URL
</code></pre>
<p>下载来之后，执行以下操作：</p>
<pre><code>cd owncloud
git rm -r php/index.php
</code></pre>
<p>然后添加一个远程 Git 仓库，抓取 openshift 的人调教好的 ownCloud。</p>
<pre><code>git remote add upstream -m master git://github.com/ichristo/owncloud-openshift-quickstart.git
git pull -s recursive -X theirs upstream master
</code></pre>
<p>好了吧，但是这个是稳定版的，没有 News。我们就要把我们刚才准备好的 core 复制到 php/ 文件夹下面去覆盖它们：</p>
<pre><code>cp -r core/* owncloud/php/*
</code></pre>
<p>为什么要这么做，因为红帽改的这个有一些 openshift 专有的文件，可以直接让 owncloud 跑起来而不用我们去麻烦的设置。</p>
<p>下面上传</p>
<pre><code>git add .
git commit -m &quot;initial commit&quot;
git push
</code></pre>
<p>输入你刚才 ssh-keygen 时留的密码。然后就去你的网址使用吧。</p>
<h4 id="背景">背景</h4>
<p>openshift 是红帽旗下的 PaaS（平台即服务），意思就是给你一个你账户几乎可以完全控制的在线空间，你可以装软件，跑服务什么的。</p>
<p>ownCloud 是 KDE 社区催生的一个 idea，意思就是为目前的 Dropbox 之类的商业网盘提供一个开源替代。所以和 KDE 整合的也不错，也有 Android/iPhone 客户端。但唯一让普通人忘而却步的就是，它需要一个个人空间才能装。</p>
<h4 id="其它话题">其它话题</h4>
<h6 id="owncloud-相关">ownCloud 相关</h6>
<p>它有一个 MySQL bug，就是你如果服务器上已经有了 ownCloud，那再上传新的 ownCloud 的时候就会各种用户名已存在。我没有 debug 出来究竟在哪儿，不过那些东西没有写在它的 ownCloud 数据库里，而是在那个名为 mysql 数据库的 users 和 db 表里，在里面写了你已有的用户名。再次安装不会先删除这两个表里的用户名。</p>
<p>但是实际测试我发现，即使添加一个 phpMyAdmin cartridge 删掉了也装不上。原因是服务器上已经有了一个 config。所以你还要 ssh 到服务器上去</p>
<pre><code>ssh 刚才那个 git 地址里没有 git:// 一直到 rhcloud.com 那串
</code></pre>
<p>然后进入 runtime/repo/php/config 去把那个 config.php 删除。</p>
<p>但是实际上我这么做了也没有成功，估计是还有别的地方没找到。但实际上这样升级并不好，因为这样做实际上是新装一个 ownCloud。你现有的 ownCloud 里的东西你要使用备份功能导出，如果你 3GB 都用了呢？来回 6GB，你有那个网速么…</p>
<p>目前比较好的升级方法有一种。就是想办法获取你服务器上的应用程序的拷贝，拿回来填充你的 Git，这样你的本地应用程序和服务器上的总是同步的。填充好了之后，再用新的 ownCloud 去填充一次旧版，然后再提交。具体获取拷贝的方法在我 openShift 搭建 wordpress 教程的最后有讲，而填充新版的教学在本文前面有讲。</p>
<h6 id="google-reader-相关">Google Reader 相关</h6>
<p>根据翁学天的扫盲。feed 只能返回最近的 10 篇文章。GR 之所以能够一直拉一直拉是因为 Google 缓存了在你之前订阅这个 feed 的人返回的那 10 篇。所以想通过 feed 取回我所有的红心是不可能了。</p>
<p>去 GR 发现它出了一个 takeout 功能，就是以前的导出，但是因为要关了嘛，所以能导出你以前的红心啊什么的个人历史为 JSON 格式。看了看，发现里面是很全的，但都是网址。而我的订阅里有些网址已经关站了，即使我求人写个 JSON 渲染程序也拉不到那个 URL 了（估计很快有会有程序员写这种程序了，比如 GR JSON 2 PDF 等）。</p>
<p>反正最后不知道你们怎么弄的，我是把 feed 手动加到 News 里（解决迁移问题），然后在 「GR 设置」- 「文件夹管理」里把红心设为 Public，接着用 Google Chrome 的网页截图扩展抓取整个网页抓了半个晚上把我的红心分页全部保存为图片，然后使用 ImageMagick 的 convert：</p>
<pre><code>convert images/* my-google-reader-fav.pdf
</code></pre>
<p>弄成一个 pdf 然后传到我刚弄好的 ownCloud 里去的。</p>
<p>好么，May the force be with you。</p>
<p>PS：按照 shellex 的说法：「任何时候都应该假设单一在线服务是不可靠的。当然，这与技术无关，只要将服务交与了某个服务提供商，就意味着正在失去对他们的控制力。」</p>
<p>「像 RMS 那样苦行僧般地活着我做不到也不会去做，像 Linux 那样的桌面我也不会有太多机会去用，但是并不代表他们就不重要。相反，他们很重要，他们的存在本身就是底线。只有支持他们，当我想从某个团体中收回控制时，才有选择的权力。」</p>
<p>我们是不是该考虑给自己的其它唯一的东西找一个替代呢。比如多为 openSUSE 做贡献之类的…或者，「说不定哪天 Google Talk 也关了，小姐请问我可以得到你的手机号码吗？」</p>

		
			<a href="https://marguerite.github.io/posts/openshift_%E5%AE%89%E8%A3%85_owncloud_%E5%8F%96%E4%BB%A3_google_reader/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/suse_%E6%96%B0%E5%B9%B4%E9%A3%A8%E7%A4%BC/">SUSE 新年飨礼</a></h1>
	<time>08.03.2013 00:00</time>
	
	<div>
		
		<p>亲爱的 openSUSE 贡献者们，</p>
<p>为了感谢您在过去的一年中为 openSUSE 项目所做的杰出贡献，值此新版发布在即，SUSE Desktop Team 的 FJKong 孔叔从 SUSE 市场部虎口夺食，抢到了一些礼品送给大家（实物图见下文）。礼品价值不是很高、数量也很少（因为我们没有社区经费，礼物也不是 SUSE 官方支出，纯属孔叔和市场部员工的个人情宜（？哈哈）得到的，所以我们会尽量把礼物交给已经证明最能呵护它们的贡献者），主要是为了表达一份微不足道的心意，openSUSE 没有忘记你们，正是你们或多或少的在他人眼里可能很怪很傻很宅的贡献，支持着 openSUSE 一直有勇气有动力面对不可知的未来，在这个 complicated 的世界里艰难前行。</p>
<p>同时新官上任的 SUSE Desktop Lead 梁辰晔（Da Liang）梁叔（原 SUSE 北京服务器组的 Senior）携 Desktop Team 全体同仁 Lance， 王伶卓，向 openSUSE 中文圈的用户们致意。（郑宇 jzheng 郑叔从 SUSE 暂时跳槽到 Canonical 准备创业中，但仍然在 openSUSE 社区和论坛上积极出没）</p>
<p>先上图（由于我个人并不参与此次礼品赠送，所以内部细节我可能描述的不是很清楚）：</p>
<p>手包（似乎是装卡的，不知能否装钞票）：</p>
<p>水晶笔（似乎是 SUSE 标的中性笔杆）：</p>
<p>马克杯（去年我收到一个，图也是去年的）：</p>
<p>Novell 杯具</p>
<h4 id="数量">数量：</h4>
<ul>
<li>手包：6/8 个</li>
<li>水晶笔：7/9 个</li>
<li>马克杯：1 只</li>
<li>公仔：0/1 只</li>
</ul>
<h4 id="领取人">领取人：</h4>
<ul>
<li>hillwood，重庆道桥，公仔一只</li>
<li>douglarek，英特尔北京，手包一只，笔一只</li>
</ul>
<h4 id="一些说明">一些说明：</h4>
<p>公仔是可遇不可求的，因为这是 SuSE 中国的营销道具，至少需要提前一年预定（hillwood 是补去年的货，他也不参与今年的礼品赠送），稀缺到了什么程度呢，全日本就两只（SUSE JP 持有），全台湾据我所知个人持有的只有 swyear 一只。</p>
<p>会尽量一只手包+一只水晶笔这样送，最后剩下的那只笔可能会送给最后一个人也就是一只手包+两只水晶笔，也可能会诠释一下礼轻情意重，几十块钱邮费投递给你一只几块钱的笔…所以目前可以领取的人数是 6人。如果人数太多，可能会再去市场部请求支援，或用没有 SUSE 标志的普通 U 盘弥补，但是这些不太靠谱。</p>
<h4 id="领取资格">领取资格：</h4>
<p>肯定不能是空口无凭，说是 openSUSE 的人就送。至少要有在册的我知道的贡献，比如维基编辑和文档翻译（维基不是很好统计、中文文档组的人我会在 transifex 上发公告），以及官方的软件包维护，故障回报和修复，论坛积极帮助其他用户，以及现实生活中做过推广（这个需要简单核实，比如你建议你同学装了，那请让他给我 email 一封，相信不值钱的小物件也不值得你赌一把人品）。</p>
<p>有了贡献后，就是先到先得原则，不会因为贡献大小调整（要按贡献大小，那我就照单全收了…）。</p>
<h4 id="领取方式">领取方式：</h4>
<p>论坛私信、电子邮件、推特、Gtalk 等你能想到我能收到的方式告知我你的通讯地址（能收到货的，当然也可以是马甲）。</p>
<h4 id="投递范围">投递范围：</h4>
<p>中国大陆（不包括港澳）。</p>
<h4 id="邮资给付">邮资给付：</h4>
<p>SUSE 中国已结清。</p>
<p>另：公仔我们准备从 openSUSE 项目官方去请求设计图纸，然后在大陆境内找代工厂制作一批，开个社区淘宝店发售，来筹措一些经费来做推广。（只是前期想法，困难很多）详情请见晚些时候的《openSUSE 中文社区目前面临的一些问题》。</p>

		
			<a href="https://marguerite.github.io/posts/suse_%E6%96%B0%E5%B9%B4%E9%A3%A8%E7%A4%BC/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/opensuse_%E4%B8%8B%E7%9A%84_fcitx_%E8%BE%93%E5%85%A5%E6%B3%95/">openSUSE 下的 Fcitx 输入法</a></h1>
	<time>05.03.2013 00:00</time>
	
	<div>
		
		<p>这是给 openSUSE Marketing team 做的，大概会写到 news.opensuse.org 的 12.3 发布日志上。介绍了一些 Fcitx 的多语言支持和高级功能。</p>
<p>Youku：</p>
<p>Download:</p>
<p><a href="http://115.com/u/26338483">http://115.com/u/26338483</a></p>

		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/opensuse_linux_%E6%88%98%E6%B8%A3%E6%B5%AA%E8%AF%A6%E8%A7%A3%E6%95%99%E7%A8%8B/">openSUSE Linux 战渣浪详解教程</a></h1>
	<time>24.02.2013 00:00</time>
	
	<div>
		
		<p>自从去年十一申请到哔哩哔哩账户，一直也没有加入阿婆主的行列中去，我心有愧…于是就做了一个授人以渔的从原理到实现的教程，讲述了一些阿婆主喜闻乐见的基础知识。</p>
<h4 id="战渣浪-原理">“战渣浪” 原理</h4>
<ul>
<li>Av Fun 和哔哩哔哩的视频都是外链到渣浪、土豆、优酷这些视频站的。</li>
<li>平均码率大于 1047KB/s 的视频会被二次压缩（我没写错，我也不懂为什么会有这个奇葩的设定）</li>
<li>非 flv 封装格式的视频会被二次压缩</li>
<li>视频非 AVC 编码、音频非 AAC 编码会被二次压缩</li>
<li>二次压缩首先会掉帧，其次会过审。你投原创自然没问题也不需要战，我只看影视区的。</li>
</ul>
<p>来战！</p>
<h4 id="查看平均码率">查看平均码率</h4>
<p>FFMpeg 查看码率的方法是 ffmpeg -i 视频文件</p>
<pre><code>Input #0, matroska,webm, from '谎言满屋.House.of.Lies.S01E01.Chi_Eng.AC3.1024X576.x264-五零字幕组.mkv':
Metadata:
creation_time   : 2012-06-06 12:52:18
Duration: 00:33:28.38, start: 0.000000, bitrate: 1585 kb/s
Stream #0:0: Video: h264 (Main), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 23.98 fps, 23.98 tbr, 1k tbn, 47.95 tbc (default)
Stream #0:1: Audio: ac3, 48000 Hz, 5.1(side), s16, 384 kb/s (default)
</code></pre>
<p>MPlayer 查看码率的方法是 mplayer -vo null -ao null -identify -frames 0。其中最重要的是 -identify 选项，意思是去识别视频信息。-frames 0 表示不播放，-vo null -ao null 表示使用 null 驱动（也就是不使用视音频驱动，这样你就能通过 ssh 在服务器上识别视频信息了）。</p>
<pre><code>Clip info:
creation_time: 2012-06-06 12:52:18
ID_CLIP_INFO_NAME0=creation_time
ID_CLIP_INFO_VALUE0=2012-06-06 12:52:18
ID_CLIP_INFO_N=1
Load subtitles in ./
ID_FILENAME=谎言满屋.House.of.Lies.S01E01.Chi_Eng.AC3.1024X576.x264-五零字幕组.mkv
ID_DEMUXER=lavfpref
ID_VIDEO_FORMAT=H264
ID_VIDEO_BITRATE=0
ID_VIDEO_WIDTH=1024
ID_VIDEO_HEIGHT=576
ID_VIDEO_FPS=23.976
ID_VIDEO_ASPECT=1.7778
ID_AUDIO_FORMAT=8192
ID_AUDIO_BITRATE=384000
ID_AUDIO_RATE=48000
ID_AUDIO_NCH=6
ID_START_TIME=0.00
ID_LENGTH=2008.38
ID_SEEKABLE=1
ID_CHAPTERS=0
</code></pre>
<p>这是最最基础的了。但是识别能力不强，比如上面的那个 H264 的 MKV 就没有识别出视频码率。</p>
<p>下面祭出更为强大的法宝：Mediainfo。听名字就知道它是专门识别多媒体信息的。它不但有图形界面，还整合到 KDE 的右键菜单中去了。</p>
<p>打开 Mediainfo，打开文件后，使用 HTML/Text 模式查看（Easy 模式不显示 overall bitrate 平均码率)。</p>
<h4 id="分离视频和音频">分离视频和音频</h4>
<p>为什么要分离视频和音频？因为其实它们是分开编码的，比如 H264/MPEG-4 这些是视频编码，而 AAC/AC3 这些是音频编码，编码之后再用封装容器装起来，比如 MKV/MP4/FLV 都是封装格式。</p>
<p>而各个编码器内部还有不同的实现/标准，有些好一些有些差一些，比如 FFMpeg 中的 FAAC 音频编码器就非常基础了，不支持 HE-AAC 标准。当然还有更强的标准比如 Apple AAC 和 Fraunhofer AAC，那就需要商业软件比如 Apple Quicktime 来支持了。Linux 下能用上的最强 AAC 编码就是 Nero 公司的 Nero AAC 了。下载在<a href="http://www.nero.com/enu/company/about-nero/nero-aac-codec.php">此</a>。解压就是三个可执行文件。当然爱用 RPM 的来<a href="https://www.box.com/s/5auhujfoecrb1u1mtjji">这里</a>下，省得你注册了。关于各种 AAC 的比较见 Doom 9 论坛的<a href="http://forum.doom9.org/archive/index.php/t-164813.html">帖子</a>。</p>
<p>由于我们要用 Nero AAC 来处理音频，而现实中我们下载的视频也经常是要么都不合格，要么视频不合格，要么音频不合格，总之总是要处理，我们就把这个分离作为标准步骤了。狗耳也可以使用 FAAC，那样不用分离要简单很多。</p>
<p>现在除了蓝光，1080p 和 720p 的视频基本都是用 MKV 封装的。解封装要用到 mkvtoolnix，重新封装为 MP4 要用到 gpac。当然你也可以使用 ffmpeg 单纯复制音频或单纯复制视频的方法做，那太低端太“俗手”了，所以我们只传授“正着”（都是围棋术语）。</p>
<p>先查看 MKV 封装的轨道：</p>
<pre><code>mkvmerge --identify 谎言满屋.House.of.Lies.S01E01.Chi_Eng.AC3.1024X576.x264-五零字幕组.mkv 
轨道 ID 0: video (V_MPEG4/ISO/AVC)
轨道 ID 1: audio (A_AC3)
</code></pre>
<p>有些可能有轨道 ID 2 也就是封装的字幕。</p>
<p>下面把两条轨道分别提取为中间文件：</p>
<pre><code>mkvextract tracks 谎言满屋.House.of.Lies.S01E01.Chi_Eng.AC3.1024X576.x264-五零字幕组.mkv 0:clip.h264 1:audio.ac3
</code></pre>
<p>clip.h264 和 audio.ac3 是中间文件名称，你也可以叫别的。另外这样的速度可比 FFMpeg 复制轨道要快多了。</p>
<pre><code>正在提取轨道 0 （CodecID 为 'V_MPEG4/ISO/AVC'）到文件 'clip.h264'。容器格式: AVC/h.264 elementary stream
正在提取轨道 1 （CodecID 为 'A_AC3'）到文件 'audio.ac3'。容器格式: Dolby Digital (AC3)
进度: 100%
</code></pre>
<h4 id="处理音频">处理音频</h4>
<p>先转换成 WAV （NeroAAC 只支持 WAV 输入 =。=）。</p>
<pre><code>ffmpeg -i audio.ac3 audio.wav
</code></pre>
<p>然后转换 WAV 为 HE-AAC</p>
<pre><code>neroAacEnc -br 64000 -2pass -if ./audio.wav -of ./audio.aac
</code></pre>
<p>-if 输入文件，-of 输出文件，-br 比特率，-2pass 跑两遍，第一遍大局观，第二遍压制。</p>
<p>码率小于 48 KBit/s 使用 HE-AAC v2; 介于 48～96 KBit/s 使用 HE-AAC，大于 96 使用 LC-AAC（会剔除高频，当然 96～256 都是 MP3 的优势范围，可惜渣浪不让用）。具体技术说明请见<a href="http://en.wikipedia.org/wiki/High-Efficiency_Advanced_Audio_Coding">维基百科</a>和<a href="http://www.hydrogenaudio.org/forums/index.php?showtopic=59284">这个帖子</a>。我们使用 NeroAAC 的目的就是为了在低码率环境下使用 HE-AAC 尽量保持好音质，而 Linux 的 FAAC 只支持 LC-AAC。</p>
<p>可以使用</p>
<pre><code>neroAacEnc -help
</code></pre>
<p>查看可用选项。注意，有些选项是冲突的。比如 –2pass 只能应用于动态码率 -br，再比如你用 128 KBit/s 的码率是肯定用不了 -he 的。</p>
<p>另外要保持和视频文件的和谐。如果你对一个 1080p 的画质使用 48 KBit/s 的渣音质，很容易造成音画不同步。</p>
<p>处理好用 SMPlayer 试听一下，发现音质没什么损失，但是文件大小降低了 6 倍。</p>
<h4 id="处理视频">处理视频</h4>
<p>根据 Doom9 的<a href="http://forum.doom9.org/archive/index.php/t-108401.html">这个帖子</a>，目前 x264 开源项目处理的质量比商业软件还要高，所以没说的就它了。</p>
<p><em><strong>关于 x264 的版本</strong></em>：</p>
<p>x264 有三个版本，x264 vanilla, x264 kMod, x264 tMod。具体的分辨见 Doom9 的<a href="http://forum.doom9.org/showthread.php?t=164506">这个帖子</a>。其中用的比较多的是 x264_tMod（开发者似乎是个中国人？他的 wordpress 博客是中文名字）。一般发行版都没有带，openSUSE 比较强啦，RPM 在<a href="https://www.box.com/s/oywdggnrbserz1epqchh">此</a>（现在 Packman 服务器怠机中，好了会推送过去）。编译也不是很难，用以下参数</p>
<pre><code>configure --prefix=/usr \
--enable-pic \
--enable-visualize \
--enable-shared \
--bit-depth=10 \
--enable-nonfree \
--enable-lto
</code></pre>
<p>就都编上了。也可以用我的 <a href="https://github.com/marguerite/openSUSE-SPEC-Non-Free/blob/master/x264_tMod.spec">spec</a>，git clone 了源码后，做成我要求的压缩包，然后放到 /usr/src/packages/SOURCES 和 /usr/src/packages/SPECS 后运行：</p>
<pre><code>rpmbuild -ba x264_tMod.spec
</code></pre>
<p>然后到 /usr/src/packages/RPMS/x86_64 目录下去找 RPM 即可。</p>
<p><em><strong>关于 x264 的参数</strong></em></p>
<p>压片跟围棋一样有两种流派，技术流和天衍流（但围棋的两个流派虽然相互看不懂但是都尊重对方）。技术流就是了解每一个参数的意义，在自己给自己那无坚不摧的决定物质的意识施加的蛋疼限制下，试图寻找一个完美通吃的 setting。考虑到高压的时间，这种流派是在用生命在压片; 天衍流就是了解基本的方法和关键的几个参数，在特定外部限制下（比如渣浪的），凭第六感和大局观压片，用心灵压片，外界成不成那就要讲该片和你有没有缘了。</p>
<p>考虑到压片的黑魔法属性，一开始就投入技术参数的樊笼中只能作茧自缚。黑魔法属性是说，比如 x264 自己就有 100+ 个参数，每个参数又有 10 个档位，计算机可以算出排列组合但它没有视觉无法知道压出的片是不是可口; 而可悲的人类，哈哈，错一个参数都可能导致别人压出的是高清而你压出的是睾清，给你一个礼拜你都找不出来错哪儿了。另外看不懂宅们的思路，去 B 站投稿么，要的就是一个开心，找一个乐子（要不我煮碗面给你吃？），等你把所有参数都大彻大悟融汇贯通之后，人家早就发片过百部啦。</p>
<p>如果你依然毅然决然地决定踏上技术参数的不归路，有以下几篇堪称“人生哲学”的神文在此：</p>
<ul>
<li><a href="http://www.nmm-hd.org/doc/X264%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D">x264使用介绍</a></li>
<li><a href="http://www.nmm-hd.org/doc/X264%E8%A8%AD%E5%AE%9A">x264设定</a></li>
<li><a href="http://blog.sina.com.cn/s/blog_3df9d2330100zcy4.html">尽量不浪费压制时间的简单视频高压要点</a></li>
</ul>
<p>另外：</p>
<pre><code>x264_tMod --fullhelp
</code></pre>
<p>说得不比它们差，只是英文而已。就不再班门弄斧了。</p>
<p>直接上我的参数吧：</p>
<pre><code>x264_tMod --pass 1 --bitrate 950 --preset slow --tune film --vbv-bufsize auto_high --vf resize:512,288,,,,spline/pad:0,48,0,48 -o vieo.h264 clip.h264
</code></pre>
<p>之后把 –pass 1 改成 2 压第二遍。–bitrate 950 是比特率; –preset 和 –tune 是预设方案，这里我选的是慢速压电影; –vbv-bufsize 预缓冲秒数用的也是电影的预设 auto_high。</p>
<p>需要说明一下 video filter –vf。resize 是要把你的视频分辨率调整为多少，它和下面的 pad 相加才会得到最终的分辨率，所以不要在这里想当然地输入 512×384（哔哩哔哩的播放器尺寸），这样会生成一个 512x(384+48×2) 的分辨率。</p>
<p><em><strong>注意</strong></em> x264 vanilla 是没有这个 pad 和之后的 subtitle filter 的。这就是为什么我们要用 x264_tMod 的原因。还有一个原因是搬运工在 Windows 上常用的 MeGUI 的后端就是这个版本，转换比较容易一些，参数也好扒。不然的话也可以使用 FFMpeg 的 pad filter，但据 DOOM9 论坛<a href="http://forum.doom9.org/archive/index.php/t-143215.html">讲</a>，不用 x264 加黑边会造成码率偏高。</p>
<p>另外提醒一下，去找别人分享的参数时一定要看清楚对方压的是什么片！现在 B 站贴吧里比较活跃的是新番，我曾套用新番的参数压出一个 56 MB 的电影，RMVB 睾画质…基本所有的教程里截图的参数都不能用来压电影。</p>
<p><em><strong>字幕问题</strong></em></p>
<p>（写教程时我压这片是渲染好字幕的，所以只能凭借去年 10 月研究的感觉来写）</p>
<p>因为比较重要所以要单独来讲。定理一，看我口型：</p>
<blockquote>
<p>表把字幕留到视频变成 FLV 了才想着去加！</p>
</blockquote>
<p>这是新手最容易犯的错误（因为觉得字幕不重要），也是尸山血海的错误。因为 Linux 下给 FLV 加字幕，在不把你之前的工作推倒把 FLV 转换掉的情况下，只有一种方法，使用 audemux 硬渲染 SSA 字幕（也很难在 Google 搜到）。由于 SSA 是一种非常罕见的字幕格式，基本宣告着您掉进参数/命令行的大坑里爬不出来了！</p>
<p>定理二:</p>
<blockquote>
<p>表以为可以把字幕以轨道 2 的形式封装到 MKV/MP4！</p>
</blockquote>
<p>如果你搜索 Linux 嵌入字幕，那你百分百会使用这种方法！这最后会让你整个人都囧掉，因为 MKV/MP4 再转 FLV 的时候自动把字幕轨道丢掉了。因为 FLV 这个封装格式就！没！有！字！幕！轨！道！</p>
<p>背景知识：嵌入是在封装格式支持字幕轨道的情况下，把 aas/srt 外挂到该轨道中，又叫软字幕，这种字幕可以轻松的提取出来; 渲染是把 aas/srt 转换为 vodsub 图片格式，然后使用过滤器写入到视频轨道的原视频中去，或外挂 vodsub（因为 vodsub 是图片不是文字嘛，所以就可以像娜姐那样加很多特效）。又叫硬字幕。根据不同的渲染方式，有时候根本提取不出来。</p>
<p>大体比较流行的字幕格式有两种，ass 和 srt。其中比较好的是 ass，转换方法也简单：</p>
<pre><code>ffmpeg -i *.srt *.ass
</code></pre>
<p>因为 FLV 就没有字幕轨道，所以我们不能使用嵌入的方法，而应该使用渲染的方法或者去 A/B 站使用外挂字幕。你搜到的 FFMpeg/MPlayer 方法基本都是嵌入，就是挂载为一条单独的轨道，这样子是不可以的。要用 x264 的 vfilter 来渲染。</p>
<pre><code>--vf subtitle: --sub &quot;sub.ass&quot;
</code></pre>
<p>和前面的写在一起就是：</p>
<pre><code>--vf resize:512,288,,,,spline/pad:0,48,0,48/subtitle: --sub &quot;sub.ass&quot;
</code></pre>
<p>PS: Windows 下一般都用 Avisynth 脚本来做这种字幕，Linux 下的移植 Avxsynth 我没研究，因为太烦了，FFMpeg 和 Mplayer 方法见下面：</p>
<ul>
<li>MPlayer 见<a href="http://ubuntuforums.org/showthread.php?t=1155877">此文</a>，看到那些参数了吧，哈哈</li>
<li>FFMpeg 见<a href="http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20burn%20subtitles%20into%20the%20video">此文</a>，相比 MPlayer 简单一些，用滤镜的。</li>
</ul>
<h4 id="合并视频和音频">合并视频和音频</h4>
<p>现在我们已经分别处理好我们的音频和视频了。下面用 FFMpeg 将它们拼接为 FLV。</p>
<pre><code>ffmpeg -i video.h264 -i audio.aac -vcodec copy -acodec copy -map 0:v -map 1:a ./谎言满屋.House.of.Lies.S01E01.Chi_Eng.H264.HE-AC.marguerite.flv
</code></pre>
<p>-map 的意思是把 video 轨道定为 0, audio 轨道定为 1。可用 mediainfo 查看码率，1006 KBit/s！这是我第一次战渣浪呦！</p>
<p>下面用 MPlayer/VLC 播放器预览一下，如果没有出现音画不同步就可以拿去传渣浪了。如果出现了音画不同步，那分情况：</p>
<ul>
<li>如果全局的音画不同步（多见于高画质配渣音质），可以使用 Audacity 来进行提前或退后。</li>
<li>如果是随机的音画不同步，多数是由于你压制音频的时候没有 -2pass 导致音频没有大局观。</li>
</ul>
<h4 id="其它黑科技">其它黑科技</h4>
<ul>
<li>Linux 的 Avisynth 移植 <a href="https://github.com/avxsynth/avxsynth">Avxsynth</a>。由于是官方移植，Windows 的脚本也通用的。等 Packman 恢复后提交过去。</li>
<li>前黑后黑。我的想法是使用 Kdenlive 做一段全黑屏视频，然后使用 MPlayer/FFMPEG/GPac 截取定长时间（算法见此)，然后使用 GPac 合并视频。</li>
<li>红色有角 N 倍速和 FLV Bug 我没找到技术规格。想来实现也不是很难。</li>
</ul>
<h4 id="其它-note">其它 Note</h4>
<ul>
<li>为什么不用强大的 HandBrake？因为它对 h264 支持的不好,wxWidget 也总卡死。</li>
<li>推荐一个图形界面？似乎可以使用 avidemux。</li>
</ul>

		
			<a href="https://marguerite.github.io/posts/opensuse_linux_%E6%88%98%E6%B8%A3%E6%B5%AA%E8%AF%A6%E8%A7%A3%E6%95%99%E7%A8%8B/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/opensuse_%E4%B8%8B%E7%8E%A9%E5%9B%B4%E6%A3%8B/">openSUSE 下玩围棋</a></h1>
	<time>24.02.2013 00:00</time>
	
	<div>
		
		<p>Update：更新了评论里两位巨巨指正的技术错误和建议到正文中。</p>
<p>主要是整理下 Linux 下面的围棋软件近况、设置方法和已知故障。</p>
<h4 id="引擎">引擎</h4>
<p>GNUGo 这个是所有围棋软件的后端，简单说就是个棋力十二级的机器人。</p>
<p>不是很明白这里的电脑棋力单位“级”与我们人类的棋力单位“段”的换算关系，因为电脑肯定没法参加人类的段位考试，而两者也很少对弈，围棋引擎很奇怪的，中低段位的人类和引擎对弈，基本很难赢。它的思考方法和这些段位的人类很不一样，比如人类会在开局考虑一些谋篇布局，而电脑只有那几个布局定式，根据你落子的位置优化选出一个; 人类在中盘会考虑大局，而电脑除非你不与它对抗（它就按照定式走），如果出现对抗那它的算法就是怎么堵截你在数学上最优，而人类肯定不是这样，有些禁忌位也一样有人放，即所谓的“妙手”、“妖刀”，当然更多的还是“俗手”、“蠢手”。而高段位的人类和引擎对弈中，引擎被虐的很惨，还不如三段的人类去下，因为高段位的变化很多，思考质量也不亚于电脑。</p>
<p>围棋引擎流行的能跑在 Linux 下的有这些：<a href="http://fuego.sourceforge.net/">Fuego</a>（棋力 9 段，9×9 棋盘）, <a href="http://www.gnu.org/software/gnugo/devel.html">GNU Go</a>（棋力 12 级）, <a href="https://www.lri.fr/~teytaud/mogo.html">MoGo</a>, <a href="http://pachi.or.cz/">Pachi</a>（棋力 4 段），其中开源最强的是 Fuego（因为闭源引擎用的多数不是蒙地卡罗方法，强是应该的）。</p>
<p>当然这些强弱是对有几年棋龄的业余棋手而言的，我们这种入门小菜哪个都下不过，随意选个就开始好了。一般发行版都会带 GNUGo。我们就用它了。</p>
<p>另外关于围棋程序比较好的网站是：<a href="http://senseis.xmp.net/?GoPlayingPrograms">Sensei&rsquo;s Library</a>，有各种引擎比较详细的介绍和测评，至于界面，还能用的我都在下面整理出来了，完整列表见此。
界面</p>
<ul>
<li><a href="http://www.pandanet.co.jp/java/gGo/">gGo</a> Pandanet 电脑围棋界比较有名的熊猫网出的。Java 写的，最新版本发布于 2004 年。</li>
<li><a href="http://rubygo.rubyforge.org/">RubyGo</a> Ruby 写的，最新版本发布于 2005 年。</li>
<li><a href="http://qgo.sourceforge.net/">qGo</a> Qt3 写的，最新版本发布于 2008 年。</li>
<li><a href="http://www.gokgs.com/help/app/main.html">CGoban</a> 这其实是围棋网 KGS 的官方客户端。Java 写的，版本也比较老。</li>
<li><a href="http://www.pandanet.co.jp/English/glgo/">glGo</a> Pandanet 出的，最后更新于 2008 年，但是依赖很烦，依然依赖 python 2.5。没有源代码（网页打不开），非开源软件。</li>
</ul>
<p>这些都是老黄历了，网上宣传的基本也都是这些，因为这是 IGS 或者 KGS 这些业内比较知名的组织开发的。但是在现今的 Linux 上都比较难跑。我整理了一份比较好跑的界面：</p>
<ul>
<li><a href="https://github.com/pzorin/qgo">qGo2</a> 这是 qGo 的 Qt4 移植，可以说几多波折，开发者换了一个又一个，因为它太强大了，支持这些战网：IGS, WING, LGS, CyberORO, Tygem, Tom, and eWeiqi 的对弈和观战（看好了后面两个是中国的），还是目前最强大的 sgf（通用围棋棋谱格式，用于复盘和自己打谱）编辑器。</li>
<li><a href="http://gitorious.org/quarry">quarry</a> 这是一个本地围棋和五子棋客户端。用 GNUGo 或 GRhino 做后端。配置 GTP 后端的时候要加 -mode gtp &ndash;quiet 参数才能把 /usr/bin/gnugo 跑起来。</li>
<li><a href="http://www.kde.org/applications/games/kigo/">kigo</a> 只用于 KDE，自动识别后端。我目前用这个。但是有一个 Bug 就是电脑不会认输，走不下去了就一直下虚手（跳过），需要你手动结束游戏才能统计“目”。</li>
</ul>
<p>其中前两者我都有打包，但是还没有推送到 openSUSE 的 games 源，迫不及待的话可以用我的 <a href="https://build.opensuse.org/project/show?project=home%3AMargueriteSu%3Abranches%3AM17N">home:MargueriteSu:branches:M17N</a> 源里的 RPM。</p>
<p>以下是 Java 的，我不喜欢，但是肯定能用，也还在开发：</p>
<ul>
<li><a href="http://gogui.sourceforge.net/">GoGui</a> 本地客户端，支持 GNUGo。</li>
<li><a href="http://jagoclient.sourceforge.net/">Jago</a>。只能在线上 IGS，没法玩机器人。</li>
</ul>
<p>我是 KDE 所以不是很理 GNOME，似乎 GNOME 可以用这个：</p>
<ul>
<li><a href="http://ccdw.org/~cjj/prog/ccgo/">ccGo</a>。Gtkmm 2.4 写的，最后更新于 2010 年。</li>
</ul>
<h4 id="在线">在线</h4>
<p>以上主要满足的是你打谱和被电脑虐的需求，有些时候新手还是需要和人类进行一些交流的，不然被电脑虐出来的棋风比较诡异。两个在线网站，都需要 Java：</p>
<ul>
<li><a href="http://games.yahoo.co.jp/">日本雅虎</a> 注册方法见<a href="http://forum.ubuntu.org.cn/viewtopic.php?f=34&amp;t=290181">这个帖子</a>，但是日本围棋比我们流行，棋力都很彪悍。</li>
<li><a href="http://www.pandanet-igs.com/communities/gopanda2">Pandanet</a> 熊猫网，最顶级的，什么人都有，欧洲人主要都是些物理学家什么的，逻辑能力特别强，也比较难对付。你可以观战然后下他们的 sgf 自己复盘。</li>
<li><a href="http://www.peepo.com/">Peepo</a> Pachi 引擎的前端网站。</li>
<li><a href="http://www.twgo.net/">天元围棋</a> 这是台湾同胞的围棋网站，可以用 wine 跑起来和他们玩。</li>
<li><a href="http://www.wuzheng.me/">无争</a> 楼下巨巨推荐的在线慢棋网，日本雅虎下的太快了（因为日本人赶时间）。</li>
</ul>
<h4 id="androidipad-客户端">Android/iPad 客户端</h4>
<ul>
<li><a href="http://www.gentgo.be/tetsuki/">Panda-Tetsuki</a>。这个是最好的手机客户端，没有之一。可以上战网也可以自己玩。</li>
<li><a href="https://play.google.com/store/apps/details?id=uk.co.aifactory.gofree&amp;hl=zh_CN">Go Free</a>。显示是核心开发者开发的，除了电脑傻别的什么都很好=。=</li>
<li><a href="http://swiftgo.duapp.com/">飞燕围棋</a>。楼下巨巨推荐的，看了下确实蛮好，可惜桌面客户端是 Java 而且不继续开发了，而且 apk 没有进 Google Play，但是没关系，我们可以把 SGF 棋谱下载回来用 qGo2 打谱。</li>
</ul>
<h4 id="教材">教材</h4>
<p>Google Play 有一个叫“围棋教室”的小软件，用它一晚上就能入门了。比一些围棋书还快。强烈推荐。</p>
<p>电子书一般去 <a href="http://simplecd.me/">SimpleCD</a> 上面找，但是问题就是，因为中国是发源地嘛，中文书一般偏难，能出书的都是九段起步了，书中选的案例也都是九段比赛，而日文书选的案例一般也是棋圣战这样的水平，你根本看不懂。也就是说人家根本没有考虑我们这些小菜的需求。规则都不懂就上大师傅对你们都是煎熬，小学学围棋那种情绪都还记得吧。</p>
<p>我学的时候妈妈推荐我上的这个网站 <a href="http://www.lifein19x19.com/forum/viewforum.php?f=6">Life in 19×19</a>。听名字你就知道是个老外的围棋网站，里面的 instruction 都是面向没有经过五千年文化熏陶的野蛮人的，非常适合二逼青年入门（连英语都学了），当然回头你还是要看一些基础的中文围棋书，不然你连什么是“打”、“提”、“冲”都不知道，平时也没法跟领导下棋是不是？</p>
<p>至于死活题也一样，尽量别用中文的什么段位考试题啊、死活 5000 题啊，那些都太难了，不适用于娱乐需求。去 <a href="http://www.goproblems.com/">Go Problems</a>，这上面的死活题简单，可以娱乐使用。楼下巨巨也推荐了一个 <a href="http://gogameguru.com/">Go Game Guru</a>，特点是网站特别漂亮…</p>
<p>楼下的两位巨巨都推荐用日本棋院的书入门，俺娘说俺太菜不适合，不过还是放出来：</p>
<p><a href="http://www.weiqibar.com/forum.php?mod=forumdisplay&amp;fid=40">围棋吧</a>的电子棋书版块。</p>
<h4 id="精神">精神</h4>
<p>昭和棋圣 · 吴清源的《中的精神》必须看。要领会围棋是一种中和的精神，不争是非，清静无为。所以那些在贴吧秀 GNUGo 的棋力如何弱爆了的下的都是伪棋，厉害点的算个将棋，不厉害的那就把围棋下成兵棋推演了。我们要下王道之棋，娱乐为主。</p>
<h4 id="结">结</h4>
<p>总之本篇算是一个 Linux 下如何入门围棋以及自娱自乐的教程吧。Enjoy！</p>

		
			<a href="https://marguerite.github.io/posts/opensuse_%E4%B8%8B%E7%8E%A9%E5%9B%B4%E6%A3%8B/">Read more...</a>
		
	</div>
</article>

		
		<div>

	<a href="/">Previous Page</a>

2 of 4

	<a href="/page/3/">Next Page</a>

</div>

	</main>
<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/posts/color_emoji_in_opensuse/">Color Emoji in openSUSE</a></li>
				
				<li><a href="/posts/fontconfig_%E5%87%A0%E4%B8%AA%E5%B8%B8%E8%A7%81%E7%9A%84%E5%9D%91/">fontconfig 几个常见的坑</a></li>
				
				<li><a href="/posts/30_%E7%A7%92%E9%92%9F%E5%9C%A8_github_pages_%E4%B8%8A%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA_opensuse_%E9%A3%8E%E6%A0%BC%E7%9A%84%E9%83%A8%E8%90%BD%E6%A0%BC/">30 秒钟在 Github Pages 上搭建一个 openSUSE 风格的部落格</a></li>
				
				<li><a href="/posts/introducing_the_brand_new_nodejs_packaging/">Introducing the brand new nodejs packaging</a></li>
				
				<li><a href="/posts/%E6%9C%AC%E5%91%A8%E5%BC%80%E5%8F%91%E6%9C%AD%E8%AE%B0/">本周开发札记</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p>&copy; 2020 <a href="https://marguerite.github.io">Marguerite Su: Golang/Ruby Programmer, openSUSE Member</a></p>
</footer>

</body>
</html>
