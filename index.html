<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta name="generator" content="Hugo 0.76.5" />
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Marguerite Su: Golang/Ruby Programmer, openSUSE Member</title>
	
	
	<link rel="stylesheet" href="/css/style.css">
	<link rel="alternate" type="application/rss+xml" href="/index.xml" title="Marguerite Su: Golang/Ruby Programmer, openSUSE Member">
</head>
<body>
	<header>
	<a href="https://marguerite.github.io">Marguerite Su: Golang/Ruby Programmer, openSUSE Member</a>
	
</header>

	
	<main>
		
		
			<article>
	<h1><a href="https://marguerite.github.io/posts/color_emoji_in_opensuse/">Color Emoji in openSUSE</a></h1>
	<time>04.11.2020 00:00</time>
	
	<div>
		
		<p>ä¸Šä¸€ç¯‡æ–‡ç« é‡Œæˆ‘ä»¬è®²äº† fontconfig å¸¸è§çš„å‡ ä¸ªå‘ï¼Œä»Šå¤©æˆ‘ä»¬æ¥ç»§ç»­è®²ä¸€è®² openSUSE çš„ Colored Emoji æ”¯æŒã€‚ä¹Ÿå°±æ˜¯å¦‚ä½•é…ç½® Noto Color Emoji è¿™ä¸ªå­—ä½“ç”¨äºç½‘é¡µæ˜¾ç¤ºï¼ˆç”¨äºç»ˆç«¯æ˜¾ç¤ºæ˜¯å¦ä¸€å›äº‹ï¼Œæ¶‰åŠåˆ°æ¯”å¦‚ vte çš„ teminal ä¹‹ç±»çš„ï¼Œæœ‰å‡ ä¸ªç›¸å…³çš„ bug æ¶‰åŠåˆ°æ¯”å¦‚å®½åº¦ä¹‹ç±»çš„ï¼›GTK/Qt æ˜¾ç¤ºåˆæ˜¯å¦ä¸€å›äº‹ï¼Œæ¶‰åŠåˆ° cairoï¼‰ã€‚</p>
<p>ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªå­—ä½“å‘¢ï¼Ÿæˆ‘ä¹Ÿå¾ˆæ— å¥ˆå•Šâ€¦Noto ç³»åˆ—æ˜¯ openSUSE çš„é»˜è®¤å­—ä½“ï¼Œå¯ä»¥è¯´é™¤äº†è‹±æ–‡ locale åˆ«çš„éƒ½æ˜¯ Noto æ¥æ˜¾ç¤ºçš„ï¼ŒNoto Color Emoji è·Ÿå…¶å®ƒ Noto å­—ä½“çš„ metrics å…¼å®¹ã€‚è¿™ä¸€ç‚¹å°±ç§’æ€äº†å…¶å®ƒ Emoji å­—ä½“ã€‚å†è€… Emoji å­—ä½“æœ¬èº«å°±ä¸å¤šï¼Œç›®å‰ä¸ºæ­¢ä¹Ÿå°± 45-generic.conf é‡Œåˆ—å‡ºçš„é‚£ä¹ˆä¸åˆ°åä¸ªï¼ŒEmojiOne Color å› ä¸ºç‰ˆæƒé—®é¢˜ä¸å†å¼€å‘äº†ï¼ŒçœŸæ­£ Linux ä¸Šèƒ½ç”¨çš„ Colored Emoji ä¹Ÿå°±å‰©ä¸‹ä¸€ä¸ª Twitter Color Emoji äº†ã€‚å‰©ä¸‹çš„è¦ä¹ˆä¸“æœ‰çš„è¦ä¹ˆæ²¡æœ‰é¢œè‰²ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥å›å¿†ä¸€ä¸‹ä¹‹å‰çš„è¯´æ³•ï¼š</p>
<p>é™¤äº†æ¯”å¦‚ Unicode Full Emoji List è¿™ç§ä¸“é—¨ç”¨äºæµ‹è¯• emoji æ˜¾ç¤ºçš„ URLï¼Œå¤§éƒ¨åˆ†æˆ‘ä»¬å¸¸è§çš„ç½‘é¡µåœ¨ css é‡Œæ˜¯ä¸å†™ emoji å­—ä½“çš„ã€‚</p>
<p>æ®æˆ‘æ‘¸ç´¢çš„ç»éªŒï¼Œå­—ä½“çš„åŒ¹é…åˆ†ä¸ºä¸‰ç§åœºæ™¯</p>
<p>ç¬¬ä¸€ç§æ˜¯ç›´æ¥å»åŒ¹é…è¿™ä¸ªå­—ä½“ï¼Œfc-match â€œNoto Color Emojiâ€ è¿™æ ·ï¼Œä¹Ÿå°±æ˜¯ css çš„ font-family é‡Œç›´æ¥å†™äº†è¿™ä¸ªå­—ä½“ã€‚</p>
<p>è¿™éƒ¨åˆ†çš„æ”¯æŒå¾ˆç®€å•ï¼Œæ¯”å¦‚å®ƒè¦ Apple Color Emoji æˆ–è€… Segoe UI Emoji æˆ‘æ²¡æœ‰ï¼Œå¯ä»¥å†™ä¸ª aliasï¼š</p>
<pre><code>&lt;alias&gt;
  &lt;family&gt;Apple Color Emoji&lt;/family&gt;
  &lt;accept&gt;&lt;family&gt;Noto Color Emoji&lt;/family&gt;&lt;/accept&gt;
&lt;/alias&gt;
</code></pre>
<p>ç¬¬äºŒç§æ˜¯é€šè¿‡å­—æ—åŒ¹é…ï¼Œfc-match â€œemojiâ€ è¿™æ ·ï¼Œä¼šä»è¿™ä¸ªå­—æ—çš„ pattern é‡Œæ‰¾ï¼ˆemojiï¼Œsymbolï¼Œmathï¼Œfantasy è¿™å››ä¸ªå­—æ—ä¸ sans-serifï¼Œserif å’Œ monospace è¿™ä¸‰ä¸ªä¸»è¦å…³æ³¨çš„å­—æ—è¿˜æœ‰æ‰€ä¸åŒï¼Œå®ƒä»¬çš„ donePattern åé¢è¿˜æœ‰ sans-serif å­—ä½“ï¼Œå› ä¸º 49-sansserif.confï¼‰</p>
<p>è¿™éƒ¨åˆ†çš„æ”¯æŒä¹Ÿå¾ˆç®€å•ï¼Œfontconfig å·²ç»é»˜è®¤æŠŠ emoji å­—ä½“çš„ default family å…¨è®¾ç½®æˆ emoji äº†ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ prefer æ¥å®ç°å‘è¡Œç‰ˆé»˜è®¤çš„ Colored Emoji å­—ä½“å°±è¡Œäº†ï¼Œå¦‚æœé»˜è®¤çš„æ˜¯ Noto Color Emoji é‚£ä¹ˆä»€ä¹ˆéƒ½ä¸ç”¨åšã€‚</p>
<p>ç¬¬ä¸‰ç§æ˜¯å­—ç¬¦çº§åˆ«çš„ï¼ˆglyphï¼‰ï¼Œæ¯”å¦‚ä½ æ‰€æœ‰çš„ sans-serif å­—ä½“é‡Œéƒ½æ²¡æœ‰è¿™ä¸ª unicode codepoint å¯¹åº”çš„ glyphã€‚è¿™ä¸ªæ—¶å€™ pattern match å…¶å®å·²ç»æ²¡ç”¨äº†ï¼Œå› ä¸ºå·²ç» out of range äº†ï¼Œæ‰€æœ‰çš„ sans-serif éƒ½æ²¡æœ‰ï¼Œé‚£ sans-serif çš„ pattern ä¹Ÿå°±æ²¡ç”¨äº†ã€‚å®ƒç”¨çš„æ˜¯ fc-scan åˆ°çš„ unordered listï¼Œä¹Ÿå°±æ˜¯åœ¨ä½ ç³»ç»Ÿé‡Œæ‰¾æœ‰è¿™ä¸ª glyph çš„å­—ä½“æ¥æ˜¾ç¤ºã€‚</p>
<p>ç¬¬ä¸‰ç§åœºæ™¯æ˜¯ä¸ç»å¸¸é‡åˆ°çš„ï¼Œæ˜¯ä¸€ç§æœ€ç»ˆçš„ fallbackã€‚ä½†æ˜¯åœ¨é¢å¯¹ emoji çš„æ—¶å€™ï¼Œå®ƒæ˜¯å‡ºç°æ¬¡æ•°æœ€å¤šçš„åœºæ™¯ã€‚å› ä¸ºç»å¤§éƒ¨åˆ†ç½‘é¡µä¸ä¼šå†™ç‰¹å®šçš„ emoji å­—ä½“ä¹Ÿä¸ä¼šå†™ emoji å­—æ—ã€‚</p>
<p>å…¶å®é’ˆå¯¹ç¬¬ä¸‰ç§åœºæ™¯ï¼Œfontconfig æ˜¯æä¾›äº†è§£å†³æ–¹æ¡ˆçš„ï¼Œå°±æ˜¯æŠŠå­—ä½“ prefer åˆ° pattern çš„å‰é¢ã€‚å¾ˆå¤šç½‘ä¸Šèƒ½å¤Ÿæœç´¢åˆ°çš„æ–¹æ¡ˆä¹Ÿéƒ½æ˜¯è¿™ä¹ˆåšçš„ï¼Œæ¯”å¦‚ EmojiOne Color å’Œç°åœ¨çš„ Twitter Color Emojiã€‚</p>
<p>æ¨å‡ºæˆ‘ä»¬çš„æ–¹æ¡ˆä¹‹å‰ï¼Œå…ˆæ¥è¯´è¯´ç½‘ä¸Šçš„æ–¹æ¡ˆã€‚å¤§éƒ¨åˆ†æ˜¯æŠŠ emoji pattern ç›´æ¥æ‰”åˆ° sans-serifï¼Œserif å’Œ monospace å‰é¢ã€‚äºæ˜¯å¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æœ emoji å­—ä½“ä¸­ä¸åªæ˜¯ emojiï¼Œå°±ä¼šç”¨ emoji å­—ä½“æ˜¾ç¤ºé emoji å†…å®¹ã€‚è¿™é‡Œè¯´çš„ä¸é™äºæ¯”å¦‚ emoji å­—ä½“é‡Œæœ‰ä¸ª Aï¼Œä½ æ‰€æœ‰çš„ A éƒ½è¢«æ›¿æ¢äº†ï¼Œè¿˜åŒ…æ‹¬ä½¿ç”¨ emoji å­—ä½“çš„å­—ç¬¦å®½åº¦æ¥æ˜¾ç¤º fallback å­—ä½“çš„å­—ç¬¦ã€‚æ¯”å¦‚ Noto Color Emoji ä½œä¸º emoji å­—ä½“ï¼Œå­—ç¬¦å®½åº¦ç‰¹åˆ«å¤§ï¼Œé€ æˆäº†ç©ºæ ¼çš„å®½åº¦ä¹Ÿç‰¹åˆ«å¤§ï¼Œåœ¨ chromium ä¸­ï¼Œå³ä½¿å®é™…çš„ç¬”ç”»éƒ½æ˜¯ç”¨ Libration Sans æ˜¾ç¤ºçš„ï¼Œç©ºæ ¼å®½åº¦ä¸æ˜¯ã€‚ä½ å°±çœ‹åˆ°äº†è¶…é•¿ç©ºæ ¼çš„æ•ˆæœã€‚è¿™ä¸ªä¹Ÿè®¸å¯ä»¥é€šè¿‡æŒ‡å®š emoji å­—ä½“çš„å­—å®½ä¸Šé™æ¥è§£å†³ï¼Œä½†æ˜¯ç›®å‰æ²¡æœ‰å‘ç°è°å»è®¤çœŸçš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>emoji å­—ä½“æœ¬æ¥å°±æ˜¯ä½œä¸º Fallback å­—ä½“å­˜åœ¨çš„ï¼Œç†è®ºä¸Šä¸åº”è¯¥ä½œä¸ºç¬¬ä¸€ä¸ªå­—ä½“å‡ºç°ã€‚ä¸ºäº†é¿å…ä¸Šè¿°æƒ…å†µï¼Œç°è¡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯å…ˆæŠŠ emoji æ‰”åˆ°å‰é¢ï¼Œå†æŠŠä¸€ä¸ªå®Œå…¨æ²¡æœ‰ emoji çš„å­—ä½“å†æ‰”åˆ°å‰é¢ã€‚ä½†è¿™ä¹ˆåšçš„åæœå°±æ˜¯ä½ çš„é»˜è®¤è‹±æ–‡å­—ä½“è¢«æ›¿æ¢äº†ã€‚è€Œä¸”åœ¨ CJK ä¸­é—®é¢˜æ›´åŠ ä¸¥é‡ï¼Œæˆ‘ä»¬æœ¬æ¥å°±æ˜¯é€šè¿‡æŠŠ CJK å­—ä½“æ‰”åˆ°å‰é¢ï¼Œå†æŠŠè‹±æ–‡å­—ä½“å†æ‰”åˆ°å‰é¢ï¼ˆæœ‰çš„å‘è¡Œç‰ˆçœç•¥äº†è¿™æ­¥ï¼Œå¯¼è‡´å®é™…ä¸Šæ˜¾ç¤ºè‹±æ–‡çš„ä¸æ˜¯å‘è¡Œç‰ˆé€‰å®šçš„è‹±æ–‡å­—ä½“ï¼Œè€Œæ˜¯é»˜è®¤ CJK å­—ä½“ä¸­è‡ªå¸¦çš„è‹±æ–‡éƒ¨åˆ†ï¼‰æ¥å®ç°ä¸­æ–‡æ˜¾ç¤ºçš„ï¼Œè¿™æ—¶å€™è¦å¤šæ‰”ä¸€ä¸ª emoji å­—ä½“ï¼Œè¿˜è¦å¤šæ‰”ä¸€ä¸ª emojiless çš„è‹±æ–‡å­—ä½“ã€‚æ‰”çš„é¡ºåºå¾ˆé‡è¦ï¼Œå¯¼è‡´å¥½å¤šæŒ‰æ•°å­—æ’åˆ—çš„ fontconfig conf éƒ½è¦é‡æ„ã€‚</p>
<p>æˆ‘è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯ä¸æ˜¯å»ä½¿ç”¨ prefer è¿™ä¸ªä¸¥é‡ä¾èµ–é¡ºåºè€Œä¸”è„†å¼±çš„æ–¹æ¡ˆã€‚æˆ‘çš„æ€è·¯æ˜¯è®©å‡ºç°åœ¨æˆ‘é€‰çš„ Emoji å­—ä½“ä¹‹å‰çš„æ‰€æœ‰å­—ä½“éƒ½æ˜¯ emojiless çš„ã€‚è¿™æ ·å°±ä¸ä¼šç ´åå‘è¡Œç‰ˆé»˜è®¤çš„å­—ä½“ã€‚</p>
<p>æˆ‘ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå°ä¼—çš„æ–¹æ³•ï¼Œå°±æ˜¯åœ¨ scan çš„æ—¶å€™ä»å·²æœ‰å­—ä½“ä¸­å±è”½ç‰¹å®šå­—ç¬¦é›†ï¼ˆcharsetsï¼‰ã€‚è¿™ä¸ªæ–¹æ³•åªæœ‰ä¸€ä¸ª RedHat çš„ <a href="https://bugs.freedesktop.org/show_bug.cgi?id=31969">bug#31969</a> æåˆ°è¿‡ï¼Œä½†æ˜¯ä¹Ÿæ²¡æè¿‡æ€ä¹ˆçœ‹æˆåŠŸæ²¡æˆåŠŸï¼Œæˆ‘æŠŠå®ƒæ‘¸ç´¢æˆç†Ÿäº†ï¼Œä¸‹é¢ç»™å¤§å®¶è®²ä¸€è®²ï¼š</p>
<!-- raw HTML omitted -->
<p>ä»¥ä¸Šå°±æ˜¯æ–¹æ³•ï¼Œcharset æ”¯æŒ int å’Œ rangeã€‚è¿™é‡Œçš„ int ä¸æ˜¯ interger ç±»å‹ï¼Œå®é™…ä¸Šæ˜¯ä¸ª Hex ç±»å‹ 233ï¼Œrange çš„ä¸¤ä¸ªå­—ç¬¦æ˜¯èµ·æ­¢ï¼ˆåŒ…å«èµ·æ­¢ï¼‰ã€‚</p>
<p>ç„¶ååœ¨ FC_DEBUG=4 fc-match â€œNoto Color Emojiâ€ å°±èƒ½çœ‹åˆ°è¿™æ ·çš„ debug è¾“å‡ºï¼š</p>
<pre><code>Add SubSt match
[test]
     pattern any family Equal â€œNoto Color Emojiâ€
[edit]
     Edit family Assign Minus charset;
</code></pre>
<p>ä½†æ˜¯é™¤æ­¤ä¹‹å¤–ä»€ä¹ˆéƒ½æ²¡æœ‰&hellip;äºæ˜¯æˆ‘ä¸€ç›´ä»¥ä¸ºå®ƒæ²¡æœ‰ç”Ÿæ•ˆã€‚å®é™…ä¸Šéœ€è¦è¿™ä¹ˆæµ‹è¯•ï¼š</p>
<p>å…ˆåšä¸€ä¸ª local fonts.conf æŠŠ Noto Color Emoji prepend_firstï¼š</p>
<pre><code>&lt;match&gt;
  &lt;edit name=â€œfamilyâ€ mode=â€œprepend_firstâ€&gt;
    &lt;string&gt;Noto Color Emoji&lt;/string&gt;
  &lt;/edit&gt;
&lt;/match&gt;
</code></pre>
<p>ç„¶åé€šè¿‡ï¼š</p>
<pre><code>FC_DEBUG=4 pango-view -q -t 'ğŸ§€' 2&gt;&amp;1 | grep -o 'family: &quot;[^&quot;]\+' | cut -c 10- | tail -n 1
</code></pre>
<p>æ¥çœ‹ï¼Œæ­£å¸¸è¿™ä¸ª cheese è¡¨æƒ…æ˜¯ Noto Color Emoji æ˜¾ç¤ºçš„ï¼Œä½†æ˜¯å±è”½äº†ä¹‹åå°±ä¸æ˜¯äº†ï¼Œè¯´æ˜å±è”½æˆåŠŸã€‚</p>
<p>(è¯´ç‚¹é¢˜å¤–è¯ï¼Œå¾ˆå¤šäººä¸çŸ¥é“é‚£ä¸ªè¡¨æƒ…æ€ä¹ˆæ‰“ä¸Šå»ï¼Œå¯ä»¥é€šè¿‡ fcitx çš„ unicode è¾“å…¥æ¨¡å¼å®ç°ï¼Œå°±æ˜¯åŒæ—¶æŒ‰ ctrl + alt + shift + space å››é”®ï¼Œç„¶åè¾“å…¥ 0x çš„ unicode codepointï¼Œæœ€åæŒ‰ Alt + æ•°å­—ä¸Šå±ï¼‰</p>
<p>è€Œ RedHat çš„ç»´æŠ¤è€…ä¹Ÿç»™äº†æˆ‘ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆï¼š</p>
<pre><code>fc-list â€œNoto Color Emojiâ€:charset=0x20
</code></pre>
<p>å¦‚æœå­—ä½“æœªå®‰è£…æˆ–å±è”½æˆåŠŸï¼Œå°±æ²¡æœ‰ç»“æœï¼Œä¸ç„¶ä¼šè¿”å›å­—ä½“æ–‡ä»¶å’Œå­—ä½“åç§°ã€‚</p>
<p>æœ‰äº†æ–¹æ³•å‰©ä¸‹å°±æ˜¯æ“ä½œçš„é—®é¢˜äº†ï¼Œä½†æ˜¯æ“ä½œå…¶å®æ¯”æ–¹æ³•æ›´å¤æ‚ã€‚</p>
<p>æˆ‘ä»¬è¦å…ˆç»Ÿä¸€ä¸‹æ¦‚å¿µã€‚fontconfig é‡Œç”¨çš„å«åš charsetï¼ˆå­—ç¬¦é›†ï¼‰ï¼Œè€Œæˆ‘å‰é¢è¯´è¿‡ä¸€ä¸ª unicode codepointã€‚unicode point æ˜¯ä¸€ä¸ªç ç‚¹ï¼Œæ¯”å¦‚ A å­—æ¯ 1 æ•°å­—éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç ç‚¹ï¼Œä½†æ˜¯ä¸æ˜¯æ¯ä¸ªç ç‚¹åœ¨ç°å®ä¸­éƒ½èƒ½æ‰¾åˆ°å¯¹åº”çš„å­—ç¬¦ã€‚å­—ä½“åˆ¶ä½œæ˜¯é’ˆå¯¹ unicode point æ¥çš„ã€‚unicode codepoint çš„è¡¨ç¤ºæ³•åœ¨ fontforge é‡Œå« U+20ï¼Œåœ¨ fontconfig çš„é debug è¾“å‡ºé‡Œå« 20ï¼Œè€Œåœ¨å†™é…ç½®çš„æ—¶å€™åˆè¦ç”¨ 0x20ï¼Œè¿™ä¸‰ä¸ªéƒ½æ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯åœ¨ä¸åŒçš„ç¨‹åºé‡Œå¿…é¡»ç”¨ä¸åŒçš„è¡¨ç¤ºæ³•ã€‚charset å°±æ˜¯ç ç‚¹çš„é›†åˆã€‚</p>
<pre><code>fc-scan â€”format â€œ%{charset}â€ NotoColorEmoji.ttf
</code></pre>
<p>å°±èƒ½å¤Ÿçœ‹åˆ°æŸä¸ªå­—ä½“æœ‰å“ªäº›ç ç‚¹ã€‚</p>
<p>ä½†æ˜¯ Emoji å…¶å®æœ‰ä¸ªç‰¹æ®Šçš„åœ°æ–¹ï¼Œå¯ä»¥çœ‹ emojipedia çš„è¿™ç¯‡æ–‡ç« æ¥äº†è§£ã€‚å°±æ˜¯æœ‰çš„æ—¶å€™æ˜¾ç¤ºå‡ºæ¥çš„æ˜¯ä¸€ä¸ª emojiï¼Œä½†å®é™…ä¸ŠèƒŒåæ˜¯ä¸‰ä¸ªç”šè‡³å››ä¸ªç ç‚¹ç»„æˆçš„ sequenceã€‚æˆ‘ä»¬åœ¨æµ‹è¯• emoji å­—ä½“çš„ coverage çš„æ—¶å€™ï¼Œä¸èƒ½éšä¾¿çš„å–èˆï¼Œå› ä¸ºæŠŠ modifier codepoint ç»™å±è”½äº†ä¼šé€ æˆå¥½å¤š emoji éƒ½æ— æ³•æ˜¾ç¤ºã€‚</p>
<p>æˆ‘å…³äºæ“ä½œæ˜¯è¿™ä¹ˆæ„æ€çš„ï¼Œé¦–å…ˆæˆ‘æŠŠæƒ³è¦ä½¿ç”¨çš„ Emoji å­—ä½“çš„ charset æ‰¾å‡ºæ¥ï¼Œè½¬æˆ unicode codepointsï¼ˆå¦ä¸€ç§æ€è·¯æ˜¯æ‰¾ unicode 11 full emoji list çš„ data fileï¼Œè¿™ä¸ªæ–‡ä»¶èƒ½æ‰¾åˆ°ä½†æ˜¯æˆ‘çœ‹ä¸æ‡‚ï¼Œè€Œä¸”æœ‰é‡å¤å‡ºç°çš„ç ç‚¹è§£æèµ·æ¥è´¹åŠ²ï¼Œæˆ‘å°±ç›´æ¥å»ç½‘ä¸Šçˆ¬æ¼”ç¤ºçš„ htmlï¼Œå†æŠŠ emoji è½¬æˆ unicode pointsï¼Œè¿™ä¸ªæ€è·¯å¯ä»¥çœ‹æˆ‘çš„ analyze-noto-color-emoji.rbï¼‰ï¼Œç„¶åç®€å•å¤„ç†ä¸€ä¸‹ï¼ˆä¸»è¦æ˜¯ Noto Color Emoji è¿˜æœ‰ç©ºæ ¼æ•°å­—å’Œä¸€äº›å¸¸è§ symbolï¼Œæ¯”å¦‚æœ‰äº›åœ¨çº¿æ’­æ”¾å™¨ä¼šç”¨çš„â–¶ï¸ç¬¦å·ï¼Œè¿™ä¸ªç”¨å½©è‰²æ˜¾ç¤ºæ’­æ”¾å™¨æ ·å¼ä¼šå‡ºé—®é¢˜ï¼‰ï¼Œå†æ‹¿ç›®æ ‡å­—ä½“çš„ charset å»å–äº¤é›†ï¼Œè¿™æ ·å¾—åˆ°çš„æ˜¯ä¸¤ä¸ªå­—ä½“é‡Œéƒ½å­˜åœ¨çš„ unicode pointï¼Œè¯´æ˜è¿™ä¸ªå­—ä½“æä¾›äº† emojiï¼Œæœ€ç»ˆæˆ‘å†™å‡ºæ¥äº†test_emoji_coverage.rbã€‚</p>
<p>å‰©ä¸‹å°±æ˜¯å¤§è§„æ¨¡åº”ç”¨äº†ï¼Œæˆ‘å†™äº†ä¸€ä¸ªé’ˆå¯¹æ‰€æœ‰ /usr/share/fonts/truetype æ–‡ä»¶å¤¹ä¸‹çš„å­—ä½“æ–‡ä»¶ï¼Œæ‰«æå‡º emoji éƒ¨åˆ†å¹¶è‡ªåŠ¨ç”Ÿæˆ fontconfig blacklist æ–‡ä»¶çš„ä»£ç generate_81_emoji_blacklist_glyphs.rbã€‚ç›®å‰ fonts-config åŒ…é‡Œæ˜¯æˆ‘ç”¨æˆ‘çš„ openSUSE ç”Ÿæˆçš„ã€‚ä½†æœªæ¥ä¼šæƒ³åŠæ³•ç”¨ perl/go/c ä¹‹ç±»çš„é‡å†™ä¸‹ï¼Œç„¶ååšæˆå®‰è£…åŒ…åè‡ªåŠ¨é’ˆå¯¹ç”¨æˆ·çš„ç³»ç»Ÿç”Ÿæˆå¯¹åº”çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>è‡³æ­¤ï¼Œå‡ºç°åœ¨ Noto Color Emoji å‰çš„å­—ä½“ï¼Œæˆ–è€…è¯´ç³»ç»Ÿä¸­é™¤äº† Noto Color Emoji åˆ«çš„å­—ä½“éƒ½ä¸ä¼šæœ‰ emoji äº†ã€‚ä¸‹é¢æ˜¯æµ‹è¯•ï¼š</p>
<p>æµ‹è¯• emoji å­—ä½“è¦æœ‰ä¸€ä¸ªæµ‹è¯•é¡µé¢ã€‚æˆ‘ä¸»è¦æ˜¯ç”¨ chromium æµè§ˆå™¨æ¥è®¿é—® EmojiOne Color çš„æµ‹è¯•é¡µé¢ï¼Œå› ä¸º Firefox å·²ç»æ†ç»‘äº†è‡ªå·±çš„ Twemoji Mozilla å­—ä½“ï¼Œå®ƒçš„ emoji æ˜¾ç¤ºæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p>
<p>ä¸€è®¿é—®è¿˜æ˜¯ä¸è¡Œï¼Ÿ</p>
<p>åŸæ¥æ˜¯æˆ‘åœ¨ç”Ÿæˆçš„æ—¶å€™æ²¡æœ‰é’ˆå¯¹ Noto Emoji è¿™ä¸ªé»‘ç™½ emoji å­—ä½“ï¼Œè¿™æ˜¯æ­£ç¡®çš„ï¼Œå› ä¸ºæˆ‘è¦ç»™å®ƒä¹Ÿåš blacklistï¼Œå®ƒçš„ charset å°±è¢«æ¸…ç©ºäº†233ï¼Œé‚£æ ·çš„æ•ˆæœç­‰äºä¸è½½å…¥ï¼Œé‚£å°±ç›´æ¥ä¸è½½å…¥å¥½å•¦ï¼š</p>
<!-- raw HTML omitted -->
<p>æ³¨æ„ä¸èƒ½ç”¨ prefer workï¼Œå› ä¸ºä¹‹å‰è¯´è¿‡ç¬¬ä¸‰ç§åŒ¹é…ç±»å‹å®é™…ä¸Šç”¨ä½œåŒ¹é…çš„å­—ä½“ä¸æ˜¯ pattern é‡Œé¢çš„å­—ä½“ï¼Œä½ åœ¨æŠŠå®ƒåŠ å…¥ pattern å‰æ ¹æœ¬æ”¹å˜ä¸äº†å®ƒçš„é¡ºåºã€‚æœªæ¥ä¼šæŠŠè¿™éƒ¨åˆ†ä»£ç ä¹Ÿæ•´åˆåˆ°ç”Ÿæˆå™¨é‡Œé¢å»ï¼Œè¿™æ ·æ¯”å¦‚ä½ æŒ‡å®šä¸€ä¸ª Colored Emoji å­—ä½“ï¼Œä¼šè‡ªåŠ¨å±è”½æ‰€æœ‰å…¶å®ƒ emoji å­—ä½“å’Œé emoji å­—ä½“ä¸­çš„ emoji éƒ¨åˆ†ã€‚</p>

		
			<a href="https://marguerite.github.io/posts/color_emoji_in_opensuse/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/fontconfig_%E5%87%A0%E4%B8%AA%E5%B8%B8%E8%A7%81%E7%9A%84%E5%9D%91/">fontconfig å‡ ä¸ªå¸¸è§çš„å‘</a></h1>
	<time>04.11.2020 00:00</time>
	
	<div>
		
		<p>æœ€è¿‘ Microsoft åŠ å…¥ OINï¼Œè´¡çŒ®äº†å®ƒçš„ 60000+ é¡¹ä¸“åˆ©ï¼Œè¿™ä½¿å¾— openSUSE çš„ freetype2 ç»ˆäºèƒ½å¤Ÿå¼€å¯ ClearType å¼•æ“äº†ã€‚ä¹‹å‰ infinality é¡¹ç›®è´¡çŒ®äº†ä¸‰å¤§å—ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸¤å¤§å—ï¼Œä½†æ˜¯å…¶ä¸­ç¬¬ä¸€å¤§å—çš„ ClearType å¼•æ“æ²¡æœ‰é»˜è®¤å¼€å¯ï¼Œç¬¬ä¸‰å¤§å—çš„éä¸“åˆ©è‰²å½©æ»¤é•œä¹Ÿä¸€ç›´æ²¡æœ‰ã€‚ç°åœ¨ä¸“åˆ©çš„é—®é¢˜æ²¡æœ‰äº†ï¼Œfreetype2 ç»ˆäºæ›´æ–°åˆ°å®Œå…¨ä½“äº†ï¼Œå®ƒç°åœ¨æœ‰ä¸¤ä¸ªå¼•æ“ï¼Œç¬¬ä¸€ä¸ªå¼•æ“æ˜¯ Adobe çš„ CFF å¼•æ“ï¼Œä¸»è¦ç”¨äº Noto Sans CJKï¼Œç¬¬äºŒä¸ªå¼•æ“å°±æ˜¯ infinality è´¡çŒ®çš„ ClearType å¼•æ“äº†ã€‚æ€»ä¹‹éƒ½æ˜¯å¥½ä¸œè¥¿ã€‚</p>
<p>åç«¯æ›´æ–°äº†ï¼Œæˆ‘ä¹Ÿéœ€è¦æ›´æ–° fonts-config æ¥é»˜è®¤è®¾ç½® rgba å’Œ hintstyleã€‚openSUSE çš„ fonts-config æ˜¯ä¸€ç³»åˆ—è·Ÿ fontconfig ä¸€æ ·çš„å­—ä½“é…ç½®æ–‡ä»¶ï¼Œå·²ç»å¾ˆè€äº†ï¼Œäºæ˜¯æˆ‘éœ€è¦ modernize å®ƒä¸€ä¸‹ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘å‡ ä¹çœ‹äº†ç½‘ä¸Šèƒ½å¤Ÿæ‰¾åˆ°çš„å…¨éƒ¨ fontconfig ç›¸å…³æ–‡ç« ã€‚é‡Œé¢å¤§å‘å¥—å°å‘ï¼Œæœ‰å¿…è¦ä¸“é—¨å†™æ–‡æ¥æ¾„æ¸…ä¸€ä¸‹ï¼š</p>
<p>##ç¬¬ä¸€ä¸ªå‘ï¼šä» monospace ä¸­æ¸…é™¤ sans-serif</p>
<p>æ¯”å¦‚ <a href="https://github.com/source-foundry/Hack/issues/408">Hack å­—ä½“çš„å®˜æ–¹é…ç½®</a>ï¼Œè¿˜æœ‰æœ€è‘—åçš„ <a href="https://eev.ee/blog/2015/05/20/i-stared-into-the-fontconfig-and-the-fontconfig-stared-back-at-me/">eevâ€™s rant about fontconfig</a>ï¼Œéƒ½æ¨èäº†è¿™ä¹ˆä¸€ç§åšæ³•ï¼š</p>
<pre><code>&lt;match&gt;
    &lt;test name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;sans-serif&lt;/string&gt;
    &lt;/test&gt;
    &lt;test name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;monospace&lt;/string&gt;
    &lt;/test&gt;
    &lt;edit name=â€œfamilyâ€ mode=â€œdeleteâ€/&gt;
&lt;/match&gt;
</code></pre>
<p>æ„æ€æ˜¯å¦‚æœ pattern æœ‰ sans-serifï¼Œè¿˜æœ‰ monospaceï¼Œå°±æŠŠ sans-serif
åˆ é™¤ã€‚ç›®çš„æ˜¯è®©å­—ä½“åªæœ‰ä¸€ä¸ª generic nameã€‚èµ·å› åœ¨äº /usr/share/fontconfig/conf.avail/49-sansserif.confï¼ˆé’ˆå¯¹æ‰€æœ‰æ²¡æœ‰ sans-serifã€serif å’Œ monospace çš„ pattern åŠ ä¸Š sans-serifï¼‰</p>
<p>ç”šè‡³è¿˜æœ‰è¡ç”Ÿï¼š</p>
<pre><code>&lt;match&gt;
    &lt;test name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;Hack&lt;/string&gt;
    &lt;/test&gt;
    &lt;test name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;sans-serif&lt;/string&gt;
    &lt;/test&gt;
    &lt;edit name=â€œfamilyâ€ mode=â€œdeleteâ€/&gt;
&lt;/match&gt;
</code></pre>
<p>æŠŠ Hack å­—ä½“ä» sans-serif å­—æ—ä¸­åˆ é™¤ï¼ˆå› ä¸º Hack æ˜¯ monospace å­—ä½“ï¼‰</p>
<p>å¬èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆç¾ï¼Ÿè¿™æ ·æˆ‘å°±å¯ä»¥ monospace å­—æ—åªç”¨ monospace å­—ä½“ï¼Œsans-serif å­—æ—åªç”¨ sans-serif å­—ä½“äº†ã€‚</p>
<p>æˆ‘é¢ä¸´çš„ç°å®é—®é¢˜æ˜¯ Noto Color Emoji åœ¨ sans-serif ä¸­ä¼˜å…ˆçº§å¾ˆä½ï¼Œè€Œè¿™ä¸ªå­—ä½“çš„è‹±æ–‡éƒ¨åˆ†ä¼šæŠŠå­—æ¯ä¹‹é—´çš„é—´è·å˜å¾—è¶…å¤§ï¼Œæ‰€ä»¥ä¸èƒ½ prepend_first åˆ° sans-serifï¼ˆç½‘ä¸Šçš„æ•™ç¨‹å…¨éƒ¨éƒ½æ˜¯é”™çš„ï¼Œæˆ–è€…è¯´ä½ ä»¥ä¸º EmojiOne Color å¯ä»¥ Noto Color Emoji å°±å¯ä»¥ï¼Œé‚£æ˜¯ä½ æƒ³å½“ç„¶äº†ï¼‰ã€‚äºæ˜¯æƒ³åˆ°çš„å°±æ˜¯ä¿è¯å‡ºç°åœ¨ Noto Color Emoji ä¹‹å‰çš„å­—ä½“å…¨éƒ¨éƒ½æ²¡æœ‰ emojiï¼Œå…ˆæŠŠ monospaceã€serif ä¹‹ç±»çš„ä» sans-serif ä¸­å»é™¤ï¼Œå¯ä»¥æå¤§çš„å‡å°‘å·¥ä½œé‡ã€‚</p>
<p>ä½†å®é™…å®Œå…¨ä¸æ˜¯è¿™ä¹ˆä¸€å›äº‹ã€‚è¦ç†è§£åŸå› ï¼Œæˆ‘ä»¬éœ€è¦è¡¥ä¹ ä¸€ä¸‹ fontconfig çš„åŸºç¡€çŸ¥è¯†ï¼ˆå½“ç„¶æœ‰äº›äººæ˜¯æ–°å­¦233ï¼‰ï¼š</p>
<p>fontconfig æ˜¯é€šè¿‡ä¸‰ä¸ªæ­¥éª¤æ¥åŒ¹é…åˆ°åˆé€‚çš„å­—ä½“çš„ã€‚ç¬¬ä¸€æ­¥å«åš scanï¼Œå°±æ˜¯æ‰«æç³»ç»Ÿä¸­çš„å­—ä½“æ¥æ„å»ºä¸€ä¸ª listï¼ˆfc-list å¯ä»¥è¿˜åŸè¿™ä¸ªè¿‡ç¨‹ï¼‰ï¼Œè¿™ä¸ª list æ˜¯æ— åºçš„ã€‚ç¬¬äºŒæ­¥å« pattern matchï¼Œå°±æ˜¯é’ˆå¯¹ä½ è¦åŒ¹é…çš„å­—ä½“åç§°æ¯”å¦‚ â€œsans-serifâ€å»è°ƒæ•´ä¸Šé¢çš„ listï¼Œå„ç§ prependã€‚ç¬¬ä¸‰æ­¥å« font matchï¼Œå°±æ˜¯é’ˆå¯¹è°ƒæ•´è¿‡çš„ list å»åº”ç”¨è¯¸å¦‚ hinting antialias ä¹‹ç±»çš„ã€‚</p>
<p>è™½ç„¶ fontconfig çš„é…ç½®æ–‡ä»¶æ˜¯æœ‰æ•°å­—é¡ºåºçš„ï¼Œä½†ä¸Šé¢é‚£ä¸‰ä¸ªè¿‡ç¨‹æ˜¯æ­»çš„ï¼Œæ„æ€æ˜¯å³ä½¿ä½ æŠŠ <!-- raw HTML omitted --> å†™åˆ° 10-<em>.conf é‡Œå»ï¼Œå®ƒä¹Ÿä¸ä¼šåœ¨ 90-</em>.conf çš„ <!-- raw HTML omitted --> ä¹‹å‰æ‰§è¡Œã€‚æ‰€ä»¥å¼€å‘è€…åœ¨ pattern match é˜¶æ®µåªéœ€è¦å…³æ³¨å¯¹åº”çš„ pattern çš„å…ˆåé¡ºåºå°±å¯ä»¥äº†ã€‚</p>
<p>é€šè¿‡ FC_DEBUG=4 fc-match -s monospace æŸ¥çœ‹ï¼ˆæœç´¢ â€œEdit family Delete noneâ€ï¼‰ï¼Œè¿™æ®µæ˜¯æ·»åŠ è§„åˆ™</p>
<pre><code>Add SubSt match 
[test]
         pattern any family Equal â€œsans-serifâ€
         pattern any family Equal â€œmonospaceâ€
[edit]
         Edit family Delete none;
</code></pre>
<p>æ³¨æ„è¿™é‡Œçš„ noneï¼Œä¸è¡¨ç¤ºæ²¡åŒ¹é…åˆ°ã€‚å®ƒè¡¨ç¤ºçš„æ˜¯ <!-- raw HTML omitted --> è¿™ä¸ª edit block é‡Œé¢æ²¡æœ‰ä¸œè¥¿ï¼Œå› ä¸º delete å’Œ delete_all è§„åˆ™å°±æ˜¯è¿™æ ·çš„ã€‚</p>
<p>çœŸæ­£çš„åŒ¹é…é˜¶æ®µæ˜¯ç±»ä¼¼è¿™æ ·çš„ï¼š</p>
<pre><code>FcConfigSubstitute test pattern any family Equal â€œmonoâ€
No match
FcConfigSubstitute test pattern any family Equal â€œsans serifâ€
No match
FcConfigSubstitute test pattern any family Equal â€œsansâ€
Substitute Edit family Assign â€œsans-serifâ€

Append list before â€œsansâ€(s) [marker]
Append list after â€œsansâ€(s) â€œsans-serifâ€(s) 
FcConfigSubstitute editPattern has 3 elts (size 16)
    family: â€œsans-serifâ€(s)
    lang: â€œenâ€(w)
    prgname: â€œfc-matchâ€(s)
</code></pre>
<p>è¿™ä¸ªæ˜¯æ¯”è¾ƒå®Œæ•´çš„è§„åˆ™ï¼Œè¿˜åŸæˆ xml å½¢å¼å°±æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code>&lt;match target=â€œpatternâ€&gt;
    &lt;test qual=â€œanyâ€ name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;mono&lt;/string&gt;
    &lt;/test&gt;
    &lt;test qual=â€œanyâ€ name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;sans serif&lt;/string&gt;
    &lt;/test&gt;
    &lt;test qual=â€œanyâ€ name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;sans&lt;/string&gt;
    &lt;/test&gt;
    &lt;edit name=â€œfamilyâ€ mode=â€œassignâ€&gt;
        &lt;string&gt;sans-serif&lt;/string&gt;
    &lt;/edit&gt;
&lt;/match&gt;
</code></pre>
<p>é€šè¿‡å‡ ä¸ª No match å’Œ editPattern æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œè¿™æ®µå…¶å®åŒ¹é…åˆ°äº†ä¸€ä¸ªå¯¹ sans çš„è¯·æ±‚ï¼Œä½†æŠŠå®ƒå®Œå…¨æ›¿æ¢æˆäº† sans-serifã€‚</p>
<p>ä¸Šé¢çš„æ‡‚äº†ï¼Œå°±å¯ä»¥æ‹”é«˜ä¸€äº›äº†ã€‚Edit Delete çš„åŒ¹é…é˜¶æ®µçš„ Debug ä»£ç æ˜¯ç±»ä¼¼è¿™æ ·çš„ï¼š</p>
<pre><code>&lt;match&gt;
    &lt;test name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;DejaVu Sans&lt;/string&gt;
    &lt;/test&gt;
    &lt;test name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;sans-serif&lt;/string&gt;
    &lt;/test&gt;
    &lt;edit name=â€œfamilyâ€ mode=â€œdeleteâ€/&gt;
&lt;/match&gt;

FcConfigSubstitute test pattern any family Equal â€œmonospaceâ€
No match
FcConfigSubstitute test pattern any family Equal â€œDejaVu Sansâ€
FcConfigSubstitute test pattern any family Equal â€œsans-serifâ€
Substitute Edit family Delete none

FcConfigSubstitute editPattern has 3 elts (size 16)
    family: â€œNoto Sansâ€(w) â€œsans-serifâ€(w)
    lang: â€œenâ€(w)
    prgname: â€œfc-matchâ€(s)
</code></pre>
<p>ç¬¬ä¸€ï¼Œå®ƒä¼šè‡ªä½œä¸»å¼ çš„ç»™ä½ åŠ ä¸€æ®µé’ˆå¯¹ monospace çš„æµ‹è¯•ï¼ˆåŸå› æ²¡æœ‰è¯¦æŸ¥ï¼‰ï¼›ç¬¬äºŒï¼Œå®ƒæ²¡æœ‰å‘Šè¯‰ä½ åˆ é™¤æˆåŠŸäº†æ²¡ã€‚ä½ éœ€è¦å»çœ‹å®ƒå‰é¢ä¸€ä¸ªè§„åˆ™çš„ editPattern æ¥è‡ªå·±æ¯”è¾ƒæ‰çŸ¥é“åˆ é™¤æˆåŠŸäº†æ²¡ã€‚æˆ‘è¿™é‡Œå‰é¢è§„åˆ™çš„ editPattern é‡Œæœ‰ â€œDejaVu Sansâ€ï¼Œä½†è¿™é‡Œçš„ editPattern æ²¡æœ‰äº†ã€‚æ‰€ä»¥æ˜¯æˆåŠŸäº†ã€‚</p>
<p>æ‹”é«˜æˆåŠŸäº†ï¼Œç›´æ¥ä¸Šç‚¼ç‹±æ¨¡å¼ï¼Œå»çœŸå®çš„ FC_DEBUG=4 fc-match -s monospace é‡Œé¢æ‰¾ï¼Œä¼šå‘ç°åªæœ‰æ·»åŠ è§„åˆ™çš„ï¼Œåˆ«çš„ä»€ä¹ˆéƒ½æ²¡æœ‰æ‰¾åˆ°ã€‚è¿™å°±æ˜¯ fontconfig interesting çš„åœ°æ–¹äº†ï¼Œå¦‚æœè§„åˆ™æ²¡æœ‰åº”ç”¨ï¼Œå®ƒä¸ä¼šå‘Šè¯‰ä½ ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä¼šå‘Šè¯‰ä½ å‘€ï¼å†æ¥çœ‹è¿™æ¡è§„åˆ™ï¼š</p>
<pre><code>&lt;match&gt;
    &lt;test name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;sans-serif&lt;/string&gt;
    &lt;/test&gt;
    &lt;test name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;monospace&lt;/string&gt;
    &lt;/test&gt;
    &lt;edit name=â€œfamilyâ€ mode=â€œdeleteâ€/&gt;
&lt;/match&gt;
</code></pre>
<p>å®ƒéœ€è¦æµ‹è¯• pattern çš„ family å­—æ®µä¸­æœ‰ sans-serifï¼Œ<strong>å¹¶ä¸”</strong>æœ‰ monospaceã€‚ä½†å®é™…ä¸ŠæŠŠæ•´ä¸ªåŒ¹é…è¿‡ç¨‹ä»å¤´åˆ°å°¾è¯»è¿‡äº†ä¹‹åï¼Œä¼šå‘ç°è¿™æ ·çš„æ¡ä»¶æ°¸è¿œä¹Ÿä¸ä¼šæ»¡è¶³ã€‚ä¹‹æ‰€ä»¥æœ‰è¿™ä¹ˆä¸€ä¸ªæ— ç”¨çš„æµ‹è¯•ï¼Œæ˜¯å¯¹ 49-sansserif.conf çš„è¯¯è§£é€ æˆçš„ï¼š</p>
<pre><code>&lt;match target=&quot;pattern&quot;&gt;
    &lt;test qual=&quot;all&quot; name=&quot;family&quot; compare=&quot;not_eq&quot;&gt;
        &lt;string&gt;sans-serif&lt;/string&gt;
  &lt;/test&gt;
  &lt;test qual=&quot;all&quot; name=&quot;family&quot; compare=&quot;not_eq&quot;&gt;
    &lt;string&gt;serif&lt;/string&gt;
  &lt;/test&gt;
  &lt;test qual=&quot;all&quot; name=&quot;family&quot; compare=&quot;not_eq&quot;&gt;
    &lt;string&gt;monospace&lt;/string&gt;
  &lt;/test&gt;
  &lt;edit name=&quot;family&quot; mode=&quot;append_last&quot;&gt;
    &lt;string&gt;sans-serif&lt;/string&gt;
  &lt;/edit&gt;
&lt;/match&gt;
</code></pre>
<p>è¿™æ®µè§„åˆ™çš„å®é™…æ„æ€æ˜¯è¯´ï¼Œå¦‚æœå»åŒ¹é…ä¸€ä¸ªå­—ä½“ fc-match -s â€œæˆ‘çç¼–çš„å­—ä½“åâ€ï¼Œè¿™æ—¶ fontconfig ä¸çŸ¥é“â€œæˆ‘çç¼–çš„å­—ä½“åâ€ç©¶ç«Ÿæ˜¯ä»€ä¹ˆå­—æ—ï¼Œç”šè‡³ä¸çŸ¥é“è¿™ä¸ªå­—ä½“åœ¨ç³»ç»Ÿä¸­æœ‰æ²¡æœ‰ï¼Œä¸ºäº†é˜²æ­¢æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œå°±æŠŠ sans-serif æ——æ ‡æ”¾åœ¨æœ€åï¼Œè¿™æ ·åç»­é’ˆå¯¹ sans-serif æ——æ ‡çš„å„ç§ prefer å¾€ list é‡ŒåŠ å­—ä½“ï¼Œæœ€åç”¨çš„æ˜¯ sans-serif çš„ç¬¬ä¸€ä¸ªå­—ä½“æ˜¾ç¤ºã€‚</p>
<p>ä½†æ˜¯å¦‚æœæ˜¯ fc-match -s monospace å‘¢ï¼Ÿä¸å¥½æ„æ€ monospace å·²ç»æœ‰äº†ï¼Œæ°¸è¿œä¹Ÿä¸ä¼šæ·»åŠ  sans-serif æ——æ ‡åˆ°æœ€åã€‚ä¹Ÿå°±æ°¸è¿œä¹Ÿä¸å­˜åœ¨ä¸¤ä¸ªå­—æ—åœ¨ä¸€ä¸ª list é‡Œçš„åœºæ™¯ã€‚</p>
<p>å¥½ï¼Œæ ç²¾æ¥äº†ï¼Œå¦‚æœæˆ‘æ‰‹åŠ¨æŠŠä¸€ä¸ªå­—ä½“æ—¢ alias æˆ sans-serifï¼Œåˆ alias æˆ monospace å‘¢ï¼Ÿé‚£ä¹Ÿæ²¡æœ‰å½±å“ã€‚ä¸‹é¢è¿™ä¸ªè§„åˆ™ï¼š</p>
<pre><code>&lt;alias&gt;
    &lt;family&gt;Georgia&lt;/family&gt;
    &lt;default&gt;
        &lt;family&gt;serif&lt;/family&gt;
    &lt;/default&gt;
&lt;/alias&gt;
</code></pre>
<p>å®é™…ä¸Šç­‰äºï¼š</p>
<pre><code>&lt;match target=â€œpatternâ€&gt;
    &lt;test name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;serif&lt;/string&gt;
    &lt;/test&gt;
    &lt;edit name=â€œfamilyâ€ mode=â€œappend_lastâ€&gt;
        &lt;string&gt;Georgia&lt;/string&gt;
    &lt;/edit&gt;
&lt;/match&gt;
</code></pre>
<p>å°±æ˜¯è¯­æ³•ç³–è€Œå·²ã€‚alias åï¼Œfc-match -s sans-serif/monospace è‚¯å®šéƒ½æœ‰è¿™ä¸ªå­—ä½“ï¼Œä½†ä¹Ÿåªæ˜¯è¿™æ ·äº†ã€‚</p>
<p>æˆ‘æ˜ç™½ä½ ä»¬çš„é€»è¾‘ï¼Œalias æ˜¯æ›¿èº«çš„æ„æ€ï¼Œä¸€ä¸ªå­—ä½“å³æ˜¯ sans-serif çš„æ›¿èº«ï¼Œåˆæ˜¯ monospace çš„æ›¿èº«ï¼Œé‚£ä¹ˆåŒ¹é…è¿™ä¸ªå­—ä½“ï¼Œlist é‡Œé¢å¿…ç„¶åˆæœ‰ sans-serif åˆæœ‰ monospaceã€‚</p>
<p>ä½†è¿™ä¸ªé€»è¾‘æ˜¯å®Œå…¨æ²¡æœ‰é“ç†çš„ã€‚ç»å¤§å¤šæ•°äººéƒ½æœ‰è¿™æ ·çš„è¯¯åŒºï¼š</p>
<p>è®¤ä¸º sans-serif å­—æ—åƒ family ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªå­åˆ—è¡¨ï¼ŒåŒ¹é… sans-serif ç­‰äºåŒ¹é…äº†æ•´ä¸ªå­—æ—çš„æ‰€æœ‰å­—ä½“ã€‚append sans-serif ç­‰äºæŠŠæ‰€æœ‰çš„ sans-serif å­—ä½“æ”¾åœ¨åé¢ã€‚è¿™å®é™…ä¸Šæ˜¯æŠŠ sans-serif/serif/monospace çœ‹æˆäº†å­—ä½“çš„ä¸€ä¸ª bool å±æ€§ï¼ŒæŠŠç°å®ä¸­å¯¹ sans-serif å­—ä½“çš„ç†è§£ä»£å…¥åˆ° fontconfig é‡Œé¢æ¥äº†ã€‚</p>
<p>æˆ‘å¾ˆæ—©å°±è¯´è¿‡ï¼Œæ²¡æœ‰åä¸º sans-serif çš„å­—ä½“ã€‚åœ¨ fontconfig ä¸­ï¼Œsans-serif åªæ˜¯ä¸€ä¸ªé”šç‚¹ã€‚è¿™ä¸ªé”šç‚¹è·Ÿ DejaVu Sans æˆ– Noto Sans è¿™äº›çœŸå®å­—ä½“çš„åœ°ä½æ˜¯ç›¸åŒï¼Œå”¯ä¸€çš„ä¸åŒå°±æ˜¯ç°å®ä¸­æ²¡æœ‰åä¸º sans-serif çš„å­—ä½“ï¼Œå› æ­¤æ°¸è¿œä¹ŸåŒ¹é…ä¸åˆ°ï¼Œæ‰€ä»¥æ‰éœ€è¦å„ç§ append/prepend workï¼Œä¿è¯åœ¨åŒ¹é… sans-serif é”šç‚¹çš„æ—¶å€™ family åˆ—è¡¨çš„ sans-serif ä¹‹å‰æˆ–ä¹‹åæœ‰åˆ«çš„å­—ä½“ï¼Œå³ä½¿ family åˆ—è¡¨ä¸­çš„ sans-serif æ°¸è¿œä¸ä¼šåŒ¹é…åˆ°ï¼Œä¹Ÿæ€»æœ‰å­—ä½“ä¼šåŒ¹é…åˆ°ã€‚ä½ ä»¬è®¤ä¸ºçš„è¿‡ç¨‹æ˜¯ç±»ä¼¼è¿™æ ·çš„ï¼š</p>
<pre><code>family: DemoFont
hintstyle: 1
lang: en
arbitrary_attributeA: sans-serif
arbitrary_attributeB: monospace
</code></pre>
<p>ç„¶ååŒ¹é… sans-serif æ˜¯å»æ‰€æœ‰å­—ä½“ä¸­æ‰¾å±æ€§ã€‚ä½†çœŸå®çš„è¿‡ç¨‹ä¸­ family åˆ—è¡¨çš„å¢é•¿æ˜¯ç±»ä¼¼è¿™æ ·çš„ï¼š</p>
<pre><code>family: sans-serif
family: Noto Sans, sans-serif
family: Noto Sans, sans-serif, DejaVu Sans
lang: en
hintstyle: 1
</code></pre>
<p>æœ€åç¨‹åºæ‹¿ç€è¿™ä¸ª family åˆ—è¡¨è¦æ±‚ sans-serifï¼Œç¬¬ä¸€ä¸ª Noto Sans æ²¡å®‰è£…ï¼Œç¬¬äºŒä¸ªæ°¸è¿œæ²¡æœ‰ï¼Œäºæ˜¯å°±ç”¨ç¬¬ä¸‰ä¸ª DejaVu Sansã€‚æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œæ— è®ºæ˜¯ prepend/append è¿˜æ˜¯ aliasï¼Œéƒ½æ˜¯é’ˆå¯¹ä¸€ä¸ªå¯¹è±¡å»è°ƒæ•´å®ƒä¹‹å‰ä¹‹åçš„å­—ä½“ã€‚è¿™æ‰æ˜¯ pattern match çš„æ„æ€ã€‚è€Œä½ ä»¬è®¤ä¸ºçš„å…¶å®æ˜¯åœ¨ç¬¬äºŒé˜¶æ®µ font match ä¹Ÿå°±æ˜¯ <!-- raw HTML omitted --> é˜¶æ®µå‘ç”Ÿçš„äº‹æƒ…ï¼Œä½†è¿™ä¸ªé˜¶æ®µçš„ pattern æ˜¯å·²ç»å›ºå®šçš„ã€‚</p>
<p>å¦‚æœæŠŠä¸€ä¸ªå­—ä½“æ—¢ alias åˆ° monospace åˆ alias åˆ° sans-serifï¼Œé‚£ä¹ˆå…¶å®æ˜¯ä¸¤ä¸ªå¯¹è±¡ï¼Œsans-serif å’Œ monospaceã€‚ä½†å¦‚æœå¯¹è±¡æœ¬èº«å°±æ²¡åœ¨ family åˆ—è¡¨ä¸­ï¼Œé’ˆå¯¹å®ƒçš„ match å°±ä¸ä¼šåº”ç”¨ã€‚æ‰€ä»¥ä½ å»åŒ¹é… monospace çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code>family: monospace
family: monospace, DejaVu Sans Mono
</code></pre>
<p>å‰é¢è¯´è¿‡äº†ï¼Œæœ‰ monospace ä¸ä¼šè‡ªåŠ¨åŠ  sans-serifã€‚sans-serif å¯¹è±¡éƒ½æ²¡æœ‰ï¼Œé’ˆå¯¹å®ƒçš„è°ƒæ•´è‚¯å®šä¹Ÿä¸ä¼šåº”ç”¨ã€‚è€Œä½  fc-match -s â€œDejaVu Sans Monoâ€ å‘¢ï¼Ÿ</p>
<p>ä¼šè¢«å½“ä½œ sans-serif å¤„ç†ã€‚family åˆ—è¡¨çš„å¢é•¿æ˜¯è¿™æ ·ï¼š</p>
<pre><code>family: DejaVu Sans Mono
family: DejaVu Sans Mono, sans-serif
family: DejaVu Sans Mono, Noto Sans, sans-serif
</code></pre>
<p>è¿™é‡Œæ ¹æœ¬æ²¡æœ‰ monospace å‡ºç°ã€‚å› ä¸ºä½ çš„ alias çš„ä½œç”¨å¯¹è±¡æ˜¯ monospace è€Œä¸æ˜¯ DejaVu Sans Monoã€‚</p>
<p>æ‰€ä»¥é™¤éä½ æ‰‹åŠ¨çš„æŠŠ sans-serif append åˆ° monospace åé¢ï¼Œå¦åˆ™ä¸ä¼šå‡ºç°ä¸¤ä¸ªè™šæ‹Ÿå­—ä½“åœ¨ä¸€ä¸ª family åˆ—è¡¨çš„æƒ…å†µã€‚</p>
<p>è¿™é‡Œå†æ¾„æ¸…ä¸€ç‚¹ï¼š</p>
<p>å³ä½¿ä½ èƒ½å¤ŸæŠŠ sans-serif append åˆ° monospace åé¢ï¼Œä½  append çš„ä¹Ÿåªæ˜¯ sans-serif è¿™ä¸ªè™šæ‹Ÿå­—ä½“æœ¬èº«ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„ sans-serif å­—ä½“ã€‚å› ä¸ºè¿™äº›å·²çŸ¥çš„å­—ä½“æ˜¯é€šè¿‡åˆ«çš„ append/prepend åŠ åˆ° sans-serif å‰åçš„ã€‚ä½†æ˜¯ pattern match æ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œä½ çš„ sans-serif append çš„æ™šäº†ï¼Œåˆ«çš„ match å·²ç»å®Œäº‹äº†ï¼Œä½ ä¹Ÿå°±åªèƒ½ append ä¸€ä¸ªè™šæ‹Ÿå­—ä½“ã€‚å› æ­¤ fontconfig çš„å‡ºå‚é…ç½®åœ¨ append sans-serif æ—¶æ‰ä¼šå°½é‡åœ¨ pattern match çš„æœ€å‰é¢åšã€‚</p>
<p>å¥½ï¼Œæ ç²¾åˆæ¥äº†ï¼ŒHack å­—ä½“çš„é…ç½®æ€»ä¸ä¼šé”™äº†å§ï¼Ÿå¦‚æœæ—¢æœ‰ Hack åˆæœ‰ sans-serif å°±æŠŠ Hack åˆ äº†ã€‚å®é™…ä¸Šä¹Ÿå®Œå…¨ä¸æ˜¯è¿™å›äº‹ã€‚æˆ‘ä»¬ç”¨ DejaVu Sans åšä¸ªæµ‹è¯•ï¼š</p>
<pre><code>$ fc-match -a sans-serif
â€œDejaVu Sansâ€ â€œBookâ€
â€œDejaVu Math TeX Gyreâ€
...
</code></pre>
<p>åº”ç”¨äº†ä¸Šé¢çš„é‚£ä¸ª conf ä¹‹åç»“æœæ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code> $ fc-match -a sans-serif
 â€œDejaVu Math TeX Gyreâ€
 â€œDejaVu Sansâ€ â€œBookâ€
 ...
</code></pre>
<p>å’¦ï¼ŸDejaVu Sans æ€ä¹ˆè¿˜æœ‰ï¼Ÿæ›´ interesting çš„æ˜¯ï¼š</p>
<pre><code>$ fc-match -a â€œDejaVu Sansâ€
â€œDejaVu Sansâ€ â€œBookâ€
...
</code></pre>
<p>è¿™æ—¶å°±éœ€è¦å»ç†è§£æˆ‘è¯´çš„ä¸‰ä¸ªé˜¶æ®µäº†ã€‚è¦çŸ¥é“ï¼Œpattern æ°¸ä¸ä¼šè½åœ¨è™šå¤„ã€‚fontconfig çš„ pattern é‡Œé¢å­˜åœ¨äº†å¤ªå¤šä¸ä¸€å®šå­˜åœ¨çš„å­—ä½“åç§°ï¼Œæ¯”å¦‚ sans-serif è‡ªå·±å°±æ˜¯ã€‚å¦‚æœç›´æ¥è¿”å› patternï¼Œå°±å­˜åœ¨æ•´ä¸ª family åˆ—è¡¨ä¸­çš„å­—ä½“éƒ½æ²¡æœ‰å®‰è£…åœ¨ä½ çš„ç”µè„‘ä¸Šçš„åœºæ™¯ã€‚</p>
<p>é‚£ä¹ˆ fontconfig æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿæˆ‘æ²¡æœ‰è¯¦ç»†çœ‹è¿‡æºä»£ç ï¼Œä½†åˆç†çŒœæµ‹æ˜¯è¿™æ ·ï¼š</p>
<p>åœ¨ scan é˜¶æ®µæŠŠæŒ‡å®šæ–‡ä»¶å¤¹çš„å…¨éƒ¨å­—ä½“éƒ½æ‰«ææˆä¸€ä¸ªæ— åºåˆ—è¡¨ã€‚åœ¨ pattern å’Œ font é˜¶æ®µå¤„ç† pattern å’Œå­—ä½“æ¸²æŸ“å±æ€§ã€‚åœ¨æœ€ç»ˆåŒ¹é…é˜¶æ®µï¼ŒæŠŠ pattern åº”ç”¨åˆ°æ— åºåˆ—è¡¨ã€‚æ ¹æ® pattern é‡Œçš„é¡¹ï¼Œå¦‚æœæ— åºåˆ—è¡¨ä¸­æ²¡æœ‰ï¼Œæ²¡å®‰è£…çš„å­—ä½“å°± drop æ‰ï¼Œå¦‚æœæœ‰ï¼Œå°±æ ¹æ® pattern è°ƒæ•´ä½ç½®ï¼Œå¾—åˆ°å¾®è°ƒè¿‡çš„æ— åºåˆ—è¡¨ï¼Œè€Œæœ€ç»ˆé¡ºåºæ˜¯æ ¹æ®ç®—æ³•ï¼ˆfamily lang style ç­‰æœ‰ä¸åŒçš„æƒé‡ï¼‰åŒ¹é…æ‰€éœ€å­—ä½“å±æ€§å’Œåˆ—è¡¨å­—ä½“æä¾›çš„å±æ€§ï¼Œå†è°ƒæ•´å¾®è°ƒè¿‡çš„æ— åºåˆ—è¡¨è¾“å‡ºã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœæ˜¯ pattern ä¸­æ²¡æœ‰çš„å­—ä½“å‘¢ï¼Ÿåªè¦æ— åºåˆ—è¡¨ä¸­æœ‰ï¼Œä¸€æ ·å‚ä¸è¿ç®—ï¼Œæœ€ç»ˆç»“æœä¹Ÿæœ‰ã€‚</p>
<p>è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆ fc-match -a sans-serif æ—¶è¿˜æœ‰ DejaVu Sans äº†ã€‚è™½ç„¶è§„åˆ™ç”Ÿæ•ˆäº†ï¼Œä» pattern ä¸­åˆ æ‰äº†ï¼Œä½†æ˜¯ä»»ä½•é scan é˜¶æ®µçš„è§„åˆ™éƒ½æ— æ³•æ”¹å˜æ‰«æé˜¶æ®µç”Ÿæˆçš„æ— åºåˆ—è¡¨ã€‚äºæ˜¯å®ƒåˆç»§ç»­å‡ºç°äº†ã€‚</p>
<p>è€Œç›´æ¥ fc-match -a â€œDejaVu Sansâ€ å®ƒä¼šå‡ºç°åœ¨ç¬¬ä¸€ä¸ªçš„åŸå› ä¹Ÿä¸€æ ·ï¼Œå®ƒè‡ªèº«å‚ä¸äº†è¿ç®—ï¼Œé‚£ä¹ˆè‡ªå·±è‚¯å®šæ˜¯æœ€åŒ¹é…è‡ªå·±çš„ã€‚</p>
<p>æ‰€ä»¥æ— è®ºæ€ä¹ˆè°ƒæ•´ï¼Œåªèƒ½è°ƒæ•´æ’åºã€‚å¦‚æœä¸æƒ³è¦æŸä¸ªå­—ä½“ï¼Œè¦ä¹ˆç›´æ¥åˆ æ‰ï¼Œè¦ä¹ˆåœ¨æ‰«æé˜¶æ®µé€šè¿‡ï¼š</p>
<pre><code>&lt;match target=â€œscanâ€&gt;
    &lt;selectfont&gt;
        &lt;rejectfont&gt;
            &lt;patlet name=â€œfamilyâ€&gt;
                &lt;string&gt;DejaVu Sans&lt;/string&gt;
            &lt;/patlet&gt;
        &lt;/rejectfont&gt;
    &lt;/selectfont&gt;
&lt;/match&gt;
</code></pre>
<p>æ¥åšã€‚</p>
<p>##ç¬¬äºŒä¸ªå‘ï¼šç¦ç”¨ Mozilla Firefox è‡ªå¸¦çš„ Twemoji Mozilla è¿™ä¸ª emoji å­—ä½“</p>
<p>Firefox è‡ªå·±æ†ç»‘äº†ä¸€ä¸ª emoji å­—ä½“ï¼Œå¹¶ä¸”åœ¨æºä»£ç é‡Œé¢æŠŠå®ƒä½œä¸ºé»˜è®¤çš„ emoji å­—ä½“ã€‚è€Œ Linux ä¸Šé¢çš„ emoji å­—ä½“å¤§éƒ¨åˆ†æ˜¯ Noto Color Emojiã€‚ä¸ºäº†ç»Ÿä¸€é£æ ¼ï¼Œæˆ‘æƒ³è¦è®© firefox åŒ¹é…å­—ä½“æ—¶ä¸åŒ¹é…å®ƒï¼š</p>
<pre><code>&lt;match&gt;
    &lt;test name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;Twemoji Mozilla&lt;/string&gt;
    &lt;/test&gt;
    &lt;test name=â€œprgnameâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;Firefox&lt;/string&gt;
    &lt;/test&gt;
    &lt;edit name=â€œfamilyâ€ mode=â€œdeleteâ€/&gt;
&lt;/match&gt;
</code></pre>
<p>çœ‹ä¼¼å®Œç¾ï¼Œä½†å®é™…ä¸Šä¸èƒ½ç”¨ï¼Œé“ç†è·Ÿä¸Šé¢è®²çš„ä¸€æ ·ã€‚å› ä¸ºç°åœ¨ç½‘é¡µå­—ä½“åœ¨ css é‡Œä¸ä¼šåœ¨æœ€å‰é¢æŒ‡å®š emoji å­—ä½“ï¼š</p>
<pre><code>font-family: â€œemojiâ€, â€œsans-serifâ€;
</code></pre>
<p>åšçš„å·®çš„ç›´æ¥å°±æ˜¯ sans-serifï¼Œåšçš„å¥½çš„ç”¨çš„ä¹Ÿéƒ½æ˜¯çœŸæ­£çš„ emoji å­—ä½“åï¼Œæ¯”å¦‚ï¼š</p>
<pre><code>font-family: â€œApple Color Emojiâ€, â€œsans-serifâ€;
</code></pre>
<p>ä¸»è¦æ˜¯ fontconfig çš„ emoji æ ‡å‡†ï¼ˆlang=â€œund-zsyeâ€ å’Œ â€œemojiâ€ è¿™ä¸ª generic nameï¼‰å®šæ™šäº†ã€‚</p>
<p>é’ˆå¯¹ Apple Color Emojiï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ alias æ¥æŠŠ Noto Color Emoji append åˆ°åé¢ï¼Œè¿™æ ·åŸè£…å­—ä½“æ²¡æœ‰å°±ä¼šç”¨æˆ‘ä»¬çš„æé¬¼å­—ä½“ã€‚ä½†æ˜¯ç»å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬çš„ emoji å…¶å®æ˜¯åœ¨è·Ÿ sans-serif åœ¨äº‰ã€‚</p>
<p>æ ¹æ®æˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ªå‘é‡Œé¢è®²çš„åŸç†ï¼Œå³ä½¿æŠŠ Twemoji Mozilla ä» pattern é‡Œé¢åˆ äº†ä¹Ÿæ²¡ç”¨ï¼Œå®ƒè¿˜æ˜¯ä¼šå‡ºç°åœ¨ sans-serif ä¸­ã€‚æ‰€ä»¥è¦ä¹ˆæŠŠå®ƒæ•´ä¸ª reject æ‰ï¼Œè¦ä¹ˆæŠŠ Noto Color Emoji æ‰”åˆ°å®ƒçš„å‰é¢ï¼š</p>
<pre><code>&lt;match&gt;
    &lt;test name=â€œfamilyâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;Twemoji Mozilla&lt;/string&gt;
    &lt;/test&gt;
    &lt;test name=â€œprgnameâ€ compare=â€œeqâ€&gt;
        &lt;string&gt;firefox&lt;/string&gt;
    &lt;/test&gt;
    &lt;edit name=â€œfamilyâ€ mode=â€œprependâ€&gt;
        &lt;string&gt;Noto Color Emoji&lt;/string&gt;
    &lt;/edit&gt;
&lt;/match&gt;
</code></pre>
<p>è¿™æ ·çš„ block å¯ä»¥æœ‰å¤šä¸ªï¼Œæœ€ç»ˆä¿è¯æ— è®ºå®ƒè¦å“ªä¸€ç§ emoji å­—ä½“ï¼Œä¸ç®¡å®‰è£…æ²¡å®‰è£…ï¼Œç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„å­—ä½“éƒ½åªä¼šæ˜¯ Noto Color Emojiã€‚</p>
<p>æœªå®Œå¾…ç»­ã€‚</p>

		
			<a href="https://marguerite.github.io/posts/fontconfig_%E5%87%A0%E4%B8%AA%E5%B8%B8%E8%A7%81%E7%9A%84%E5%9D%91/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/30_%E7%A7%92%E9%92%9F%E5%9C%A8_github_pages_%E4%B8%8A%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA_opensuse_%E9%A3%8E%E6%A0%BC%E7%9A%84%E9%83%A8%E8%90%BD%E6%A0%BC/">30 ç§’é’Ÿåœ¨ Github Pages ä¸Šæ­å»ºä¸€ä¸ª openSUSE é£æ ¼çš„éƒ¨è½æ ¼</a></h1>
	<time>31.12.2016 00:00</time>
	
	<div>
		
		<p>ä¹‹å‰çš„ Ghost ç®¡ç†å¯†ç ä¸¢äº† :-(</p>
<p>æ˜¨æ™šèŠ±äº†ä¸€ä¸ªæ™šä¸Šçš„æ—¶é—´æŠŠä¹‹å‰ä¸¢å¤±çš„éƒ¨è½æ ¼æ–‡ç« é€šè¿‡ web.archives.org æ‰¾å›åˆ°äº† 2011 å¹´ã€‚09~10 å¹´çš„éƒ¨è½æ ¼æ–‡ç« ç­‰æƒ³æ€€æ—§çš„æ—¶å€™å†ç»§ç»­æ‰¾ã€‚ä¸‹ä¸€æ­¥åº”è¯¥ç ”ç©¶çš„æ˜¯æ€ä¹ˆæ¢å¤å’Œæ•´åˆè¯„è®ºã€‚
ä¸è¿‡è¿™ä¸ªå‘å°±ä¸ä¸€å®šå“ªå¤©æ¥å¡«å•¦ã€‚</p>
<p>è€ƒè™‘åˆ°æˆ‘åšå®¢æ›´æ–°çš„é€Ÿåº¦å’Œè®¿é—®é‡ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯ä¸è¦æŠŠå®ƒæ”¾åœ¨è®ºå›æœåŠ¡å™¨ä¸Šäº†ã€‚æ¯•ç«Ÿ Ghost æ˜¯ç”¨ nodejs çš„ï¼Œä¸€ç›´è·‘ç€å¤ªå èµ„æºï¼›æ¬æœåŠ¡å™¨å°±è¦è¿ç§»ï¼Œæˆ‘è¿™ç§æ‡’äººï¼Œè¿å®Œè®ºå›å°±ä¸ç®¡çš„ï¼Œ
åšå®¢è¦ä¹ˆä¸¢æ–‡ç« è¦ä¹ˆä¸¢è¯„è®ºã€‚è¿˜æ˜¯ç”¨ github æ¥åšåšå®¢å¥½äº†ã€‚</p>
<p>Github Pages æ˜¯ç”± Jekyll é©±åŠ¨çš„é™æ€åšå®¢ï¼Œä½¿ç”¨ Markdown æ¥å†™æ–‡ç« ï¼Œç”¨ git ç®¡ç†ï¼Œè¿™å‡ ä¸ªå¯¹æˆ‘æ¥è¯´éƒ½ä¸æ˜¯å¾ˆéš¾ï¼Œæ¯•ç«Ÿæˆ‘æ˜¯ä¸€ä¸ª Ruby ç¨‹åºçŒ¿ã€‚Github è‡ªå·±çš„æ–‡æ¡£åŸºæœ¬æ— ç”¨ï¼Œå› ä¸ºæ–‡æ¡£è·Ÿç”¨æˆ·ä¹‹é—´å°‘äº†ç‚¹ä¸œè¥¿ã€‚
å®ƒåªå‘Šè¯‰äº†æˆ‘ Github Page å…¶å®å°±æ˜¯ä¸€ä¸ªé™æ€ç½‘é¡µç”Ÿæˆå™¨åŠ  HTTP æœåŠ¡å™¨ï¼Œä½ å–‚ Markdown æ ¼å¼çš„æ–‡ç« ç»™å®ƒï¼Œå®ƒåœ¨ yourname.github.io ä¸Šæ˜¾ç¤ºå‡ºæ¥ã€‚è¿™ç”¨æ¥å»ºç«‹ä¸€ä¸ªå•é¡µé¢æ˜¯è¶³å¤Ÿçš„ã€‚
ä½†æ˜¯å®ƒå¹¶æ²¡æœ‰è¯´ä½ æƒ³åšä¸€ä¸ªåšå®¢åº”è¯¥æ€ä¹ˆåŠã€‚å› ä¸ºå…¶å®é‚£æ˜¯ Jekyll è¿™ä¸ªé™æ€ç½‘é¡µç”Ÿæˆå™¨çš„äº‹æƒ…ã€‚ä½ éœ€è¦ç»™å®ƒå†™æ¨¡æ¿ã€‚</p>
<p>æ‰€ä»¥æˆ‘å‚è€ƒäº† Smashing Magazine ä¸Šé¢çš„ <a href="https://www.smashingmagazine.com/2014/08/build-blog-jekyll-github-pages/">Build A Blog With Jekyll And Github Pages</a>ï¼Œæ‰¾äº†ä¸€ä¸ªç°æˆçš„ Jekyll Now æ¨¡æ¿ã€‚è‡ªå·±ç®€å•æ”¹äº†ä¸‹ã€‚é£æ ¼å‚è€ƒäº† <a href="https://groverchou.com/blog">Grover Chou</a> çš„éƒ¨è½æ ¼ã€‚æˆ‘è§‰å¾—ä»–é‚£ä¸ª openSUSE Leap é£æ ¼çš„ä¸»é¢˜å¾ˆå¥½çœ‹ï¼Œäºæ˜¯å°±æŠ„è¿‡æ¥äº†ã€‚é…è‰²å’Œæ ·å¼æ˜¯æŠ„çš„æˆ‘ä»¬ openSUSE ä¸­æ–‡è®ºå›ã€‚ç‚¹æˆ‘<a href="https://marguerite.github.io/fulltest/">é¢„è§ˆ</a>ã€‚</p>
<p>è¦æ˜¯æœ‰æƒ³è¦ç”¨æˆ‘è¿™å¥—ä¸»é¢˜å»ºåšå®¢çš„ï¼Œå»ºç«‹è¿‡ç¨‹å¾ˆç®€å•ï¼š</p>
<ol>
<li>å» github ä¸Šé¢ fork æˆ‘çš„ marguerite.github.ioï¼Œç„¶åç‚¹ Settingsï¼ŒæŠŠä»“åº“åæ”¹æˆ <code>yourname.github.io</code>ã€‚</li>
<li><code>git clone</code> ä½ çš„ fork åˆ°æœ¬åœ°ï¼Œç¼–è¾‘ä¸€ä¸‹ _config.ymlï¼ŒæŠŠæˆ‘çš„ä¿¡æ¯éƒ½æ”¹æˆä½ çš„ã€‚</li>
<li>æŠŠ _posts ä¸‹é¢æˆ‘çš„æ–‡ç« åˆ æ‰ï¼Œç”¨ Markdown å†™ä½ è‡ªå·±çš„ï¼Œæ ¼å¼æ˜¯ YYYY-MM-DD-TITLE.mdã€‚æ”¯æŒä¸­æ–‡æ ‡é¢˜ã€‚</li>
</ol>
<p>å®Œæˆè¿™ä¸‰æ­¥ï¼Œåªéœ€ 30 ç§’ï¼Œä½ å°±æœ‰äº†ä¸€ä¸ª openSUSE ä¸­æ–‡è®ºå›é£æ ¼çš„ä¸ªäººåšå®¢å•¦ã€‚</p>
<p>ä¸‹é¢æ˜¯è¿›é˜¶å†…å®¹ã€‚</p>
<h4 id="è‡ªå·±æ”¹-jekyll-æ¨¡æ¿">è‡ªå·±æ”¹ Jekyll æ¨¡æ¿</h4>
<p>åŸºæœ¬çš„ HTML/CSS çŸ¥è¯†å‡è®¾ä½ å·²ç»äº†è§£äº†ï¼Œé™æ€ç½‘é¡µä¸æ¶‰åŠ Javascriptã€‚</p>
<p>å‡è®¾ä½ æœ‰ Firefox å’Œå®ƒçš„ FireBug æ’ä»¶ã€‚å°±æ˜¯åœ¨ç½‘é¡µä¸Šå³é”®èƒ½æŸ¥çœ‹ HTML å…ƒç´ å’Œå®ƒä»¬çš„ CSS çš„ã€‚</p>
<p>CSS åœ¨ style.scss å’Œ &ldquo;_sass&rdquo; æ–‡ä»¶å¤¹ã€‚æŠŠç½‘ç«™å†™çš„æ¼‚äº®æ˜¯ä½ è‡ªå·±çš„äº‹æƒ…ã€‚W3School ä¸Šæœ‰å…¨éƒ¨ CSS å…ƒç´ çš„èµ„æ–™å¯æŸ¥ã€‚æ”¹è¿‡ wordpress çš„éƒ½ä¼šçš„ã€‚</p>
<p>æ¨¡æ¿ä¸»è¦åœ¨ &ldquo;_layouts&rdquo; å’Œ &ldquo;_includes&rdquo; æ–‡ä»¶å¤¹é‡Œé¢ï¼Œå°±æ˜¯ HTML å¸¦äº†ä¸€äº› LIQUID è¯­è¨€çš„å˜é‡ã€‚çœ‹äº†å°±ä¼šã€‚</p>
<p>å¦‚æœä½ æƒ³å®ç°è‡ªå·±çš„æƒ³æ³•çš„è¯ï¼Œä¸‹é¢è¿™ä¸ªé¡µé¢ä¼šæœ‰ç”¨ï¼š</p>
<p><a href="https://jekyllrb.com/docs/variables/">https://jekyllrb.com/docs/variables/</a></p>
<h4 id="æœ¬åœ°å¼€å‘-jekyllè°ƒè¯•">æœ¬åœ°å¼€å‘ Jekyllï¼ˆè°ƒè¯•ï¼‰</h4>
<p>ä½  99.99% æ˜¯ä¸ä¼šé‡åˆ°è¿™ç§æƒ…å†µçš„ã€‚å³ä½¿ä½ è‡ªå·±æ”¹æ¨¡æ¿ï¼Œä½ ä¹Ÿå¯ä»¥ <code>git commit</code> ç„¶å <code>git push</code> ç›´æ¥è®¿é—®ç½‘é¡µçœ‹æ•ˆæœçš„ã€‚
ä¸€èˆ¬é”™è¯¯æ¯”å¦‚ CSS å‡ºé”™å¯¼è‡´çš„æ¸²æŸ“ä¸äº†ï¼ŒGithub ä¼šå‘é‚®ä»¶ç»™ä½ ï¼Œå‘Šè¯‰ä½ é”™è¯¯åœ¨å“ªå„¿ã€‚</p>
<p><em><strong>åªæœ‰ä½ çš„ Markdown å†™é”™äº†</strong></em>ï¼ŒGithub æ‰æ²¡æ³•ç»™å‡ºé”™è¯¯æç¤ºã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€èˆ¬è‡ªå·±çœ‹ä¸‹æ–‡ç« å°±çŸ¥é“é”™è¯¯åœ¨å“ªå„¿äº†ã€‚
åªæœ‰æˆ‘è¿™ç§ä¸€æ¬¡æ€§å¯¼å…¥æ¯”è¾ƒå¤šï¼Œä¸çŸ¥é“ç©¶ç«Ÿæ˜¯å“ªç¯‡æ–‡ç« å‡ºé”™äº†æ‰éœ€è¦æœ¬åœ°è°ƒè¯•çš„ã€‚</p>
<h6 id="å®‰è£…-rvm">å®‰è£… rvm</h6>
<p>å› ä¸º openSUSE ä¸‹é¢çš„ Ruby æ˜¯ç³»ç»Ÿ Rubyï¼Œæ™®é€šç”¨æˆ·ç›´æ¥ <code>gem install</code> ä¼šå‘Šè¯‰ä½ æƒé™é”™è¯¯ï¼Œæ— æ³•å†™å…¥æ–‡ä»¶å¤¹
/usr/lib64/ruby/gemã€‚è¿˜æœ‰å°±æ˜¯ä¸ºäº†é¿å…æŠŠç³»ç»Ÿçš„ Ruby ç¯å¢ƒæä¹±å¥—ï¼Œæ¯•ç«Ÿ YaST ä¹Ÿç”¨ Ruby çš„ã€‚</p>
<pre><code>gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3
\curl -sSL https://get.rvm.io | bash
</code></pre>
<p>è¿è¡Œè¿™ä¸¤æ¡å‘½ä»¤å°±æŠŠ rvm è£…å¥½äº†ï¼Œä¸‹é¢æ˜¯ <a href="https://rvm.io/integration">https://rvm.io/integration</a> é‡Œè¯´çš„é‚£æ ·ï¼ŒæŠŠ Konsole çš„é…ç½®æ–¹æ¡ˆé‡Œçš„ <code>/usr/bin/bash</code> å˜æˆ <code>/usr/bin/bash --login</code>ã€‚å†é‡æ–°æ‰“å¼€ Konsole å°±èƒ½ç”¨ rvm çš„ Ruby äº†ã€‚</p>
<h6 id="å®‰è£…-ruby-23">å®‰è£… Ruby 2.3</h6>
<pre><code>rvm install 2.3
</code></pre>
<h6 id="å®‰è£…-github-pages-gem">å®‰è£… github-pages gem</h6>
<p>è¿™é‡Œæœ‰ä¸€ä¸ª bugã€‚github-pages ä¾èµ– nokogiriï¼Œnokogiri ä½¿ç”¨è‡ªå¸¦çš„é™æ€çš„ libxml2.a å’Œ libxslt.a ç¼–è¯‘çš„æ—¶å€™ï¼Œåœ¨ 64 ä½ç³»ç»Ÿä¸Šï¼Œåä¸¤è€…çš„
å®‰è£…æ–‡ä»¶å¤¹æ˜¯ xxxx/usr/lib64ï¼Œä½†æ˜¯ nokogiri åªèƒ½è®¤å‡º xxxx/usr/libï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚æ‰€ä»¥æˆ‘ä»¬è¦å…ˆè£… nokogiri å¹¶ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ libxml2 å’Œ
libxslt æ¥ç¼–è¯‘ã€‚</p>
<pre><code>sudo zypper in libxml2-devel libxslt-devel
gem install nokogiri
</code></pre>
<p>æ¥ç€å†</p>
<pre><code>gem install github-pages
</code></pre>
<p>å°±æ²¡ä»€ä¹ˆé—®é¢˜äº†ã€‚github-pages ä¼šè‡ªåŠ¨å¸¦å‡ºæ¥ jekyllã€‚</p>
<h6 id="æŠŠä½ çš„ä»“åº“åšä¸€ä»½æ‹·è´">æŠŠä½ çš„ä»“åº“åšä¸€ä»½æ‹·è´</h6>
<p>å› ä¸ºæˆ‘ä»¬è¦åœ¨æœ¬åœ°ç”¨ jekyll å»æ¸²æŸ“ä½ çš„ä»“åº“ï¼Œè‚¯å®šä¼šå¤šä¸€äº›ä½ ä¸æƒ³ä¼ åˆ° github ä¸Šå»çš„ä¸­é—´æ–‡ä»¶çš„ã€‚</p>
<pre><code>cp yourname.github.io local
cd local
</code></pre>
<h6 id="ç¼–è¯‘æ–‡ç« å¹¶è°ƒè¯•">ç¼–è¯‘æ–‡ç« å¹¶è°ƒè¯•</h6>
<p>æ¥ä¸‹æ¥ç”¨ jekyll å»ç¼–è¯‘æ–‡ç« </p>
<pre><code>jekyll build --trace
</code></pre>
<p>è¿™æ—¶å¦‚æœä½ çš„æ–‡ç« æœ‰ä»€ä¹ˆé—®é¢˜çš„ï¼Œä¼šæŠ¥é”™ã€‚ä½†æ˜¯é”™è¯¯ä¸æ˜æ˜¾ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦æ”¹ gem çš„ä»£ç æ¥å®ç°äº†ã€‚æ¯”å¦‚ï¼š</p>
<pre><code>Conversion error: Jekyll::Converters::Markdown encountered an error while converting '_posts/2013-3-17-openshift-æ­å»ºå’Œ-IRC-é¢‘é“äº’é€šçš„-Gtalk-ç¾¤èŠ.md':                                                                                                  
                #&lt;Class:0x000000018376c8&gt;::AmbiguousGuess
/home/zhou/.rvm/gems/ruby-2.3.3/gems/rouge-1.11.1/lib/rouge/lexer.rb:153:in `guess': Ambiguous guess: can't decide between [&quot;html&quot;, &quot;shell&quot;]
</code></pre>
<p>å…‰è¿™ä¹ˆçœ‹ï¼Œä½ åªèƒ½çŸ¥é“æ˜¯å“ªç¯‡æ–‡ç« å‡ºçš„é”™ï¼Œä½†ä½ ä¸çŸ¥é“æ˜¯åœ¨å“ªé‡Œã€‚ä½†æ˜¯ä¸‹é¢å·²ç»å‘Šè¯‰ä½ æ˜¯ lexer.rb è¿™ä¸ªæ–‡ä»¶å‡ºé”™çš„ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹åŠ¨å®ƒæ¥å¤šè¾“å‡ºä¸€äº›ä¿¡æ¯ã€‚</p>
<p>ruby ä¸‹é¢è¾“å‡ºä¸œè¥¿éå¸¸ç®€å•ï¼Œ<code>p æŸä¸ªå˜é‡</code> å³å¯ã€‚è¿™å°±æ˜¯åŸç†ã€‚</p>
<pre><code>cd /home/zhou/.rvm/gems/ruby-2.3.3/gems/rouge-1.11.1/lib/rouge/
vi lexer.rb
</code></pre>
<p>lexer.rb å¯¹åº”çš„è¡Œæ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code>def guess(info={})
    lexers = guesses(info)
    
    return xxx if xxx
    return yyy if yyy
    
    raise AmbiguousGuess.new(lexers)
end
</code></pre>
<p>è¿™æ˜¯åœ¨å®šä¹‰ä¸€ä¸ª Ruby å‡½æ•°ï¼Œå› ä¸ºå®ƒå‡ºé”™äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦çœ‹æ­£å¸¸æƒ…å†µçš„ <code>return</code>ï¼Œåªéœ€è¦çœ‹ä¸æ­£å¸¸æƒ…å†µçš„ <code>raise</code>ã€‚</p>
<p>çœ‹åˆ° AmbiguousGuess æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—çš„è¾“å…¥æ˜¯ lexersï¼Œå¯ä»¥çŒœåˆ°å®ƒæ˜¯æ¥å— lexers è¿”å›å¯¹åº”çš„é”™è¯¯ï¼Œé‡ç‚¹è¿˜æ˜¯åœ¨ lexersã€‚</p>
<p>è€Œ lexers çš„å®šä¹‰åœ¨ä¸Šé¢ï¼Œ<code>lexers = guesses(info)</code>ã€‚çœ‹åˆ° guesses æ˜¯å¦ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å— infoï¼Œå¤„ç†è¿‡è¿”å› lexersã€‚é‚£æˆ‘ä»¬å°±çŒœè¯´ info å¯èƒ½å°±æ˜¯æ–‡æœ¬ã€‚</p>
<p>äºæ˜¯ï¼š</p>
<pre><code>def guess(info={})
    p info
    lexers = guesses(info)
</code></pre>
<p>ä¿å­˜ï¼Œå†è¿è¡Œä¸€é <code>jekyll build --trace</code>ï¼Œè¿™å›çš„å‡ºé”™ä¿¡æ¯æ›´å…·ä½“äº†ã€‚ç›´æ¥æŠŠå‡ºé”™çš„å†…å®¹éƒ½è¾“å‡ºäº†ã€‚å¯¹åº”æ”¹å°±å¥½ã€‚</p>
<p>å¦å¤–å¦‚æœä½ æ˜¯æƒ³åœ¨æœ¬åœ°æ”¹ CSS è€Œä¸æ˜¯å»æ‰¾ç¼–è¯‘é”™è¯¯çš„è¯ï¼Œç”¨ <code>jekyll serve</code> ç„¶åè®¿é—® 127.0.0.1:4000 å³å¯ã€‚</p>

		
			<a href="https://marguerite.github.io/posts/30_%E7%A7%92%E9%92%9F%E5%9C%A8_github_pages_%E4%B8%8A%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA_opensuse_%E9%A3%8E%E6%A0%BC%E7%9A%84%E9%83%A8%E8%90%BD%E6%A0%BC/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/introducing_the_brand_new_nodejs_packaging/">Introducing the brand new nodejs packaging</a></h1>
	<time>23.01.2016 00:00</time>
	
	<div>
		
		<p>There has been no activities for nodejs in openSUSE for a while. (Since 13.2) But it doesn&rsquo;t mean it&rsquo;s dead. It&rsquo;s actually evolving.</p>
<p>Today the brand-new <a href="https://github.com/marguerite/nodejs-packaging">nodejs-packaging</a> answers all the questions.</p>
<p>For a long time and traditionally we openSUSE prefer to keep consistence with Fedora in RPM packaging (Although small differences still present). So did nodejs packaging. We used the nodejs-packaging tool from Fedora to package for openSUSE before. But it introduced lots of troubles:</p>
<p>The old nodejs-packaging analyzes package.json on module basis. That is, every module is a package, just like things we do for Perl, Python and Ruby. But wait, how many nodejs modules exist? 2 millions. And how many modules that a nodejs application may depend on? For npm, it&rsquo;s 200+; for jshint, it&rsquo;s 200+; for gulp, it&rsquo;s 95. No need to mention the much more complicated ones like atom editor, jangouts, or yakyak.</p>
<p>We used to have 400+ packages in devel:languages:nodejs, while providing only 2 outdated applications (azure and npm). Because it was a nightmare for maintenance. Take npm as example:</p>
<p>It updates almost every week. There&rsquo;s no way for the maintainer (me, sad) to know what are the new dependencies (nodejs-packaging didn&rsquo;t provide such a feature: you only know the next step, but you can&rsquo;t see the whole map due to the tree hierarchy of dependencies); There&rsquo;s no way for the maintainer to know what are the updated dependencies; and there&rsquo;s no way for the maintainer to know what dependencies are removed in advance too.</p>
<p>It means you have to just start packaging the new npm and examine all the growing 200+ dependencies on the fly. But you have just one week time in total.</p>
<p>Even if someone would made an automatic packaging tool (actually no one implemented that although we had some discussions before), there&rsquo;re still two difficulties ahead:</p>
<p>You can&rsquo;t just let the packages lay in devel:languages:nodejs, you should submit it to Factory. Well, 200+ submit requests per week with almost the same nodejs- names are just too hard for reviewing.</p>
<p>nodejs has a mechanism that allows modules to place the dependencies they need to local node_modules directories. The initial aim was to give developers the freedom and possibility not to follow upstream so tight and focus on their own development. But it leads to the fact that most of the modules actually depend on older versions of other modules.</p>
<p>And, the &ldquo;older versions&rdquo; may different. that is, module A may requires 1.0.0 version of module C, while module B relies on 2.0.0 version of module C, and the latest version of module C is actually 4.0.0.</p>
<p>So you have to maintain 1.x/2.x/4.x versions of module C. in RPM, a package can only provide one version. then funny things happened: nan-0_8,nan-1_0&hellip;while considering such case is too common because nodejs upstream officially supports so, the poor multiver feature of the old nodejs-packaging is not enough.</p>
<p>There must be a change.</p>
<p>In my reimplementation of nodejs-packaging, I used bundled packaging on application basis:</p>
<p>If you want to package jslint for example, you just need to package jslint. No need to worry about all its dependencies (200+). They will be bundled into the main package under node_modules directory.</p>
<p>Someone may worry about the duplicate of bundled dependencies across applications. Actually the waste of disk spaces is so small: the standalone gulp takes 95kb while the bundled one takes 495kb. You&rsquo;ll have to write 200~300kb of specfiles for the dependencies if packaged separately. And 400kb is not a liability for modern hard disks I think.</p>
<p>Bundles can be used as RPM dependency too. that is, gulp can rely on gulp-util package. Both of them are bundles.</p>
<p>Dependencies (Provides/Requires) are automatically handled. eg, inner dependencies for gulp-util will not be applied on gulp.</p>
<p>In the future, I may analyze the <!-- raw HTML omitted -->.json generated and cherry-pick the most common modules into another &ldquo;big&rdquo; package to further reduce the waste of spaces.</p>
<h4 id="how-to-package-for-nodejs-application-now">How to package for nodejs application now?</h4>
<p>Firstly, break the application into logically reasonable pieces (bundles). eg, I want to package dependencies for our search page for better deployment:</p>
<pre><code>gulp
gulp-concat
gulp-less
gulp-rename
gulp-uglify
</code></pre>
<p>In the old times, we have to package hundreds of modules. Now we just need to package those five (actually it&rsquo;s 6, because all those stuff need gulp-util).</p>
<p>Second, osc mkpac gulp-util &amp;&amp; cd gulp-util. Then run npkg gulp-util (with nodejs-packaging installed on your machine), it will generate</p>
<pre><code>gulp-util.json
gulp-util.license
gulp-util.source
</code></pre>
<p>(gulp-util.json is the file used by packaging macros to bundle stuff correctly; gulp-util.license contains the collected licenses of all things in the bundle; gulp-util.source is the formatted text for Source tags in RPM specfile)</p>
<p>and download all the tarballs of dependencies plus the main gulp-util tarball inside current directory.</p>
<p>Third, <code>cp -r /usr/share/npkg/template ./gulp-util.spec</code>. Fill the blanks, osc add the sources and submit.</p>
<p>Everything is okay now. You can consider yourself just packaged 200+ packages in one shoot.
How to use bundles as RPM dependencies?</p>
<p>Just write <code>Requires: npm(gulp-util) = 3.0.7</code> in specfile and run <code>npkg gulp gulp:3.0.7</code>.</p>
<p>In the foreseeable future, devel:languages:nodejs will be active again. More applications will be added soon. And the nodejs packaging policy on our wiki will be discussed and updated too.</p>
<p>If you run into any abnormal situation eg, extra dependencies are detected (a self-fulfilled bundle should not rely on outside dependencies unless told so), usually it&rsquo;s a bug that should be looked into by me. Feel free to report on github.</p>
<p>PS: The new nodejs-packaging is fully compatible with the old one, you can still package in the old way. Most of the times you won&rsquo;t be aware of the changes. But personally I think the further you walk in the wrong direction, the more
painful it will be.</p>

		
			<a href="https://marguerite.github.io/posts/introducing_the_brand_new_nodejs_packaging/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/%E6%9C%AC%E5%91%A8%E5%BC%80%E5%8F%91%E6%9C%AD%E8%AE%B0/">æœ¬å‘¨å¼€å‘æœ­è®°</a></h1>
	<time>23.01.2016 00:00</time>
	
	<div>
		
		<p>ç›˜ç‚¹ä¸€ä¸‹æœ¬å‘¨è‡ªå·±åœ¨ openSUSE ä¸Šé¢åšçš„å·¥ä½œï¼š</p>
<h4 id="è§£å†³äº†-wine-çš„-desktop-file-é•¿æœŸä»¥æ¥ä½äºæœªçŸ¥ç±»åˆ«çš„-bug">è§£å†³äº† wine çš„ desktop file é•¿æœŸä»¥æ¥ä½äºæœªçŸ¥ç±»åˆ«çš„ bug</h4>
<p>openSUSE çš„ wine ä» Ubuntu æŠ„æ¥äº†ä¸€äº› desktop filesã€‚è€Œè¿™äº›æ–‡ä»¶çš„ Categories éƒ½æ˜¯é”™çš„ï¼ˆCategories=Wine;Emulator;Documentation;ï¼‰ã€‚æ ¹æ® freedesktop çš„ <a href="http://standards.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html">desktop entry specification</a> è§„å®šï¼ŒEmulator; åªèƒ½è·Ÿåœ¨ Games; æˆ–è€… System; åé¢ä½¿ç”¨ï¼Œæ‰€ä»¥æ˜¯é”™çš„ï¼Œè€Œ Wine; æœ¬èº«ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„ Desktop Category; Documentation; åˆä¸ç¬¦åˆã€‚ç»Ÿä¸€è°ƒæ•´åˆ°äº† System;Emulator; ç±»åˆ«ï¼Œè€Œä¸€äº›å¯ä»¥ç‹¬ç«‹ä½¿ç”¨çš„æ¯”å¦‚ notepad åˆ™è§†åŒåŸç”Ÿ App è°ƒæ•´åˆ°äº†å¯¹åº”çš„æ¯”å¦‚ Utility;Texteditor; ç±»åˆ«ã€‚</p>
<h4 id="å¯¹-devellanguagesnodejs-æºè¿›è¡Œäº†-big-cleanup">å¯¹ devel:languages:nodejs æºè¿›è¡Œäº† big cleanup</h4>
<p>ä¸»è¦æ˜¯ä¸ºäº†æˆ‘é©¬ä¸Šè¦å¼€å‘çš„ nodejs-packaging åšå‡†å¤‡ã€‚npm ç”±ç‹¬ç«‹æ‰“åŒ…å›å½’åˆ°äº†ä¸ nodejs ä¸€åŒæ‰“åŒ…ï¼Œè€Œæˆ‘å¼€å‘çš„ nodejs-packaging åˆå‡†å¤‡ä½¿ç”¨ bundled packaging çš„æ¨¡å¼ï¼Œé‚£ä¹ˆç‹¬ç«‹æ‰“åŒ… npm æ—¶çš„ä¸€äº›ä¾èµ–åŒ…å°±ä¸å†éœ€è¦äº†ã€‚è¿™äº›ä¾èµ–å¾ˆæ—©å°±è¢«æˆ‘ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆç®€å•çš„ shell script å’Œ rubyï¼‰ä» openSUSE:Factory æ‰¹é‡åˆ é™¤äº†ï¼Œç°åœ¨ d:l:nodejs æºé‡Œè¿˜æœ‰ä¸€äº› broken çŠ¶æ€çš„å°¸ä½“ã€‚ç”¨è‡ªåŠ¨åŒ–è„šæœ¬æ‰¹é‡ revoke äº†ä¸€äº› factory-auto-submit å¯¼è‡´çš„è¢« rejected çš„ SRï¼Œç„¶åè·‘è„šæœ¬ wipebinaries ä»æœåŠ¡å™¨åˆ é™¤ RPMï¼Œä»æœåŠ¡å™¨ remote delete æ‰ã€‚</p>
<h4 id="å¯¹-golang-packaging-åšäº†ä¸‰æ¬¡-bugfix-release">å¯¹ golang-packaging åšäº†ä¸‰æ¬¡ bugfix release</h4>
<p>å®ƒæ€»æ˜¯ä¼š filter æ‰å«æœ‰ test,example å­—æ ·çš„ç¼–è¯‘ç»“æœ (ç±»ä¼¼ test.aï¼Œæ²¡ç”¨)ï¼Œä½†æ˜¯é’ˆå¯¹ importpath é‡Œæœ‰è¿™ç§å­—æ ·çš„ï¼ˆæ¯”å¦‚ github.com/stretchr/testifyï¼‰è¦è¿›è¡Œè·³è¿‡ï¼Œä¸ç„¶å®ƒå°±ä»€ä¹ˆ Provides/Requires ä¹ŸæŠ“ä¸å‡ºæ¥äº†ã€‚ä¹‹å‰ä»…é’ˆå¯¹ importpath æœ¬èº«ä½œäº†åˆ¤æ–­ï¼Œå®é™…ä¸Š buildroot é‡Œä¹Ÿä¼šæœ‰ï¼Œå› ä¸ºåŒ…åæ˜¯ golang-github-stretchr-testify è¿™ç§ï¼ŒåŠ ä¸Šäº†å¯¹ buildroot çš„åˆ¤æ–­ã€‚</p>
<p>è¿˜ä¿®å¤äº† golang.attr é‡Œé¢å†™é”™ prefix çš„é—®é¢˜ã€‚</p>
<h4 id="ä¿®äº†-tw-ç¼–è¯‘å¤±è´¥çš„-libtunepimp">ä¿®äº† TW ç¼–è¯‘å¤±è´¥çš„ libtunepimp</h4>
<p>è¿™ä¸ªå€¼å¾—ä¸€æçš„æ˜¯å¤±è´¥çš„åŸå› ï¼š</p>
<p>æœ‰äº› autotools å·¥ç¨‹å–œæ¬¢ç”¨ expr æ¥æ¯”è¾ƒç‰ˆæœ¬å·ï¼Œè¿™å®é™…ä¸Šæ˜¯éå¸¸é”™è¯¯çš„ã€‚å› ä¸ºåœ¨ expr ä¸‹é¢ 1.10 æ˜¯å°äº 1.4 çš„ã€‚æ­£ç¡®çš„æ¯”è¾ƒæ–¹æ³•æ˜¯ä½¿ç”¨ bcï¼š</p>
<pre><code>echo &quot;$TAGLIB_VERSION &gt;= 1.4&quot; | /usr/bin/bc -l
</code></pre>
<p>è¿˜å€¼å¾—ä¸€æçš„å°±æ˜¯åœ¨ .m4 æ–‡ä»¶é‡Œï¼Œä½ æ˜¯ç”¨ä¸äº† [ å’Œ ] çš„ï¼Œå› ä¸ºé‚£æ˜¯ä¿ç•™çš„ï¼Œæ­£ç¡®çš„å†™æ³•æ˜¯ @&lt;:@ å’Œ @:&gt;@ã€‚</p>
<h4 id="å¯¹-leap-æ¨é€äº†-nodejs-æ›´æ–°">å¯¹ Leap æ¨é€äº† nodejs æ›´æ–°</h4>
<p>ä¹‹å‰æ¨çš„æ›´æ–°åˆæŠŠ nodejs-npm é‡å‘½åå› npm äº†ã€‚å› ä¸ºç‹¬ç«‹æ‰“åŒ…çš„ npm åœ¨ Tumbleweed å’Œ devel:languages:nodejs é‡Œå·²ç»ç§»é™¤äº†ï¼ˆä¹‹å‰åœ¨ released product é‡Œä¸€ç›´ä¹Ÿéƒ½æ²¡å­˜åœ¨è¿‡ï¼‰ï¼Œå‘½åç©ºé—´åˆå¯ç”¨äº†ã€‚ä½†æ˜¯äº§ç”Ÿäº†ä¸€ä¸ªå°é—®é¢˜ï¼Œä¼šå¯¼è‡´è€çš„ nodejs-npm å¸è½½ä¸æ‰ï¼Œå¿…é¡»æ‰‹åŠ¨å¸è½½ç„¶åå®‰è£… npmã€‚</p>
<h4 id="æ›´æ–°äº†-texlive-2015">æ›´æ–°äº† TexLive 2015</h4>
<p>å…¶å®ç¼–è¯‘å·²ç»å®Œå…¨é€šè¿‡äº†ï¼Œä½†æˆ‘æ”¾å¼ƒäº†ã€‚</p>
<p>å› ä¸ºæˆ‘ç¼–è¯‘å®Œå‘ç°ä¼šäº§ç”Ÿä¸€äº›è«åå¥‡å¦™çš„ release numbersï¼Œè€Œåœ¨ version æ ‡ç­¾é‡Œé¢çš„ svn version numbers æˆ‘åˆä¸çŸ¥é“æ€ä¹ˆæ¥çš„ã€‚</p>
<p>åœ¨ opensuse-packaging åˆ—è¡¨ä¸Šé¢é—®æ‰å‘ç°ï¼ŒopenSUE ä¸‹é¢çš„ texlive å·¥ç¨‹æ˜¯è‡ªåŠ¨ç¼–è¯‘çš„ï¼Œç”± Publishing:Texlive Meta è¿™ä¸ªè½¯ä»¶åŒ…é‡Œçš„è„šæœ¬æ§åˆ¶ï¼Œæˆ‘ä»¬ç”šè‡³æ‰“åŒ…äº†æ•´ä¸ª ctan&hellip;é‚£æˆ‘çš„ç¡¬ç›˜ä¸å¤Ÿè·‘çš„ï¼ŒWerner å·²ç»æœ‰äº†ï¼Œæˆ‘å°±æ²¡å¿…è¦å¹²ç ´åè‡ªåŠ¨åŒ–çš„äº‹æƒ…äº†ã€‚</p>
<h4 id="æ›´æ–°äº†ä¸€äº›è½¯ä»¶åŒ…">æ›´æ–°äº†ä¸€äº›è½¯ä»¶åŒ…</h4>
<p>Cutegramï¼ŒWeCaseï¼Œdoubanfm-qt5ã€‚</p>
<p>æŠŠæ–‡æ³‰é©¿å¾®ç±³é»‘æ›´æ–°åˆ°æœ€æ–°çš„ nightly build ç‰ˆæœ¬ï¼ˆwenq.org è®ºå›é‡Œçš„é‚£ä¸ª NB å…¶å®æˆ¿æ•™æˆä¸€ç›´ä¸å®šæœŸçš„è·‘ï¼‰ã€‚</p>
<p>æŠŠä¸€äº›å¤±æ•ˆçš„ä¸­æ–‡é¡¹ç›®æ¯”å¦‚ lwqqï¼Œopenfetion è¿›è¡Œäº†ç¦ç”¨ç¼–è¯‘ã€ä¿ç•™è½¯ä»¶åŒ…å·¥ç¨‹çš„æ“ä½œã€‚</p>
<p>åœ¨ home:MargueriteSu é‡Œæ‰“åŒ…äº† shadowsocks-go</p>
<p>åœ¨ home:opensuse_zh:infinality æ‰“åŒ…äº†æœ€æ–°çš„æ‰“è¿‡ infinality è¡¥ä¸çš„ cairo, freetype2, fontconfigã€‚</p>
<p>å¸®åŠ© syncthing çš„æ‰“åŒ…è€…ä¿®å¤äº†ç¼–è¯‘ï¼ˆgo åº”ç”¨ï¼‰</p>
<p>æŠŠ toxcore, qtox æäº¤åˆ°äº† server:messaging æºï¼Œç­‰é€šè¿‡åè®© qtox è¿›å…¥ Tumbleweed</p>
<h4 id="æ–°æ‰“åŒ…">æ–°æ‰“åŒ…</h4>
<p>basket5ï¼Œbasket ç¬”è®°çš„ KF5 ç§»æ¤ï¼ŒåŠŸèƒ½éƒ½ä¿ç•™ç€ï¼Œéå¸¸å¥½ç”¨ã€‚</p>
<p>sadlen çš„ marknoto/markpadoã€‚å‰è€…æ˜¯ä¸€ä¸ªç¬”è®°åº”ç”¨ï¼Œåè€…æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ KDE 5 ä¸‹é¢çš„ Markdown ç¼–è¾‘å™¨ï¼ŒåŸºäº katepartã€‚æˆ‘æœ¬äººéƒ½åœ¨ç”¨ã€‚</p>
<h4 id="todo">TODO</h4>
<p>æœ¬å‘¨æœ«ä¸»è¦çš„ä»»åŠ¡å°±æ˜¯æŠŠ Fedora çš„ nodejs-packaging çš„åŸç†ææ˜ç™½ï¼Œç”¨ Ruby port åˆ° openSUSEï¼Œå¹¶æ”¯æŒæˆ‘ä»¬çš„ bundled packaging æ¨¡å¼ã€‚</p>
<p>æ¥ä¸‹æ¥åœ¨æœ¬åœ°æ­å»ºä¸€ä¸ª discourse æœåŠ¡å™¨çœ‹ä¸‹å†…å­˜å ç”¨ï¼Œæ¯•ç«Ÿ @phoenixlzx ç°åœ¨æ˜¯æ ¹æœ¬ä¸è¦å‰åœ¨ç»™æˆ‘ä»¬è·‘è®ºå›å’ŒåŸŸåï¼Œæ€»ä¸å¥½åˆæ¬ç€å¤§è„¸è¦åŠ å†…å­˜å§ï¼ˆæƒ³å†æä¸€æ¬¡ææ¬¾ï¼Œå¯ç¡®å®æ²¡ä»€ä¹ˆå¯ä»¥é€çš„ï¼‰</p>
<p>å†™æ–‡ç« çš„è¯å‡†å¤‡å†™ä¸€ä¸‹æˆ‘çš„åšå®¢ç¨‹åº ghost æ˜¯æ€ä¹ˆæ­å»ºçš„ï¼Œæˆ–è€…è°ˆä¸€ä¸‹æˆ‘å¯¹ devel:languages:nodejs æºè‡ªåŠ¨åŒ–æ‰“åŒ…çš„è“å›¾è®¾è®¡ã€‚</p>
<p>è‡³äºè®ºå›æ´»åŠ¨å•Šï¼Œè°ƒè¯• ocserv/telepathy-kde/privoxyï¼Œè¿™äº›é•¿æœŸçš„æˆ–è€…å°šæœªå–å¾—è¿›å±•çš„æ´»åŠ¨å°±ä¸å€¼å¾—é¢„å‘Šäº†ã€‚</p>

		
			<a href="https://marguerite.github.io/posts/%E6%9C%AC%E5%91%A8%E5%BC%80%E5%8F%91%E6%9C%AD%E8%AE%B0/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/%E8%84%91%E6%B4%9E%E5%A4%A7%E5%BC%80%E7%9A%84%E5%91%A8%E6%9C%AB/">è„‘æ´å¤§å¼€çš„å‘¨æœ«</a></h1>
	<time>18.01.2016 00:00</time>
	
	<div>
		
		<p>è¿™ä¸ªå‘¨æœ«å…¶å®åªæ‰“ç®—ç»´æŠ¤ä¸‹æˆ‘çš„ <a href="https://github.com/marguerite/upsteam-notifier">upstream-notifier</a> çš„ğŸ˜‚ã€‚å¥½å§åŸæ¥æˆ‘åªæ˜¯æƒ³æ›´æ–°å‡ ä¸ªè½¯ä»¶åŒ…ï¼Œç»“æœè§‰å¾—æ—¢ç„¶éƒ½å»æ›´æ–°åŒ…äº†ï¼Œä¸å¦‚æŠŠç»™ upnoti ç”¨çš„ json ä¹Ÿå†™äº†ã€‚</p>
<p>å†™çš„è¿‡ç¨‹ä¸­è¦æµ‹è¯•ï¼Œå‘ç° github ä¸Šé¢çš„æœ‰äº›é¡¹ç›®çš„ release page åº•ä¸‹æ²¡æœ‰å†…å®¹ï¼Œäºæ˜¯åˆæ”¹ upnoti çš„ github mod æ”¯æŒè¿™ç§æƒ…å†µã€‚ç„¶ååˆè§‰å¾— upnoti å¤ªæ…¢ï¼ŒåŠ äº† multithread æ”¯æŒï¼Œç„¶ååˆå¼€å§‹ä¼˜åŒ–æ€§èƒ½ï¼Œä»£ç é£æ ¼ä¹‹ç±»çš„ã€‚</p>
<p>å¥½ä¸å®¹æ˜“æå®šäº†ï¼Œè¿™æ—¶ home:opensuse_zh å·²ç»æ›´æ–°å®Œå‡ ä¸ªåŒ…äº†ï¼Œæ²¡æ³•ç”Ÿäº§ç¯å¢ƒæµ‹è¯•äº†ï¼Œåˆå» d:l:go é‡ŒæŠŠ docker çš„å‡ ä¸ªä¾èµ–æŠ“å›æ¥ï¼Œå‘ç° golang-packaging åœ¨ sles11 ä¸Šé¢ test å®å‡ºé”™ï¼Œåˆç»™è‡ªå·±åŠ äº†ä¸€é¡¹å·¥ä½œä»»åŠ¡ã€‚</p>
<p>ç„¶ååœ¨ features.opensuse.org ä¸Šçœ‹åˆ°æœ‰ä¸ªäººè¦ tox æ•´åˆè¿› openSUSEï¼Œæƒ³èµ·æ¥æˆ‘è¿˜ç»´æŠ¤ç€ cutegram å’Œ qtoxï¼Œäºæ˜¯å»æ›´æ–° cutegramã€‚</p>
<p>ç»“æœè§‰å¾—æˆ‘çš„ç”¨ _service æŠ“ git çš„è½¯ä»¶åŒ…è¿™ä¹ˆå¤šï¼Œæ¯æ¬¡æ›´æ–°åŸºæœ¬éƒ½æ˜¯æ— è„‘çš„ï¼Œå¹²å˜›ä¸åšä¸ªè‡ªåŠ¨åŒ–å·¥å…·å‘¢ï¼Ÿäºæ˜¯ <a href="http://github.com/marguerite/obs-scam-autoupdater">obs-scm-autoupdater</a> å°±è¿™ä¹ˆè¯ç”Ÿäº†ğŸ˜ˆ</p>
<p>å†™å®Œ osa çš„åŸºæœ¬åŠŸèƒ½ï¼Œåˆå¼€å§‹æ€€ç–‘äººç”Ÿäº†ã€‚rpm æ‰“åŒ…è¿™ä¹ˆéš¾ï¼Œæ–°æ‰‹ä¸çˆ±å­¦å•Šï¼å°±è¿æˆ‘è‡ªå·±ä¹Ÿç»å¸¸æ˜¯æœ¬æ¥è¦ç®€ç®€å•å•å®‰è£…ä¸ªè½¯ä»¶ï¼Œæ¯”å¦‚ vokoscreenï¼Œå½•ä¸ªè§†é¢‘ç»™ konsole çš„äººçœ‹ bugï¼Œç»“æœçœ‹åˆ° vokoscreen ç‰ˆæœ¬å¤ªä½å»æ›´æ–°ï¼Œå°±æŠŠæŠ¥ bug è¿™äº‹å²”å¼€äº†ã€‚ç”Ÿäº§åŠ›å°±æ˜¯è¿™ä¹ˆä½çš„ï¼æ‰“åŒ…ä¸åº”è¯¥é‚£ä¹ˆè€—æ—¶é—´ï¼Œåº”è¯¥ç®€å•å¾—åƒæœ¬æœºç¼–è¯‘ä¸€æ ·ï¼Œç”šè‡³æ¯”é‚£ä¸ªè¿˜ç®€å•ï¼Œæ–°æ‰‹æ‰å–œæ¬¢ã€‚</p>
<p>å…³äºè¿™ä¸ªé—®é¢˜æœ‰ä¸‰ä¸ªåŠæ³•ï¼š</p>
<p>ç¬¬é›¶ä¸ªæ˜¯ä¸å­¦æ‰“åŒ…ç›´æ¥æœ¬åœ°ç¼–è¯‘ã€‚æˆ‘çƒ¦æ­»æœ¬åœ°ç¼–è¯‘äº†ï¼Œä¹‹å‰æœ¬åœ°ç¼–è¯‘å®‰è£…äº†ä¸ª basketï¼Œåæ¥æ—¶é—´é•¿äº†æŠŠæºä»£ç åˆ äº†ï¼Œæ²¡æ³• make uninstallï¼Œæœ‰æ´ç™–çš„æˆ‘å°±åˆç¼–è¯‘äº†ä¸€éå°±æ˜¯ä¸ºäº†å¸è½½æ‰ã€‚å“¦å¯¹äº† basket æœ‰ kde5port äº†ï¼æˆ‘å½“å¹´æƒ³å­¦ c++ å…¶å®å°±æ˜¯ä¸ºäº†ç»´æŠ¤è¿™ä¸ªé¡¹ç›®ï¼Œè™½ç„¶æˆ‘å„ç§å¾…åŠäº‹å®œè½¯ä»¶æäº†ä¸å°‘ï¼Œå…¶å®æœ‰ todo çš„æ—¶å€™å¤šåŠè¿˜æ˜¯ç”¨è„‘å­è®°ï¼Œå› ä¸ºè¦ä¹ˆé‚£æ—¶æ‰‹å¤´æ²¡å·¥å…·è¦ä¹ˆäººå¤ªçƒ‚ï¼Œå°±å¥½æ¯”æˆ‘æ˜¯å­¦é‡‘èçš„å´æ²¡è€è€å®å®ç”¨ skrooge è¿™æ ·çš„æ‰‹å¸è½¯ä»¶è®°æ»¡å“ªæ€•ä¸€ä¸ªæœˆï¼Œå˜¿å˜¿</p>
<p>ç¬¬ä¸€ä¸ªæ˜¯åœ¨ç°æœ‰çš„åŒ…ç®¡ç†ç³»ç»Ÿé‡Œé€‰ä¸ªæœ€ç®€å•çš„å­¦ã€‚ä½†æ˜¯ openSUSE çš„ rpm æ˜¯æœ€éš¾çš„é‚£ä¸ªï¼Œæ€»ä¸èƒ½æ¢ç³»ç»Ÿå§=ã€‚= puppy linux çš„åŒ…ç®¡ç†åœ¨æˆ‘çœ‹æ¥æœ€çœå¿ƒï¼Œä½†æ˜¯ä¸å¥½ç§»æ¤å•Šã€‚check_install æˆ‘åˆçœ‹ä¸ä¸Šã€‚</p>
<p>ç¬¬äºŒä¸ªå°±æ˜¯è‡ªå·±åšä¸€ä¸ªâ€œæ¯”æœ¬åœ°ç¼–è¯‘ç®€å•æˆ–è€…è‡³å°‘å·®ä¸å¤šï¼Œå­¦ä¹ æˆæœ¬ä¸é«˜ï¼Œçœå¿ƒçš„â€åŒ…ç®¡ç†ç³»ç»Ÿã€‚ç±»ä¼¼ puppy linux é‚£ç§ã€‚å¥½å§æˆ‘å…¶å®åˆé€‰äº†æœ€éš¾çš„é€‰é¡¹ï¼Œå¼ºè¿«ç—‡å°±æ˜¯å¦‚æ­¤å•Šï¼</p>
<p>äºæ˜¯å°±æœ‰äº†è¿™ä¸ª <a href="https://github.com/marguerite/epm">epm</a>ã€‚æˆ‘å·ç§°å®ƒæ˜¯æœ€ç®€å•çš„åŒ…ç®¡ç†ç³»ç»Ÿï¼Œç»™æˆ‘è¿™ç§è´ªæ‡’å¥¸çŒ¾çš„äººç”¨çš„ğŸ˜‚ã€‚</p>
<p>è®¾è®¡èµ·æ¥æƒ³çš„æŒºç®€å•çš„ã€‚</p>
<p>configure å‘½ä»¤è‡ªåŠ¨åˆ¤æ–­æ˜¯ autotoolï¼Œcmakeï¼Œqmake è¿˜æ˜¯åˆ«çš„å·¥ç¨‹ï¼ˆçœ‹æºä»£ç ç›®å½•å°±çŸ¥é“ï¼‰ï¼Œç„¶åä¸ç®¡å®ƒè°ƒç”¨ä»€ä¹ˆæˆ‘è¿™é‡Œä¸€å¾‹æ˜¯ easy_configureã€‚ä½ è¯´å‚æ•°ï¼Ÿç›´æ¥ passthroughï¼Œçœå¿ƒï¼ŒåŸæ¥èƒ½ç”¨ä»€ä¹ˆç°åœ¨å°±èƒ½ç”¨ä»€ä¹ˆï¼Œæœ€å¤š runtime tweak ä¸€ä¸‹ libdir ä»€ä¹ˆçš„è®©å®ƒæŒ‡å‘æˆ‘å®šä¹‰çš„ç¼–è¯‘ä¸“ç”¨ç›®å½• easy_buildã€‚</p>
<p>make å°±ä¸ç®¡äº†ï¼Œmake_install æ”¹æˆ easy å‘½ä»¤ï¼Œä¹Ÿæ˜¯æ¥å—å‚æ•°ç¡®ä¿è£…åˆ° easy_build åˆä¸è®©æ–°äººæ„Ÿè§‰åˆ°ã€‚</p>
<p>æœ€å easy_packã€‚ç›´æ¥å‹æˆä¸€ä¸ª tar.xz æ”¹åå« .epm å¥½å•¦:-)</p>
<p>å¾ˆå¿«å°±å†™å®Œäº†ã€‚è¿™æ—¶æ‰å‘ç°è‡ªå·±è¿˜æ²¡å†™æ€ä¹ˆè£…è¿™ä¸ª epm çš„å·¥å…·ã€‚åŸæ¥æƒ³çš„æ˜¯ç›´æ¥å¤åˆ¶è¿‡å»å°±å¥½å•¦ï¼Œå¼„ä¸ªæœ€å‚»çš„ sqlite3 æ•°æ®åº“ä¿å­˜ä¸‹åå­—ã€ç‰ˆæœ¬å’Œæ–‡ä»¶åˆ—è¡¨è¿™äº› metadata å°±å¥½å•¦ã€‚</p>
<p>ä½†æƒ³åˆ°è¿˜æœ‰ä¾èµ–å…³ç³»å’Œå®‰è£…æ—¶å€™çš„é‚£äº› pre/post/preun/postun è„šæœ¬ã€‚</p>
<p>ä¾èµ–å…³ç³»æƒ³å¼„æˆæ–‡ä»¶çº§åˆ«çš„ï¼Œå°±æ˜¯è§£åŒ…ä¹‹åæ‰«æä¸‹ï¼Œæ˜¯ c/c++ çš„å°±ç”¨ ldd å»æ‰¾å…³é”®æ€§æ–‡ä»¶ï¼Œç±»ä¼¼è¿™æ ·ã€‚åæ­£æ–°æ‰‹ç”¨çš„åŸºæœ¬å°±æ˜¯ c/c++/python è¿™ç§å·¥ç¨‹ï¼Œè¦†ç›–é¢ä¸å¤Ÿå¯ä»¥åæœŸå¢è¡¥å˜›ï¼Œè¿™éš¾é“ä¸å°±æ˜¯å¿«é€Ÿè¿­ä»£å˜›ï¼</p>
<p>åˆæƒ³åˆ°ä¾èµ–çš„æ–‡ä»¶éƒ½æ‰¾åˆ°äº†ï¼Œå¹²è„†è°ƒç”¨ libzypp å’Œå…¶å®ƒå‘è¡Œç‰ˆä¸Šç°æœ‰çš„åŒ…ç®¡ç†ç³»ç»Ÿå» query ä¸€ä¸‹è¿™ä¸ªå‘å‹ç‰ˆçš„åŒ…åç§°å˜›ï¼å°±æ¯”å¦‚ chrpath-1.16.x86_64.epm ä¾èµ–çš„å¯èƒ½æ˜¯ gcc.rpm ä¹Ÿå¯èƒ½æ˜¯ gcc.debã€‚åªè®°å½•åŒ…åï¼Œä¸å¼ºåˆ¶ä¾èµ–ï¼Œæ–°æ‰‹æ‰“åŒ…å¯ä»¥å†™è¿›å»ï¼Œå®‰è£…æ—¶ä¼šæç¤ºè¦ä¸è¦è£…ï¼ˆå½“ç„¶é‚£æ—¶ä¾èµ–çš„ç‰ˆæœ¬è‚¯å®šæœ‰æ›´æ–°äº†ï¼Œä½†å…ˆä¸å»ç®¡å®ƒï¼‰ä¹Ÿå¯ä»¥è®© epm ä¸»ç¨‹åºåœ¨å®‰è£…æ—¶è‡ªè¡Œç¡®å®šï¼Œè‡³äºå‡†ç¡®ç‡å˜›ï¼Œå¶å°”è£…é”™ä¸¤ä¸ªåæ­£æœ‰ç°æœ‰çš„åŒ…ç®¡ç†ç³»ç»Ÿç®¡ç€ä¹Ÿæ— ä¼¤å¤§é›…ã€‚å®åœ¨æ‰¾ä¸åˆ°å†çœ‹æœ‰æ²¡æœ‰æä¾›å®ƒçš„ epmï¼Œå†æ²¡æœ‰å°±æŠ¥é”™ã€‚åæ­£å…¶å®ç”¨åˆ° epm ä¹Ÿå°±æ˜¯æ–°äººæƒ³ä¿å­˜ä¸€ä¸‹ç¼–è¯‘å®‰è£…çš„æˆå“ï¼Œä¸å¤ªä¼šåˆ«çš„ä¸œè¥¿è¿˜ä¾èµ–è¿™ä¸ªæˆå“çš„ã€‚</p>
<p>è‡³äº pre/post è„šæœ¬ï¼Œæœ€é‡è¦çš„æ˜¯å®ƒä»¬çš„ä½ç½®ã€‚ä»€ä¹ˆæ—¶å€™è°ƒç”¨è¿™ä¸ªéƒ½æ˜ç™½ï¼Œä½†æ˜¯å®ƒä»¬æœ¬èº«åœ¨å“ªå„¿å‘¢ï¼Ÿè§£å‹è¿‡ rpm ä½†æ²¡çœ‹åˆ°è¿‡å‘€ï¼ç ”ç©¶äº†ä¸‹å‘ç° rpm file format æ˜¯è‡ªå¸¦ metadata çš„ï¼Œå°±æ˜¯ç”Ÿæˆ rpm çš„æ—¶å€™å°±å¼„è¿›é‚£ä¸ªæ–‡ä»¶é‡Œäº†ï¼Œä½  unrpm å‡ºæ¥çš„å…¶å®åªæ˜¯ dataã€‚å¥½å§ï¼Œå¤ªéš¾äº†ï¼Œä¸€æ¯”ä¸€å¤åˆ» rpm åˆ¶å¼å¤ªéº»çƒ¦ï¼Œå¹²è„†å°± debian é£æ ¼å¥½äº†ã€‚æ‰“åŒ…æ—¶å¤šå¼„è¿›å»ä¸€ä¸ª epm æ–‡ä»¶å¤¹ï¼Œè„šæœ¬éƒ½åœ¨é‡Œé¢ï¼Œå®‰è£…æ—¶è®©ä¸»ç¨‹åºåœ¨å¤åˆ¶æ–‡ä»¶åˆ°ç”¨æˆ·ç³»ç»Ÿæ—¶å€™å¿½ç•¥å°±å¥½äº†ï¼</p>
<p>ç„¶åæ•´ç†ä¸‹å‘ç°è‡ªå·±å¹»æƒ³äº†å¥½å¤šï¼Œå…¶å®ä¸€å¼€å§‹å°±æ˜¯æƒ³æ›´æ–°å‡ ä¸ªè½¯ä»¶åŒ…çš„â€¦æ´»å°±æ˜¯è¿™ä¹ˆæ¥çš„ã€‚æˆ‘è¿™ä¹Ÿç®—æ˜¯è‡ªæˆ‘é©±åŠ¨äº†â€¦</p>
<p>PSï¼šæˆ‘çš„åšå®¢åˆç”± hexo åˆ‡æ¢åˆ° ghost äº†ï¼Œå› ä¸º ghost å¯ä»¥åœ¨æ‰‹æœºä¸Šç å­—ã€‚ä»€ä¹ˆå¹´ä»£äº†è°è¿˜ä¼šååœ¨ç”µè„‘å‰ä¸­è§„ä¸­çŸ©çš„å†™åšå®¢ï¼</p>

		
			<a href="https://marguerite.github.io/posts/%E8%84%91%E6%B4%9E%E5%A4%A7%E5%BC%80%E7%9A%84%E5%91%A8%E6%9C%AB/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/%E9%AB%98%E6%89%8B%E5%88%9B%E9%80%A0%E5%B7%A5%E5%85%B7/">é«˜æ‰‹åˆ›é€ å·¥å…·</a></h1>
	<time>12.01.2016 00:00</time>
	
	<div>
		
		<p>ä»Šå¤©æ•´ç†å‡ºæ¥äº†è‡ªå·±è¿™äº›å¹´ç¢°è¿‡çš„è½¯ä»¶åŒ…ï¼Œä¸ç®— M17N ä¹‹ç±»æ‹¥æœ‰ repo maintainer è§’è‰²çš„æºé‡Œçš„è½¯ä»¶åŒ…ï¼Œå°±æœ‰ 178 ä¸ªã€‚åŠ ä¸Šé‚£äº›æ€»é‡è¦è¿‡ 300 äº†ã€‚</p>
<p>é‡‘èé¢†åŸŸï¼Œä¸€ä¸ªåŸºé‡‘ç»ç†ç»´æŠ¤ 20 åªå·¦å³è‚¡ç¥¨ç»„æˆçš„èµ„äº§æ± å°±éœ€è¦ä¸€ä¸ªåºå¤§çš„å›¢é˜Ÿã€‚300+ çš„è½¯ä»¶åŒ…å‡ ä¹å¯ä»¥è¯´æ˜¯æ—©åˆ°äº† upper limit äº†ã€‚è‡³äºæŠ€æœ¯ï¼ŒåŸºæœ¬ä¸Šå†æé«˜å°±ä¸ä¼šæ˜¯åœ¨æ‰“åŒ…è¿™é‡Œäº†ï¼Œè€Œæ˜¯å»çœŸæ­£çš„å­¦ä¹ å„ç§ç¼–ç¨‹è¯­è¨€æ¥è§£å†³ç¼–è¯‘é”™è¯¯äº†ï¼Œè¿™å…¶å®åšçš„å·²ç»æ˜¯ upstream developer çš„äº‹æƒ…äº†ã€‚æˆ‘çš„ github profile è¿™äº›å¹´ç´¯ç§¯ä¸‹æ¥å¾ˆå¥½çœ‹ï¼Œå®ƒè¯´æˆ‘çš„ä¸»åŠ›ç¼–ç¨‹è¯­è¨€æœ‰ 4 ç§ï¼ˆç¬‘ï½ï¼‰ï¼Œè¿˜è¢« Google HR å‘è¿‡é‚®ä»¶ï¼ˆç¬‘ï½ï¼‰ã€‚</p>
<p>æˆ‘ç»´æŠ¤ç€å¾ˆå¤šçš„ä¸­æ–‡ç¤¾åŒºç›¸å…³çš„åŒ…ã€‚å¶å°”æœ‰ä¸€ç§è«åå…¶å¦™çš„è´£ä»»æ„Ÿï¼šæœ‰ç”¨æˆ·åœ¨ forum.suse.org.cn è¯´å“ªä¸ªè½¯ä»¶ openSUSE æ²¡æœ‰ï¼Œå°±æƒ³èµ¶ç´§åŒ…å‡ºæ¥ï¼Œæ½‡æ´’ä¸€ postã€‚æˆ–è€…è°è¯´ openSUSE å‡ºäº†ä»€ä¹ˆ bugï¼Œæ„Ÿè§‰å°±è·Ÿè‡ªå·±ç³»ç»Ÿä¸èƒ½ç”¨äº†ä¸€æ ·ã€‚å‡ ä¹æ¯å¤©åœ¨ build.opensuse.org å’Œè®ºå›ä¸Šé¢ç«™å°ï¼Œæ‰“åŒ…ç‚¹ä¸œè¥¿ï¼Œå¸® factory ä¿®ä¿® bugã€‚</p>
<p>è¿™ä¸€å¹´æˆ‘æ‰åˆ°äº† nodejs å’Œ go è¿™ä¸¤ä¸ªæˆ‘åˆ°ç°åœ¨ä¾ç„¶ä¸ä¼šå†™çš„è¯­è¨€çš„å¤§å‘é‡Œå»äº†ã€‚npm æœ‰ 200+ ä¸ªä¾èµ–ï¼Œå¯¼è‡´æˆ‘å…¶å®ƒåŒ…çš„ç»´æŠ¤å‡ ä¹å°±æ˜¯åœæ»äº†ã€‚</p>
<p>ç°åœ¨æ¥çœ‹è¿˜æ˜¯è¦ä¸Šå¸çš„å½’ä¸Šå¸ï¼Œå‡¯æ’’çš„å½’å‡¯æ’’ã€‚è®ºå›æˆ‘ä¸å»ï¼Œä»–ä»¬å‡ ä¸ªç®¡çš„ä¹ŸæŒºå¥½çš„ï¼Œphoenixlzx ä¹Ÿæ²¡ä¼¸æ‰‹è¦é’±; æœ‰äº›è½¯ä»¶åŒ…ä¸æ˜¯æˆ‘æ‰“çš„ï¼Œæ¯”å¦‚ bcloudï¼Œå¤§å®¶ä¹Ÿç”¨ä¸Šäº†;Leap å‘å¸ƒæˆ‘æ²¡ç»„ç»‡ï¼Œç”¨æˆ·ä¸€æ ·ä¹Ÿä¸å°‘ã€‚æœ‰äº›ç©ºç™½æ€»æ˜¯èƒ½å¤Ÿå¡«è¡¥çš„ã€‚openSUSE æ˜¯ä¸€ä¸ªç¤¾åŒºï¼Œèƒ½æˆé•¿èµ·æ¥ä¸€æ‰¹æœ‰è‡ªæ²»æ„è¯†ã€èƒ½å¤Ÿä¸”æœ‰èƒ½åŠ›è‡ªä¸»å¥‰çŒ®çš„äººå°±æ˜¯å¯¹å¼€æºçš„è´¡çŒ®äº†ã€‚</p>
<p>è€Œæˆ‘è‡ªå·±çš„æ‰“åŒ…å·¥ä½œï¼Œæˆ‘å­¦äº†ä¸€äº› rubyã€‚å…ƒæ—¦æŠŠä¹‹å‰å®éªŒæ€§çš„ github.com/marguerite/golang-packaging å½¢æˆç”Ÿäº§åŠ›äº†ã€‚è¿™ä¸ªé¡¹ç›®ç®€å•è¯´å°±æ˜¯ç”¨ ruby å®ç°äº†ä¸€äº› rpm macrosã€‚å¯ä»¥è®©ä½ ä¸éœ€è¦çœŸæ­£æ‡‚ golang çš„ç¼–è¯‘ç¯å¢ƒæ˜¯æ€ä¹ˆæ„å»ºçš„ã€ç¯å¢ƒå˜é‡æ˜¯æ€ä¹ˆè®¾ç½®çš„ï¼Œç”šè‡³è¿æœ€åçš„ rpm æ–‡ä»¶åˆ—è¡¨ï¼ˆ%fileï¼‰éƒ½ä¸ç”¨ä½ æ¥å†™ã€‚ä½ éƒ½ä¸éœ€è¦çŸ¥é“ openSUSE çš„ golang è½¯ä»¶åŒ…å®‰è£…åˆ°ä»€ä¹ˆè·¯å¾„å°±èƒ½åšå‡ºåŒ…ï¼Œå¤§å¤§é™ä½äº†æ‰“åŒ…éœ€è¦äº†è§£çš„èƒŒæ™¯çŸ¥è¯†ï¼ˆå½“ç„¶è¿™äº›çŸ¥è¯†è¿˜æ˜¯è®°å½•åœ¨äº† wiki ä¸Šé¢ï¼‰ï¼Œåªéœ€è¦æ ¹æ®é”™è¯¯æç¤ºå†™å›ºå®šæ ¼å¼çš„ç¼–è¯‘ä¾èµ–ï¼ˆè¿è¡Œä¾èµ– Requires å’Œ Provides æ˜¯è‡ªåŠ¨å¤„ç†çš„ã€‚ç”šè‡³ Requires éƒ½åªæ˜¯ä¸ºäº†ä»¥å golang æ”¯æŒ shared linking åšçš„å‡†å¤‡ï¼‰ã€‚</p>
<p>è¿‡æ®µæ—¥å­å†åšä¸€ä¸ªè‡ªåŠ¨å¡«å……å‰©ä½™ tag çš„ go2rpmï¼ˆå¯èƒ½ä¼šæœ‰å›¾å½¢ç•Œé¢å“¦ï¼‰ï¼Œå†å†™ä¸€ä¸ª autoupdater å®ç° devel:languages:go çš„è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œå°±åƒ perl/rubygems æºé‚£æ ·ï¼Œæˆ‘å°±å¯ä»¥æ’’æ‰‹å¹²åˆ«çš„å»äº†ï¼Œç”±ç»´æŠ¤å‡ ç™¾ä¸ªåŒ…å˜æˆåªç»´æŠ¤ä¸€ä¸ªå·¥å…·ã€‚</p>
<p>ç„¶åå°±æ˜¯å»å¯¹ devel:languages:nodejs åšåŒæ ·çš„äº‹æƒ…ã€‚é‚£ä¸ªå·¥å…·çš„è®¾è®¡æˆ‘ä¼šåœ¨ä»¥åçš„æ–‡ç« è®²ã€‚</p>
<p>ç°åœ¨åœ¨åšçš„æ˜¯ github.com/marguerite/upstream-notifierï¼Œå°±æ˜¯æ£€æŸ¥æˆ‘ç›®å‰çš„ 300 å¤šä¸ªåŒ…é‡Œå“ªä¸ªæœ‰æ›´æ–°çš„å·¥å…·ã€‚</p>

		
			<a href="https://marguerite.github.io/posts/%E9%AB%98%E6%89%8B%E5%88%9B%E9%80%A0%E5%B7%A5%E5%85%B7/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/rpm_specfile_%E4%B8%AD__%E5%80%BC%E7%9A%84%E7%A0%94%E7%A9%B6/">RPM specfile ä¸­  å€¼çš„ç ”ç©¶</a></h1>
	<time>02.08.2015 00:00</time>
	
	<div>
		
		<p>ç ”ç©¶è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºè®ºå›ä¸Šçš„ä¸€ä¸ªè®¨è®ºï¼š<a href="https://forum.suse.org.cn/viewtopic.php?f=15&amp;t=4004/">zypper reinstall package</a></p>
<p>ç•¥è¿‡æ¥¼ä¸»çš„å®ç°æ˜¯å¦æ­£ç¡®ä¸è°ˆï¼ˆå› ä¸ºä»–ä¸ç»™æˆ‘çœ‹ specfile ä¼°è®¡æ˜¯å…¬å¸çš„è½¯ä»¶ï¼‰ï¼Œç®€å•æ¥è¯´å¯ä»¥åˆ†æˆå‡ ä¸ªå­é—®é¢˜ï¼š</p>
<p>ç¬¬ä¸€ä¸ªæ˜¯ RPM specfile çš„ %postun éƒ¨åˆ†çš„ $1 å˜é‡åˆ°åº•æ˜¯ä»€ä¹ˆï¼š</p>
<pre><code>if [ $1 == 0 ] ; then
</code></pre>
<p>$1 çš„å€¼å½“ç„¶æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå®ƒä»£è¡¨å®‰è£…åœ¨ä½ ç³»ç»Ÿä¸Šçš„åŒåè½¯ä»¶åŒ…çš„ç‰ˆæœ¬æ•°ã€‚æ¯”å¦‚ä½ å‡çº§è½¯ä»¶åŒ…ï¼Œé‚£é»˜è®¤æ˜¯ 1ï¼Œä½†åœ¨æŸä¸ªçŠ¶æ€æ˜¯ 2ï¼Œå› ä¸ºè¿™æ—¶æ–°åŒ…è£…ä¸Šæ—§åŒ…è¿˜æ²¡å¸è½½ï¼Œ0 å°±ä»£è¡¨è¿™ä¸ªåŒ…åœ¨ä½ ç³»ç»Ÿä¸Šå·²ç»ä¸å­˜åœ¨äº†ã€‚</p>
<p><a href="http://stackoverflow.com/questions/7398834/rpm-upgrade-uninstalls-the-rpm">http://stackoverflow.com/questions/7398834/rpm-upgrade-uninstalls-the-rpm</a></p>
<p>ç¬¬äºŒä¸ªæ˜¯ RPM reinstall çš„ä½œä¸šæµç¨‹æ˜¯æ€æ ·çš„ï¼Œæ˜¯éµå¾ªå‡çº§çš„æµç¨‹ä¹Ÿå°±æ˜¯ï¼š</p>
<p>è½¯ä»¶åŒ…å‡çº§çš„è¿‡ç¨‹æ˜¯å…ˆå®‰è£…æ–°åŒ…åå¸è½½æ—§åŒ…ï¼Œåªæœ‰æ¥è‡ªæ—§åŒ…çš„å·®å¼‚æ–‡ä»¶ä¼šè¢«åˆ é™¤ã€‚ä¹Ÿå°±æ˜¯ pre -&gt; install -&gt; post; preun -&gt; uninstall -&gt; postun</p>
<p>è¿˜æ˜¯å¦æœ‰ä¸€ä¸ªæµç¨‹ã€‚$1 å€¼çš„å˜åŒ–å¯ä»¥æ¨æµ‹å‡ºè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆã€‚</p>
<p>ç¬¬ä¸‰ä¸ªæ˜¯ä½¿ç”¨ zypper å’Œ rpm åˆ†åˆ«è¿›è¡Œé‡è£…ï¼Œ$1 å€¼çš„å˜åŠ¨æ˜¯ä¸æ˜¯ä¸€è‡´çš„ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜æˆ‘ä»¬éœ€è¦åšä¸€ä¸ªå®è¯ï¼Œä»£ç åœ¨è¿™é‡Œï¼š</p>
<p><a href="https://build.opensuse.org/package/show/home:MargueriteSu/rpm-reinstall-demo">https://build.opensuse.org/package/show/home:MargueriteSu/rpm-reinstall-demo</a></p>
<p>ç›¸åº”çš„æµ‹è¯•ç”¨ RPM ä¹Ÿå¯ä»¥åœ¨é‚£è¾¹å–å¾—ã€‚ä¸‹é¢ç›´æ¥ä¸Šç»“æœï¼š</p>
<pre><code>sudo zypper --no-refresh install --force rpm-reinstall-demo-0.0.0-5.1.x86_64.rpm

drwxr-xr-x 1 root       root     0 8 æœˆ   2 22:25 demo
</code></pre>
<p>é€šè¿‡ /var/tmp/demo çš„æ—¶é—´æˆ³è®°å¯ä»¥å‘ç°å®‰è£…å‰å demo æ²¡æœ‰è¢«åˆ é™¤é‡å»ºã€‚</p>
<pre><code>sudo rpm --install --replacepkgs rpm-reinstall-demo-0.0.0-5.1.x86_64.rpm
</code></pre>
<p>æ—¶é—´æˆ³è®°è¿˜æ˜¯æ²¡å˜ã€‚</p>
<pre><code>sudo rpm --reinstall rpm-reinstall-demo-0.0.0-5.1.x86_64.rpm
</code></pre>
<p>è¿™ä¸ªæ—¶é—´æˆ³è®°ä¹Ÿæ²¡å˜ï¼Œä½†æ˜¯è¾“å‡ºäº† $1 çš„å€¼ä¸º 1ï¼Œä¹Ÿå°±æ˜¯è¯´è§¦å‘äº† %postun è¿‡ç¨‹ã€‚ä¹‹å‰ rpm â€“install â€“replacepkgs æ˜¯æ²¡æœ‰è¾“å‡ºçš„ã€‚è‡³äº zypper æˆ‘æ€€ç–‘å¯èƒ½æ˜¯è¢«å‹åˆ¶äº†è¾“å‡º :-(</p>
<p>æ‰€ä»¥ç»“è®ºå¦‚ä¸‹ï¼š</p>
<p>ä¼°è®¡é‚£ä½æ¥¼ä¸»è¯´çš„é‡è£…å¯èƒ½æ˜¯å¸è½½äº†å†å®‰è£…ï¼Œé‚£æ · $1 è‚¯å®šä¼šä¸º 0, ä¼šè§¦å‘åˆ é™¤ /var/tmp/demo çš„æ“ä½œã€‚</p>
<p>æ­£å¸¸çš„ zypper é‡è£…å’Œ rpm é‡è£…ï¼ˆä¸¤ç§æ–¹æ³•ï¼‰éƒ½æ˜¯ä¸ä¼šä½¿ $1 ä¸º 0 çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ /var/tmp/demo ä¸ä¼šè¢«åˆ é™¤æ‰ã€‚ä¹Ÿå°±æ˜¯è¯´ if [ $1 == 0 ] ; then çš„çœŸæ­£ä½œç”¨æ˜¯ä¸ºäº†ç¡®ä¿è½¯ä»¶åŒ…ä»ç³»ç»Ÿåˆ é™¤æ—¶å®ƒçš„ä¸€äº›ä¸´æ—¶æ–‡ä»¶ä¼šè¢«åˆ é™¤ã€åšå‡ºçš„ä¿®æ”¹ä¼šè¢«å›æ»šç­‰ã€‚</p>
<p>ä½¿ç”¨ rpm â€“install â€“replacepkgs æ–¹æ³•é‡è£…ï¼Œä¸ä¼šè§¦å‘ %post %postun %pre %preun ç­‰è¿‡ç¨‹ã€‚</p>
<p>ä½¿ç”¨ rpm â€“reinstall é‡è£…ï¼Œä¼šè§¦å‘é‚£äº›è¿‡ç¨‹ï¼Œä½†æ˜¯ $1 å€¼ä¸ä¼šä¸º 2, ä¹Ÿä¸ä¼šä¸º 0, ä¹Ÿå°±æ˜¯è¯´éµå¾ªçš„ä¾ç„¶æ˜¯å‡çº§çš„æµç¨‹ï¼šå…ˆå®‰è£…æ–°åŒ…å†å¸è½½æ—§åŒ…</p>
<p>è‡³äº zypperï¼Œä¸”ä¸ç®¡å®ƒæ˜¯å¦è¢«å‹åˆ¶è¾“å‡ºå§ï¼Œå®ƒæœ‰ &ndash;oldpackage é€‰é¡¹ï¼Œæ‰€ä»¥çœ‹ä¸¤è€…çš„ &ndash;help æˆ‘è§‰å¾— libzypp åç«¯ä½¿ç”¨çš„åº”è¯¥æ˜¯ rpm &ndash;install &ndash;replacepkgs æ–¹æ³•ã€‚è¿™ä¸ªçœŸæ­£æµ‹è¯•èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨ %post é˜¶æ®µå¾€ /tmp é‡Œå†™ä¸ªæ–‡ä»¶å°±å¥½äº†ã€‚å®‰è£…å®Œæ¯•å…ˆæ‰‹åŠ¨åˆ é™¤æ‰ï¼Œå¦‚æœé‡è£…åå‘ç°äº†è¿™ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒçš„ reinstall å°±æ˜¯ rpm &ndash;reinstall æ–¹æ³•ï¼ˆå› ä¸ºè°ƒç”¨äº† %postï¼‰ï¼Œå¦åˆ™å°±æ˜¯ rpm &ndash;install &ndash;replacepkgs æ–¹æ³•ã€‚</p>
<p>PS:ä»¥ååšå®¢å°±ç”¨ hexo æ¥å†™äº†ã€‚ä»¥å‰ wordpress çš„æ–‡ç« æ¢æœåŠ¡å™¨ä¸¢äº†ä¸€éƒ¨åˆ†ï¼Œæ‰¾åˆ°äº†ä¸€éƒ¨åˆ†ï¼Œæœ‰æ—¶é—´ä¼šæ…¢æ…¢è½¬æ¢è¿‡æ¥ã€‚</p>

		
			<a href="https://marguerite.github.io/posts/rpm_specfile_%E4%B8%AD__%E5%80%BC%E7%9A%84%E7%A0%94%E7%A9%B6/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/%E5%85%B3%E4%BA%8E_deepin_%E7%94%A8%E6%88%B7%E5%BC%80%E5%8F%91%E8%80%85%E5%A4%A7%E4%BC%9A%E7%9A%84%E6%B5%85%E8%A7%81/">å…³äº Deepin ç”¨æˆ·å¼€å‘è€…å¤§ä¼šçš„æµ…è§</a></h1>
	<time>11.07.2014 00:00</time>
	
	<div>
		
		<p>è¿™ç¯‡æ–‡ç« æ˜¯å”±åè°ƒçš„ï¼Œå¯èƒ½ä¼šä¸èˆ’æœçš„å¯ä»¥ç¦»å¸­äº†ã€‚</p>
<p>æœ€æ—©é•¿å¾®åšå†™äº†ä¸€åŠï¼ˆå¥½å§æˆ‘å¼„äº†ä¸€ä¸ªçœŸÂ·@openSUSEå¨˜ï¼‰ï¼Œè§‰å¾—ä¸€ä¸ªå–§åš£çš„åœºåˆä¸å¤ªåˆé€‚ææŠ€æœ¯çš„ï¼ˆå¥½å§æˆ‘åˆç»™è‡ªå·±è„¸ä¸Šè´´é‡‘äº†ï¼‰åä¸‹æ¥äº’ç›¸äº¤æµï¼ˆå–·ï¼‰ï¼Œäºæ˜¯å°±å‘åœ¨è¿™é‡Œï¼Œä¹Ÿç‰¹æ„é€‰æ‹© DAU å¤§ä¼šè¿™ä¸ªè¯é¢˜å†·ä¸‹æ¥çš„æ—¶å€™è¯´ï¼Œé¿å…ç»™ä»–ä»¬é€ æˆè´Ÿé¢çš„å½±å“ã€‚æ·±åº¦å›¢é˜Ÿè¦è§‰å¾—æˆ‘æ˜¯ä¸ªå€’ç¶çš„å°±æ— è§†æ‰å¥½äº†ã€‚</p>
<p>å…ˆè¯´ä¸¤ç‚¹ï¼š</p>
<p>(1) æŸäº› Deepin çš„ç²‰ä¸å¯èƒ½ä¼šè§‰å¾—æˆ‘åƒä¸åˆ°è‘¡è„è¯´è‘¡è„é…¸ã€‚</p>
<p>ç¬¬ä¸€ï¼Œæˆ‘æ²¡æœ‰ç›´è§‚æ„Ÿå—è¿‡ Deepin ä½œä¸ºä¸€ä¸ªå‘è¡Œç‰ˆæœ‰å¤šå°‘ç”¨æˆ·ï¼ˆä¸æ˜¯ Deepin Music è¿™äº›åº”ç”¨è½¯ä»¶ï¼‰ï¼Œè¿™ä¸åƒ Ubuntu é‚£ä¹ˆæ˜æ˜¾ï¼Œæ‰€ä»¥ä»ç”¨æˆ·åŸºæ•°çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘æ²¡æœ‰æ¦‚å¿µï¼Œä¹Ÿå°±æ²¡æœ‰è¯´é…¸çš„åŸºç¡€ã€‚</p>
<p>ç¬¬äºŒï¼Œæˆ‘è¿™é‡Œè¯´çš„æ˜¯ä»–ä»¬çš„æˆ˜ç•¥å¤§æ–¹å‘ï¼Œä»–ä»¬æ‹¥æŠ±äº†å“ªäº›æŠ€æœ¯ï¼Œè¥é”€çš„å®šä½ï¼Œè¿™äº›ä¸œè¥¿ï¼Œè€Œä¸æ˜¯å»åƒé»‘ Ubuntu é‚£æ ·ï¼Œâ€œå“ˆ U çš„ç”¨æˆ·ç”¨ U éƒ½æ˜¯ä¸ºäº†è®©åˆ«äººçŸ¥é“å®ƒåœ¨ç”¨ Linux è€Œä¸æ˜¯ä¸ºäº†è§£å†³è‡ªå·±çš„éœ€æ±‚â€ã€‚</p>
<p>æ·±åº¦å›¢é˜Ÿæ˜¯ Linux ä¸­æ–‡åœˆé‡Œæ¯”è¾ƒé è°±çš„å›¢é˜Ÿã€‚å¦ä¸€ä¸ªæ¯”è¾ƒé è°±çš„æˆ‘è®¤ä¸ºæ˜¯å®‰åŒã€‚è€Œä¼˜éº’éºŸå¤„åœ¨ç¬¬äºŒæ¢¯é˜Ÿï¼Œé—äº§æµçš„é‚£ç§ã€‚åé¢å¦‚æœè¿˜è®°å¾—ä¼˜éº’éºŸçš„è¯ï¼Œå¯èƒ½ä¼šæ‹‰å®ƒå‡ºæ¥åšåä¾‹ã€‚å”‰ï¼Œæˆ‘ä¹Ÿå‹‰å¼ºç®— Linux ä¸­æ–‡åœˆçš„å¤§å‰è¾ˆäº†ï¼Œè¿™ç§è¤’è´¬å€¾å‘çœŸä¸è¯¥è½»æ˜“æµéœ²ï¼Œä¼šç»™åˆ«äººé€ æˆè´Ÿæ‹…çš„ã€‚</p>
<p>é¦–å…ˆæ·±åº¦å›¢é˜Ÿçš„äººæ¯”è¾ƒ niceã€‚æˆ‘è®°å¾—æœ‰ä¸€ä¸ªé™ˆç¥¥å¸®å§ï¼Œæ›¾ç»åœ¨ openSUSE ä¸­æ–‡è®ºå›ç»™æˆ‘å‘ç§ä¿¡è¯´ä¸¤ä¸ªç¤¾åŒºåˆä½œçš„äº‹æƒ…ï¼Œå½“æ—¶æ­£å¥½ç”Ÿæ´»ä¸Šæœ‰ä¸€äº›å˜åŠ¨ï¼Œåæ¥å°±ä¸äº†äº†ä¹‹äº†ï¼ˆæ¬¢è¿é‡å¯ï¼‰ã€‚ä½†æ€»ä½“å°è±¡è¾ƒå¥½ã€‚ç°åœ¨çš„â€œå›½äº§æ“ä½œç³»ç»Ÿâ€çš„äººæœ‰ä¸€ç‚¹ä¸å¥½ï¼Œä¸ºäº†å¸å¼•ç”¨æˆ·è€Œè¶Šæ¥è¶Šæ²¡ä¸‹é™äº†ï¼Œæœ‰äº›æ—¶å€™è§‰å¾—è·Ÿç™¾åº¦ Linux å§çš„äººå·®ä¸å¤šã€‚æ·±åº¦ç®—æ˜¯æœ‰ä¸€äº›æ°´å‡†çš„ï¼Œç›¸å¯¹äºåŒæ ·æ²¡æœ‰ç»å†è¿‡å¤§å‘è¡Œç‰ˆç¤¾åŒºåŸ¹å…»çš„äººæ¥è¯´ã€‚</p>
<p>å…¶æ¬¡æ·±åº¦çš„äººç›¸å¯¹æ¯”è¾ƒèƒ½å¤Ÿå‡ºæ´»å„¿ã€‚ä»–ä»¬æœ‰ 30 å¤šä¸ªäººï¼Œæ­¦æ±‰æœ‰æ·±ä¹‹åº¦å…¬å¸ï¼Œè¿ä¸­æ–‡åœˆæ¯”è¾ƒç¨€ç¼ºçš„ç”»å¸ˆå¨˜éƒ½æ‹›äº†ï¼Œåƒã€Œæ·±è°ˆã€è¿™æ ·çš„åº”ç”¨ç¨‹åºè¿˜æ˜¯å¾ˆæƒŠè‰³çš„ã€‚å½“ç„¶æ¿€æƒ…ä¸Šé¢åº”è¯¥æ¯”å®‰åŒï¼ˆéªšå¹´å¼ºåˆ™ä¸­å›½å¼ºï¼‰è¦å·®ä¸€äº›ï¼Œæ¯•ç«Ÿæ˜¯é¢†é’±å¹²æ´»çš„ä¸ªäººæœ‰ä¸ªå›æŠ¥ç‡å’ŒèŒä¸šå‘å±•çš„è€ƒé‡ï¼Œä½†æ¯”èµ·ä¼˜éº’éºŸçœ‰æ¯›èƒ¡å­ä¸€æŠŠæŠ“ï¼Œå¼€å‘è€…ä¸å°‘ï¼Œæˆæœç¨€å°‘ï¼ˆä¼°è®¡æ˜¯ç„å‡†é«˜ç«¯å®šåˆ¶å¸‚åœºå’Œæ”¿åºœé‡‡è´­å»äº†ï¼‰ï¼Œè¿˜æ˜¯è¦å¥½ä¸€äº›ã€‚</p>
<p>ç¬¬ä¸‰ä»–ä»¬æœ‰æƒ³æ³•ï¼Œå¹¶ä¸”ä¸€å®šç¨‹åº¦ä¸Šæ¯”è¾ƒèƒ½å¤Ÿéµå®ˆè§„åˆ™ï¼Œè™½ç„¶å¯¹ä¸Šæ¸¸çš„è´¡çŒ®ä¸æ˜¯å¾ˆå¤šï¼Œä½†æ˜¯å¯¹è‡ªå·±çš„æˆæœçš„æ€åº¦è¿˜æ˜¯å¾ˆå¼€æ”¾çš„ã€‚</p>
<p>æ‰€ä»¥çœŸå¿ƒå¸Œæœ›ä»–ä»¬èƒ½å¤Ÿå‡ºå½©ã€‚</p>
<p>é“ºå«å®Œäº†ï¼Œä¸‹é¢å¼€é»‘ï¼š</p>
<p>Deepin 2014 å‘å¸ƒå’Œä¸»è¦çš„ä¸‰ä¸ªæ¼”è®²ï¼ˆGitcafeï¼ŒCrossoverï¼ŒSeafileï¼‰æ²¡ä»€ä¹ˆå¥½é»‘çš„ã€‚ç”šè‡³è¿˜æœ‰ç‚¹å°è‰³ç¾¡ï¼Œæ¯”å¦‚é‚£ä¸€å¤§å †èµåŠ©ä¼™ä¼´å’Œåˆä½œåª’ä½“ï¼Œæœ‰å…¬å¸å®ä½“ï¼Œæˆ‘ä»¬è¿™äº›çˆ±å¥½è€…ç¾¤ä½“å’Œå›½å¤–æœºæ„åœ¨ååˆ†æ”¯åœ¨æœ¬åœ°åŒ–ä¸Šç¡®å®æ¯”ä¸äº†ã€‚</p>
<p>ä¸»è¦é»‘ä¸¤ç‚¹ï¼š</p>
<p>é»˜è®¤æ­è½½ Crossoverï¼Œå“ˆï¼Œè¿™ä¸æ˜¯æˆ‘é»‘çš„ï¼ŒQian Hong è¿˜æœ‰ç‚¹é¢å­çš„å˜›ï¼Œå†è¯´ä½ åœ¨ä¸­å›½åšå‘è¡Œç‰ˆéƒ½ä¸æ­è½½å•†ä¸š/å…è´¹è½¯ä»¶ï¼Œæœªå…é€¼æ ¼å¤ªé«˜ã€‚</p>
<p>æˆ‘è¦é»‘çš„æ˜¯ï¼Œä¼¼ä¹ Deepin è¦å…¥ Mono è¿™ä¸ªå‘ï¼Ÿï¼ˆå¾®åšä¸Šæ˜¯è¿™ä¹ˆæ„Ÿè§‰çš„ï¼‰</p>
<p>é¦–å…ˆè¯´æ˜ï¼Œæˆ‘ä¸ªäººå¯¹äºä»»ä½•é“ºå¹³ Windows åˆ° Linux ä¹‹è·¯çš„ä¸¾åŠ¨éƒ½æ˜¯æ”¯æŒçš„ï¼Œä½†æˆ‘æ›´è®¤ä¸ºè¿™ç§äº‹æƒ…åº”è¯¥ç”±ã€Œä½¿ç”¨è€…æ•™è‚²ã€æ¯”å¦‚å»ºè®¾ Wiki å’Œç¤¾åŒºæ¥å®ç°ï¼Œè€Œä¸æ˜¯ç”±æŠ€æœ¯æ‰‹æ®µå»æŠ¹å¹³å·®å¼‚æ¥å®ç°ï¼Œå› ä¸ºä¹‹æ‰€ä»¥æœ‰å·®å¼‚å°±è¯æ˜æŠ¹ä¸å¹³ã€‚è¿™ä¸æ˜¯ã€Œæˆ‘é¥¿äº†ï¼Œäºæ˜¯åƒé¥­ã€çš„é€»è¾‘ï¼Œè€Œæ˜¯ã€Œæˆ‘é¥¿äº†ï¼Œåƒäº†ç±³é¥­ï¼Œåˆå»åƒé¦’å¤´ã€ï¼Œä¸å¯èƒ½æœ‰ç±³é¥­å‘³å„¿çš„é¦’å¤´ï¼Œé‚£æ˜¯é¥­å›¢ã€‚</p>
<p>å…ˆä»‹ç»ä¸‹ä»€ä¹ˆæ˜¯ Monoï¼Œå®ƒæ˜¯åœ¨ Linux ä¸Šæ .NET å¼€å‘çš„ä¸€ä¸ªä¸œè¥¿ï¼Œæ˜¯ SUSE åˆ›å»ºçš„ï¼Œåæ¥è§‰å¾—è¿™ä¸ªè„‘æ´å¤ªå¤§ï¼ŒæŠŠæ•´ä¸ª mono å›¢é˜Ÿéƒ½å¼€é©äº†ã€‚</p>
<p>æˆ‘è§‰å¾—ä»–ä»¬ä¸ä¼šæˆåŠŸï¼Œä¸»è¦æ˜¯å› ä¸ºç›®æ ‡å’Œæ“ä½œæ€§éƒ½å‡ºç°äº†é—®é¢˜ã€‚æ“ä½œæ€§æ¯”è¾ƒç®€å•ï¼Œå…ˆæ¥è°ˆæ“ä½œæ€§ï¼š</p>
<p>ç¬¬ä¸€ï¼Œæˆ‘ä¸è®¤ä¸ºèƒ½çœ‹åˆ° Windows æºä»£ç çš„ SUSE åšä¸åˆ°çš„äº‹æƒ…ï¼Œè¿™ä¸ªä¸–ç•Œä¸Šè¿˜æœ‰äººèƒ½å¤Ÿåšåˆ°ï¼Œé›¨æ—æœ¨é£å¯èƒ½å¯ä»¥ï¼Œç¬‘ã€‚</p>
<p>ç¬¬äºŒï¼Œæˆ‘ä¸è§‰å¾—æ·±åº¦ç›®å‰çš„å›¢é˜Ÿèƒ½å¤Ÿæ‰¿æ‹…æè¿™ä¸ªçš„ä»£ä»·ã€‚30 äººçš„å›¢é˜Ÿåœ¨ Linux ä¸­æ–‡åœˆç®—å¾ˆå¤§åªäº†ï¼Œä½†è¿™é‡Œé¢æœ‰å¤šå°‘æ˜¯åå‹¤ã€å¸æœºã€è€æ¿ï¼Œæœ‰å¤šå°‘æ˜¯ç¾å·¥ã€å¸‚åœºã€é”€å”®ï¼Œåˆæœ‰å¤šå°‘æ˜¯ python ä¸“ç²¾çš„ä¸»ç¨‹å‘¢ï¼ˆæˆ‘å‡è®¾å¤§éƒ¨åˆ† python ä¸ºç¬¬ä¸€å¼€å‘è¯­è¨€çš„äººç”šè‡³å¯¹ Linux åº•å±‚éƒ½ä¸æ˜¯å¾ˆäº†è§£ï¼Œæ¯•ç«Ÿå¿«é¤è¯­è¨€çš„åæœå°±æ˜¯è¿™æ ·ï¼‰ï¼Œè¿™ç§çŸ­å¹³å¿«çš„å›¢é˜Ÿæä¸€æåº”ç”¨è½¯ä»¶å±‚è¿˜ç®—å¯ä»¥ï¼ŒçœŸæåº•å±‚ç ”å‘å¿…é¡»è¦æ‹›äººï¼Œè€Œå…¼å®¹å±‚å°±æ›´æ˜¯ä¸ç”¨æƒ³äº†ï¼ˆéœ€è¦åº•è•´ï¼Œå¯ä»¥è¯´ä½ èƒ½æå‡ºå…¼å®¹å±‚ï¼Œä½ å°±èƒ½æä¸ª Windows å†æä¸ª Linuxï¼‰ã€‚å¦‚æœä»–ä»¬æŠŠé¾™äº•æ”¶äº†è¿˜æœ‰ç‚¹å¯èƒ½ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå›½å¤–é‚£ä¹ˆå¤šæ›´å¤§åªçš„å¼€æºåºå‘˜æ¯”å¦‚ KDE çš„ Araon è‡ªå·±æå…¬å¸å®å¯æ Linux åº”ç”¨è½¯ä»¶ï¼Œè€Œä¸”å†…æ ¸å¼€å‘è€…é²œæœ‰å‡ºæ¥æå…¬å¸çš„ï¼Œçš„åŸå› ã€‚</p>
<p>è€Œä¸”ï¼Œå¦‚æœæå…¼å®¹å±‚ï¼Œå°¤å…¶æ˜¯ .NETï¼Œè‚¯å®šéœ€è¦ä¸€äº›å¯¹ Windows æ¯”å¯¹ Linux è¿˜è¦æ‹å¾—æ¸…çš„äººã€‚è¿™ç§æŠ•å…¥å¯¹äºä¸€ä¸ª Linux å‘è¡Œç‰ˆåˆ¶é€ å•†æ¥è¯´å…¶å®æ˜¯ä¸€ç§èµ„æºæµªè´¹ã€‚</p>
<p>è¿™æ˜¯ Mono è¿™ä¸ªé¡¹ç›®å†³å®šçš„ã€‚é¦–å…ˆï¼ŒSUSE å¹¶æ²¡æœ‰æ¨å®ƒå¤ªä¹…ï¼Œå®ƒçš„æˆç†Ÿåº¦ä¸æ˜¯å¾ˆé«˜ï¼Œéœ€è¦å¤§åŠ›åº¦ç ”å‘æ‰èƒ½è¾¾åˆ°æ·±åº¦æ‰€æ†§æ†¬çš„æ•ˆæœã€‚å…¶æ¬¡ï¼ŒMono æ˜¯åœ¨ Linux ä¸Šå¤åˆ» .NETï¼ŒWine é¡¹ç›®å†æ—¶ç»å¹´æ‰å¤åˆ»å‡ºä¸€ä¸ªæ—¶è¡Œæ—¶ä¸è¡Œçš„è¿‡æ—¶ç‰ˆæœ¬ï¼Œé€†å‘å·¥ç¨‹çš„è‹¦é€¼å°±åœ¨äºæ­¤ï¼Œçœ‹çœ‹ pidgin-lwqq å°±çŸ¥é“äº†ã€‚è¿™ä¸æ˜¯æˆ‘å†›å¤åˆ» T54 ä¸º 59 å¼å¦å…‹ï¼ŒT54 å·²ç»å®šå‹äº†ï¼Œä½ é€†å‘ç™¾åˆ†ä¹‹å‡ ä½ çš„è¿›åº¦å°±æ˜¯ç™¾åˆ†ä¹‹å‡ ï¼Œè€Œ .NET ä¸ä¸€æ ·ï¼Œè¿™æ˜¯å¾®è½¯æ¯”è¾ƒæ ¸å¿ƒçš„ä¸œè¥¿ï¼Œåªè¦å¾®è½¯è¿˜åšæ“ä½œç³»ç»Ÿï¼Œå®ƒå°±ä¸€ç›´ä¼šä¸Šæ–°ç‰¹æ€§ï¼Œé™¤éå¾®è½¯ä¸åšäº†ï¼Œä½†å¾®è½¯ä¸åšæ“ä½œç³»ç»Ÿäº†ä½ è¿˜å¤åˆ» .NET æœ‰æ„æ€å—ï¼ŸMSN éƒ½æ²¡æœ‰äº†ä½ è¿˜å¼€å‘ AMSN æœ‰æ„æ€å—ï¼Ÿ</p>
<p>è¿™é‡Œé¢å­˜åœ¨ä¸€ä¸ªç«é€Ÿé—®é¢˜ã€‚ä½ çš„å¤åˆ»å¿…é¡»æ¯”å¾®è½¯å¼€å‘å¾—å¿«ï¼Œæ‰æœ‰æœºä¼šé½å¤´å¹¶è¿›ï¼Œå³ä½¿ä½ åªéœ€è¦ä¸€äº›éå¸¸åŸºæœ¬çš„åŠŸèƒ½ï¼Œçœ‹çœ‹ GNOME é‚£ååˆ†é”€é­‚çš„ API å˜åŠ¨å§ï¼Œé’ˆå¯¹ glib 2.40 å†™çš„ä¸œè¥¿åœ¨ 2.39 ä¸Šéƒ½è·‘ä¸åŠ¨ï¼Œä½ èƒ½çœ‹åˆ°çš„ã€Œä»£ç è´¨é‡è¾ƒé«˜ã€çš„å¼€æºé¡¹ç›®å°šä¸”å¦‚æ­¤ï¼Œå¾®è½¯å…¨æ˜¯çŒ´å­ä¸»ç¨‹æˆ‘è§‰å¾—éƒ½æœ‰å‡ åˆ†å¯ä¿¡åº¦ã€‚æ‰€ä»¥ï¼Œé—®é¢˜æ¥äº†ï¼Œå“ªä¸ªä¸­å°ä¼ä¸šèƒ½åœ¨å¾®è½¯çš„ä¸»åœºé‡Œå¼€å‘é€Ÿåº¦è¶…è¿‡å¾®è½¯ï¼Ÿæˆ‘è§‰å¾—é™¤éåƒå‡ åå¹´å‰æˆ‘ä»¬ä¸ºäº†é€ æ½œå°„å¯¼å¼¹ï¼Œä¸¾å›½ä¹‹åŠ›æå°å‹åŒ–å¤§ä¼šæˆ˜ä¸€æ ·ï¼Œå…¨æ°‘ç§»æ¤ .NETï¼Œæ¥å®ƒå‡ åƒä¸ªç ”ç©¶æ‰€ï¼Œæ¥å®ƒä¸ªå›½å®¶è´¢æ”¿æ”¯æŒã€‚</p>
<p>ä½†æ²¡æœ‰è¿™æ ·çš„æ¡ä»¶ã€‚SUSE æ²¡æœ‰è¿™æ ·çš„äººåŠ›ï¼ŒDeepin ä¹Ÿæ²¡æœ‰ï¼Œå”¯ä¸€æœ‰çš„å°±æ˜¯å¾®è½¯è‡ªå·±ã€‚ä¸å…¶è¯´ç­‰ Mono æˆæ°”å€™ï¼Œä¸å¦‚æ¨åŠ¨å¾®è½¯ä¸»åŠ¨å¼€æºæ¥å¾—é è°±ã€‚è€Œä¸”ä¹Ÿæ²¡æœ‰è¿™æ ·çš„æ°›å›´ã€‚æå°å‹åŒ–çš„æ°›å›´æ˜¯å†·æˆ˜ï¼Œä½ ä¸æï¼Œæ ¸å¼¹å°±è½ä½ å¤´ä¸Šï¼Œå…¨æ°‘éƒ½æœ‰åŠ¨åŠ›ã€‚å›½å†…ç”¨ Linux çš„éƒ½ä¸è§å¾—æœ‰å‡ åƒä¸ªç ”ç©¶æ‰€å¥½å—ã€‚</p>
<p>ä¸‹é¢å†æ¥è¯´ç›®æ ‡ï¼š</p>
<p>æˆ‘çš„ä¸€è´¯è§‚ç‚¹æ˜¯ï¼Œæ Linux çš„ï¼Œä¸èƒ½æŠŠæ´»å„¿éƒ½æ›¿ç”¨æˆ·å¹²äº†ã€‚ç”¨æˆ·è¦ä»€ä¹ˆç»™ä»€ä¹ˆçš„è¯ï¼Œè·Ÿç”¨æˆ·è¯´è¯´å°±å¥½äº†ï¼Œä»–ä»¬è¦ Windowsï¼Œç›´æ¥æŠŠç ”å‘ç»„è¾é€€ï¼Œè€æ¿æŠŠè‚¡é‡‘ä¹°æ­£ç‰ˆ Windows æ•£è´¢ä¸æ˜¯æ›´å¥½ï¼Ÿ</p>
<p>æ˜æ­£å¾·åï¼Œå¤ªåå®šçš„è¾…æ”¿å¤§è‡£å«æ¨å»·å’Œï¼Œè¿™ä½åœ¨æ–°çš‡å¸è¿˜åœ¨è‹¦é€¼åœ°èµ¶è·¯çš„æ—¶å€™å°±æŠŠè°‹åçš„é”¦è¡£å«å¤§å¤´å¤´æ±Ÿæ–Œç»™å®°äº†ï¼Œé—®é¢˜æ˜¯ï¼Œçš‡ä¸Šç°åœ¨è¯¥å¹²å˜›ï¼Ÿå‘Šè¯‰ä½ è¿™ä½çš‡å¸æ˜¯è°ï¼Œæ˜¯å˜‰é–ã€‚è¿™ä½æ­»å®… 70 å¹´ä¸å‡ºå®«ï¼Œå”¯ä¸€çš„ä¹è¶£å°±æ˜¯ç£•äº†è¯æŒ‘æ‹¨å¤§è‡£äº’ç›¸æ–—ã€‚å˜‰é–çˆ·è¦æ˜¯æ²¡æœ‰æ¨å»·å’Œç»å¯¹èƒ½ä¸­å…´ï¼Œåˆ°æ—¶å€™å¥³çœŸäººå…«å›½è”å†›éƒ½æ²¡ä»–ä»¬ä»€ä¹ˆäº‹äº†ï¼Œä¸­åå¸å›½ä¸€ä¸‹å°±å®ç°äº†ã€‚æ‰€ä»¥è¯´ä¸èƒ½æŠŠæ´»å„¿éƒ½å¹²äº†ã€‚ç”¨æˆ·ä¼šé•¿å¤§çš„ï¼Œæ¯ä¸€ä¸ª Linux ç”¨æˆ·éƒ½æœ‰æˆä¸ºç»ˆæ BOSS çš„æ½œè´¨ï¼ŒæŒ‡ä¸å®šä½ å°±æŠŠæœªæ¥çš„ç¾å›½æ€»ç»Ÿç»™ç¢¾æ­»äº†ã€‚</p>
<p>çš„ç¡®ï¼Œç°åœ¨ç”Ÿæ´»èŠ‚å¥å¿«ï¼Œå¤§éƒ¨åˆ†ç”¨æˆ·ä½¿ç”¨æ“ä½œç³»ç»Ÿå°±æ˜¯ä¸ºäº†ç§‘æŠ€æ”¹å˜ç”Ÿæ´»çš„ã€‚ä½†ç§‘æŠ€æ›´åº”è¯¥æ”¹å˜äººçš„æ€ç»´ã€‚æˆ‘è§‰å¾—å¾ˆå¤šäººéƒ½é¢†ä¼šé”™äº†è®¡ç®—æœºçš„ç”¨é€”ã€‚è®¡ç®—æœºæ˜¯ä¸ºäº†è®©äººå˜å¾—æ›´èªæ˜è€Œä¸æ˜¯æ›´æ‡’çš„ã€‚æœ‰äº†è®¡ç®—æœºï¼Œä½ è‡³å°‘ä¸ç”¨é‡è§’å™¨ç”»æ ¸å¼¹å›¾çº¸äº†ï¼Œä¸ç”¨ç®—ç›˜è®¡ç®—è‚¡ç¥¨æŒ‡æ•°äº†ï¼Œä½†çœä¸‹çš„æ—¶é—´æ˜¯ç»™ä½ æ›´æ·±å…¥æ€è€ƒçš„ï¼Œè€Œä¸æ˜¯å†œå¥´ç¿»èº«åšä¸»äººåéª„å¥¢æ·«é€¸çš„ï¼Œä¸å¤©æ–—å…¶ä¹æ— ç©·å˜›ã€‚æ‰€ä»¥æˆ‘è§‰å¾— Linux ä¼¼ä¹è¢«èµ‹äºˆäº†ä¸€äº›å®ƒä¸åº”è¯¥æ‰¿æ‹…çš„è´£ä»»ã€‚</p>
<p>æ¯”å¦‚æœ€æ—© Linux å°±æ˜¯è®¡ç®—å·¥å…·ï¼Œå°±æ˜¯åŸºç¡€è®¾æ–½ï¼Œç°åœ¨ä»¥ Ubuntu ä¸ºé¦–çš„è¯´æˆ‘ä»¬è¦æŠŠå®ƒæ¨åˆ°æ¡Œé¢å»ï¼Œå¹²æ‰å¾®è½¯ï¼Œè®©æ™®é€šç”¨æˆ·éƒ½æ¥ç”¨ã€‚å…¶å®ç°åœ¨ä»ç„¶å¦‚æ­¤ï¼Œé‚£ä¹ˆå¤šææ¡Œé¢çš„ï¼Œå…¶å®åªæ˜¯ Linux é‡Œé¢çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œæœ€é‡è¦çš„æ¯”å¦‚æ Highavailability è¿™ç§æœåŠ¡å™¨åº”ç”¨çš„ï¼Œæå®‰å…¨çš„ï¼Œä¾ç„¶æ˜¯å¦ä¸€ä¸ªä¸–ç•Œï¼ˆLinux é‡Œå…¶å®æœ‰å¥½å‡ ä¸ªä¸–ç•Œï¼Œæ¡Œé¢åªèƒ½ç®—å¤–é‡ï¼Œè¿ä¸»åŸéƒ½ä¸ç®—ï¼‰ã€‚å¦å¤–æ ¹æ®éœ€æ±‚çš„æ»¡è¶³æ¥è¯´ï¼Œæ”¾åˆ°æ›´å®è§‚çš„å±‚é¢ï¼Œå¾®è½¯å¯¹æ™®é€šç”¨æˆ·æ»¡è¶³å¾—æœ€å¥½å°±è®©å¾®è½¯æ¥æ»¡è¶³ï¼ŒLinux æœåŠ¡å™¨åšå¾—æœ€å¥½å°±è®© Linux åšæœåŠ¡å™¨ï¼Œè¿™æ˜¯ä¸æ˜¯ä¹Ÿç¬¦åˆ Unix æ¨¡å—åŒ–åšåˆ°æœ€å¥½çš„å“²å­¦ï¼Ÿï¼ˆæœ‰äº›äººå¯èƒ½è¯´æ”¶è´¹ä¸æ”¶è´¹ï¼Œå¼€æºä¸å¼€æºçš„ï¼Œä½†æ”¶è´¹å’Œå¼€æºæœ¬èº«å°±æ˜¯ä¸€ç§éœ€æ±‚ï¼ŒLinux æ¡Œé¢èƒ½å¤Ÿæ»¡è¶³çš„åªæ˜¯è¿™ä¸€éƒ¨åˆ†éå¸¸ç»†åˆ†çš„éœ€æ±‚ï¼‰æˆ‘è§‰å¾—æŠŠ Linux æ¨å¹¿åˆ°æ¡Œé¢åè€Œæ˜¯å¤§å›½æ²™æ–‡ä¸»ä¹‰çš„è¡¨ç°å•Šã€‚KDE/GNOME åŒ…æ‹¬æ‰€æœ‰çš„æ¡Œé¢ç¯å¢ƒçš„äº§ç”Ÿï¼Œéƒ½ä¸æ˜¯ä¸ºäº†å»æ¨åŠ¨ Linux æ¡Œé¢èµ°å‘æ‰€æœ‰ç”¨æˆ·çš„ï¼Œå”¯ä¸€ä¸€ä¸ªè¿™ä¹ˆæƒ³çš„æ˜¯ Unityï¼Œç„¶åä½ çœ‹çœ‹è¯„ä»·ã€‚æ— å¿ƒæ’æŸ³æŸ³æˆè«ï¼ŒçœŸçš„ï¼ŒLinux æ¡Œé¢æ¼‚äº®ã€Linux æ¡Œé¢å¯å®šåˆ¶æ€§å¼ºï¼ŒLinux æ¡Œé¢ç›¸å¯¹æ²¡æœ‰ä»€ä¹ˆå°è£…æ¯”è¾ƒè´´è¿‘æ“ä½œç³»ç»Ÿæœ¬æºæ–¹ä¾¿å­¦ä¹ ï¼Œè¿™éƒ½æ˜¯ Linux æ¡Œé¢çš„ä¼˜ç‚¹ï¼Œæ‰€ä»¥å®ƒå­˜åœ¨äº†ã€‚</p>
<p>æ•æˆ‘å¦„è¨€ï¼Œå°±ç®—æŠŠ Linux æ¡Œé¢å®šä¹‰æˆâ€œå­¦ç¼–ç¨‹çš„æ“ä½œç³»ç»Ÿâ€ï¼Œå®ƒä¾ç„¶ä¼šç«ï¼Œæ¨¡ç‰¹éƒ½çŸ¥é“å­¦ python ä¸‹ç¾å‰§äº†ï¼Œçºµè§‚å½¢åŠ¿ï¼Œæˆ‘è§‰å¾—å°±ç®—ä¸æ¨ Linux æ¡Œé¢ï¼Œéšç€è®¡ç®—æœºçš„æ™®åŠï¼Œäººä»¬éƒ½çŸ¥é“å­¦ç‚¹ç¼–ç¨‹èƒ½æ–¹ä¾¿ç”Ÿæ´»çš„æ—¶å€™ï¼Œå®ƒè‡ªå·±å°±ç«äº†ã€‚å¼ºæ‰­çš„ç“œä¸ç”œï¼Œå°±è·Ÿ Ubuntu çš„å¤©å­—ç¬¬ä¸€å· Bug ä¸€æ ·ï¼Œä½ çœŸè§‰å¾—æ˜¯ Ubuntu çš„ä¸æ–­åŠªåŠ›æŠŠå®ƒã€Œä¿®å¤ã€çš„ï¼Ÿå¿«åˆ«æ‰¯äº†ï¼Œäººå®¶ Google æ— å¿ƒæ’çš„æŸ³äº§ç”Ÿäº†è´è¶æ•ˆåº”ã€‚äººç”Ÿå°±æ˜¯è¿™ä¹ˆå…‰æ€ªé™†ç¦»ã€‚æ²¡æœ‰ GFWï¼Œè°çŸ¥é“ VPS æ˜¯ä¸ªå•¥ï¼Ÿä»€ä¹ˆéƒ½æ”¾åœ¨äº‘ä¸Šï¼Œå±€åŸŸç½‘å»ºæˆé‚£å¤©ä½ å°±çŸ¥é“æœ¬åœ°ç¡¬ç›˜å’Œ RAID æœ‰å¤šå¥½äº†ã€‚</p>
<p>é’ˆå¯¹ä¸€ä¸ªå¿…ç„¶äº‹ä»¶æ‰€åšçš„åŠªåŠ›ï¼Œä¸æ˜¯ä¸å¯ä»¥ï¼Œä½†å¿…é¡»æ¸…é†’åœ°è®¤è¯†åˆ°ï¼Œè¯†æ—¶åŠ¿è€…ä¸ºäººæ°ï¼šé‡ç‚¹æ˜¯å®ˆä¸å®ˆå¾—èµ·ï¼Œè€Œä¸æ˜¯æ”»ä¸æ”»å¾—ä¸‹ã€‚ç®€å•åœ°æƒ³è¿™ä¹ˆä¸ªé—®é¢˜ï¼šä½ è§‰å¾—ï¼Œç°åœ¨é€‰æ‹©å…¥ Linux è¿™å¤§å‘çš„ï¼Œæœ‰å‡ ä¸ªç”¨æˆ·æ˜¯å› ä¸ºå—åˆ° Ubuntu æˆ–è€… Deepin çš„è›Šæƒ‘ï¼Œè§‰å¾—å®ƒä»¬ç›¸å¯¹ Windows æ›´æ˜“ç”¨çš„ï¼ŸçœŸè¦é‚£ä¹ˆæ ·ï¼Œå®¶é•¿æ—©ç»™å­©å­ä¹°æ–°çš„å­¦ä¹ æœºäº†ã€‚æˆ‘ä»¬éƒ½æ˜¯å”±é«˜å±±æµæ°´çš„ï¼Œä½ éè¦è¿½æ±‚è€å¦ªèƒ½è§£ï¼Œé›…çš„çœ‹ä¸ä¸Šä½ ï¼Œä¿—çš„ä¹Ÿæ²¡è§‰å¾—ä½ æœ‰å•¥ç”¨ã€‚ç°åœ¨è¦åšçš„åˆ·å­˜åœ¨æ„Ÿï¼Œomgubuntu çš„åšæ³•æ˜¯å¯¹çš„ï¼Œå±å¤§ç‚¹äº‹æˆ‘éƒ½å¤§å¼ æ——é¼“çš„è¯´ï¼Œæˆ‘ä¹ŸçŸ¥é“è¯´äº†å¤šæ•°éƒ½æ²¡ç”¨ï¼Œä½†æˆ‘å°±æ˜¯è¦è¯´ã€‚Ubuntu ä¹‹æ‰€ä»¥ä¸å†ç«–èµ·å¤§æ——åå¾®è½¯äº†ï¼Œå°±æ˜¯çœ‹ç©¿äº†è¿™ä¹ˆä¸ªé“ç†ã€‚æˆ‘ä¹Ÿæ¥é›…çš„ï¼ŒæŒ£äº†é’±ç›´æ¥å­¦é™ˆå…‰æ ‡ã€‚å¼€ä¸ªç½‘åº—ï¼Œè£… Deepinï¼Œä¸€å¹´è¿” 100 å…ƒç°é‡‘ï¼Œç„¶åå¹³å°å¹¿å‘Šï¼Œä½ å°±æ˜¯ä¸‹ä¸€ä¸ªå¾®è½¯ï¼Œå› ä¸ºæŒ‰ç…§é‡‘èå­¦çš„è®¡ç®—æ–¹æ³•ï¼Œå¼•å…¥åˆ©ç‡ï¼Œ100 å…ƒç°é‡‘ç›¸å½“äº 3077 å—é’±çš„ä¸€å¹´å®šå­˜ï¼Œä½ çš„ä¸€ä»½æ“ä½œç³»ç»Ÿå‰¯æœ¬çš„ä¼°å€¼ï¼ˆä¸€å¹´ä½¿ç”¨æƒï¼Œæˆ‘æ²¡ç®—æ°¸ç»­ï¼Œé‚£æ ·ä»·å€¼æ›´å¤§ï¼‰å°±æ˜¯è¿™äº›ï¼ˆå› ä¸ºç›¸å½“äºä½ è®©ç™¾å§“æ¯å¹´éƒ½æœ‰é¢å¤–çš„ 3077 å—é’±èŠ±ï¼‰ï¼ŒåŠ ä¸Šå¹³å°å¹¿å‘Šï¼Œæ€»å¸‚å€¼è¿œè¿œé«˜äºå¾®è½¯ï¼ˆè¥é”€å¾—å¥½ï¼Œä½ çš„ä¸€å¹´æ¯”å¾®è½¯çš„æ°¸ç»­éƒ½è¦é«˜ï¼‰ã€‚ï¼ˆè¿™æ‹›å¯åˆ«è®©åˆ«äººå­¦å»äº† 233ï¼‰</p>
<p>æ‰€ä»¥æˆ‘ä¸è§‰å¾—æ·±åº¦åšå‡ºçš„æ¥æ‰‹ Monoï¼Œå¼ºåŠ›æ¨è¿› Windows å…¼å®¹æ˜¯ä¸€ä»¶åœ¨ç°åœ¨æ¡ä»¶ä¸‹å¯ä»¥æ“ä½œçš„äº‹æƒ…ã€‚å½“ç„¶å¦‚æœæ˜¯æˆ‘ç†è§£é”™è¯¯ï¼Œè¿™ç§å·¥ä½œç”±åˆä½œä¼™ä¼´ï¼Œæ¯”å¦‚ Crossover æ¥åšä¸»åŠ›ï¼Œæ·±åº¦åšæ¡Œé¢æ¥å……å½“ç°é‡‘ç‰›ï¼Œé‚£æ·±åº¦çœŸçš„èƒ½å¤Ÿç§°å¾—ä¸Šä¼Ÿå¤§ï¼Œä½†æ˜¯è¿™ç§åˆä½œä¼™ä¼´å…³ç³»ä¹ŸåŠ¿å¿…ä¸èƒ½æŒä¹…ï¼Œè¿˜æ˜¯å‰é¢è¯´çš„ï¼Œç˜¦é©¬æ‹‰å¤§è½¦ï¼Œå¸¦ä¸åŠ¨ã€‚</p>
<p>(2) äº‘è´¦æˆ·ã€‚</p>
<p>è¿™æ˜¯è´¹åŠ›ä¸è®¨å¥½çš„äº‹æƒ…ã€‚</p>
<p>Linux ä¸‹å”¯ä¸€å€¼å¾—åšçš„å°±æ˜¯ OpenIDã€‚è€Œé™¤äº† OpenIDï¼Œæ·±åº¦å”¯ä¸€åº”è¯¥åšçš„å°±æ˜¯æ·±è°ˆ IM ç½‘ç»œã€‚æŠŠåŒ…æ¨åˆ°æ‰€æœ‰å‘è¡Œç‰ˆï¼Œè®©æ‰€æœ‰ Linux ä¸­æ–‡ç”¨æˆ·éƒ½åœ¨æŸç§ç¨‹åº¦ä¸Šä¾èµ–ä½ ï¼ˆæ¯”å¦‚æŠŠ Google è´¦æˆ·çš„ talk åŠŸèƒ½ä¸æ·±è°ˆç­‰æ•ˆï¼Œè¿™é‡Œè¿˜æ¶‰åŠä¸€ä¸ª IM å®¢æˆ·ç«¯è¦éå¸¸ç¢‰å ¡ï¼Œè‡³å°‘è¦è¶…è¿‡ Pidgin çš„é—®é¢˜ï¼‰ã€‚</p>
<p>å› ä¸ºæ— è®ºæ˜¯ Google/Facebook/Twitterï¼Œå®ƒéƒ½æ˜¯å…¬å¸ã€‚æŠŠå¼€æºç³»ç»Ÿçš„å‘½è„‰ç»™å…¬å¸æŠŠæŒæ˜¯ä¸æ˜¯â€œå¤ªé˜¿å€’æŒâ€æˆ‘ä¸çŸ¥é“ï¼Œä½†æˆ‘çŸ¥é“åœ¨å›½å†…æ·±åº¦å¦‚æœè¿™ä¹ˆåšäº†ï¼Œæ˜¯ç»å¯¹é€ƒä¸è¿‡ç™¾åº¦è´¦æˆ·ã€å¾®åšè´¦æˆ·ã€è…¾è®¯è´¦æˆ·è¿™ä¸‰å®¶çš„ï¼Œåˆšå¼€å§‹å¯èƒ½æ²¡æœ‰ï¼Œå¯èƒ½æ˜¯åˆæ‹è´¦æˆ·ã€CSDN è´¦æˆ·ï¼Œä½†æœ€ç»ˆæ€ä¹ˆéƒ½é€ƒä¸è¿‡è¿™ä¸‰å®¶ã€‚å› ä¸ºäº‘è´¦æˆ·åšä¸ä¸åšçš„å†³å®šæƒåœ¨ä½ ï¼Œè€Œåšè°ä¸åšè°çš„å†³å®šæƒåœ¨äººå®¶çš„ç”¨æˆ·åŸºæ•°ã€‚é™¤éèµ°çš„æ˜¯ã€Œå–ç»™ Googleã€ç±»ä¼¼çš„æˆ˜ç•¥ï¼Œä¸ç„¶å¯èƒ½æ²¦ä¸ºé™„åº¸çš„äº‹æƒ…ä¸è¦åšã€‚</p>
<p>æˆ‘è§‰å¾—æ·±åº¦ä¹‹æ‰€ä»¥æœ‰è¿™æ ·çš„æƒ³æ³•ï¼Œå¯èƒ½è·Ÿä¸ Seafile/åˆæ‹äº‘å®ƒä»¬çš„åˆä½œèµ°åˆ°äº†ä¸€ä¸ªç“¶é¢ˆæœŸï¼Œæƒ³è¦æ›´æ·±å…¥æ¨åŠ¨æœ‰å…³ç³»ã€‚ä½†ä¸ªäººè§‰å¾—è¿™æ˜¯å®¹æ˜“é­é›·çš„äº‹æƒ…ã€‚ã€Œé…ç½®åœ¨äº‘ã€æ˜¯éå¸¸å¥½çš„æƒ³æ³•ï¼Œä½†æ˜¯ï¼Œä¸”ä¸è¯´çœŸçš„èƒ½å¤Ÿé…ç½®åœ¨äº‘ï¼ˆæ²¡æœ‰ fstab ä½ èƒ½å¯åŠ¨ï¼Ÿåšæ—¶å…‰èƒ¶å›Šè¿™ç§å¤‡ä»½å·¥å…·æ˜¯æ— æ³•ç›ˆåˆ©çš„ï¼Œè¿™ä¸åº”è¯¥æ˜¯ä¸€ä¸ªè¿œæ™¯ç›®æ ‡ï¼‰ï¼Œäº‘å‚å®¶åšå’Œæ“ä½œç³»ç»Ÿåšçš„å·®åˆ«å¾ˆå¤§ï¼Œå¾ˆå¤šäººéƒ½å¯èƒ½åœ¨çœ‹ Googleï¼Œä½† Google æœ¬èº«æ˜¯ä¸€å®¶ã€Œç½‘ç»œã€å…¬å¸ï¼Œå®ƒæ˜¯æ­£æ¨ï¼Œè€Œ Ubuntu One é‚£ç§æ˜¯é€†æ¨ã€‚Google åšçš„è¯ä¼šåœ¨è®¾å¤‡ä¸Šç›˜æ´»å®ƒæ‰€æœ‰çš„æœåŠ¡ï¼Œè€Œ Ubuntu åšå°±æ˜¯ç³Ÿè¹‹é’±ã€‚æ‰€ä»¥æ·±åº¦å¯ä»¥å’Œ Seafile/åˆæ‹åˆä½œå»å®ç°æ·±åº¦æ•´åˆï¼Œä½†è¿™ä»¶äº‹çš„æ¨æ‰‹ç»å¯¹ä¸åº”è¯¥æ˜¯æ·±åº¦ã€‚å› ä¸ºæš‚æ—¶æ¥è¯´ï¼ŒæœåŠ¡å™¨åº”ç”¨å’Œæ¡Œé¢åº”ç”¨çš„æ¨å¹¿å¯¹è±¡ä¸ä¸€æ ·ã€‚</p>
<p>è€Œä¸”ï¼Œæ¯«ä¸ç•™æƒ…åœ°è¯´ï¼Œ80% çš„ç”¨æˆ·ä½¿ç”¨äº‘å°±æ˜¯ä¸ºäº†ä¸‹ A ç‰‡ï¼Œè€Œ 20% çš„äº‘ç”¨æˆ·é‡Œä½¿ç”¨é‡åœ¨ 1G ä»¥ä¸‹çš„åˆæœ‰ 80%ï¼Œè€Œå‰©ä¸‹çš„ 20%x20% æŒ‘æ¡å¾—å‰å®³ï¼Œè€Œæ‰€æœ‰è¿™ 100% é‡Œï¼Œæ˜¯æ²¡æœ‰äººä¼šæŠŠ root å¯†ç ï¼ˆæ¯”å¦‚å·¥èµ„å¡å¯†ç ï¼‰æ”¾åœ¨äº‘ä¸Šçš„ã€‚æ‰€è°“çš„å¤§æ•°æ®ï¼Œæ‰€è°“çš„æ•°æ®åœ¨äº‘ï¼Œåœ¨æˆ‘çœ‹æ¥å°±æ˜¯ç¨‹åºå‘˜çš„ç©ºä¸­æ¥¼é˜ï¼Œå…¸å‹çš„ä»¥ç¨‹åºå‘˜æ€ç»´æ£æµ‹ç”¨æˆ·è¡Œä¸ºï¼Œç”±ç»“æœåæ¨åŸå› ï¼Œå¯¹æ™®é€šç”¨æˆ·æ¥è¯´äº‘å°±æ˜¯çœå»æœ¬åœ°ç¡¬ç›˜æ— ç”¨/ä¸´æ—¶æ•°æ®æ‰€å ç©ºé—´çš„ä¸€ç§æ–¹å¼ã€‚è€Œä¸”å°±å›½å†…ç”¨æˆ·ç›®å‰çš„æ“å®ˆæ¥çœ‹ï¼Œ90% ä»¥ä¸Šä¸ä¼šæ„¿æ„ä»˜è´¹ã€‚è¯šç„¶ï¼Œäº‘å¯¹äº IT äº§ä¸šæ˜¯éå¸¸é‡è¦çš„ä¸€ç§ä¼ä¸šåº”ç”¨ï¼Œè€Œä¸”é™¤äº†ä¼ä¸šåº”ç”¨æš‚æ—¶å®ƒæ²¡æœ‰å…¶å®ƒæˆç†Ÿçš„å…è´¹ç›ˆåˆ©æ¨¡å¼ï¼ˆæ¯”å¦‚æ¸¸æˆï¼Œå…è´¹ç©å®¶æ˜¯äººè‚‰ NPC;èŠå¤©è½¯ä»¶ï¼Œå…è´¹ç”¨æˆ·æ˜¯å¹¿å‘Šå—ä¼—ï¼Œä½†ç½‘ç›˜ä¸ä¸€æ ·ï¼Œä½ åšå®¢æˆ·ç«¯å°±å½±å“å¹¿å‘Šæ”¶å…¥ï¼Œå› ä¸ºåŠŸèƒ½å¤ªå•ä¸€åšåšå®¢æˆ·ç«¯ä¼šæµå¤±ç”¨æˆ·ï¼Œè–„å®¢æˆ·ç«¯åˆä¸Šä¸äº†å¹¿å‘Šï¼‰ï¼Œä½†æ·±åº¦æ˜¯ä¸€ä¸ªä¼ä¸šç‰ˆå—ï¼Ÿå‡†å¤‡å‡ºä¼ä¸šç‰ˆå—ï¼Ÿå¦‚æœæŠŠä¼˜éº’éºŸçš„æ”¿åºœèµ„æºã€è´¢åŠ›ï¼Œæ·±åº¦çš„æƒ³æ³•ï¼Œå®‰åŒçš„çƒ­æƒ…æ”¾åœ¨ä¸€å®¶ï¼Œæˆ–è€…å¯ä»¥å‹‰å¼ºä¸€è¯•ï¼ŒçœŸçš„ï¼Œçº¢å¸½ä¸æ˜¯é—¹ç€ç©çš„ï¼Œä½ è´¹äº†è€å¤§åŠ›æ°”æ‰èƒ½æå‡ºä¸€ä¸ªçº¢é¡¶å•†äººï¼Œäººå®¶æ´‹å¤§äººå¤©ç”Ÿå°±é«˜äººä¸€ç­‰ã€‚ç¬‘ã€‚</p>
<p>æŒºæ™šçš„äº†ï¼Œå°±å…ˆå†™è¿™ä¹ˆå¤šå§ã€‚å“ï¼Œæ²¡é»‘æˆä¼˜éº’éºŸï¼Œå…¶å®ä»–ä»¬ä¸¤å®¶çš„è¥é”€æˆ˜ç•¥ä¹Ÿè›®å€¼å¾—ä¸€è°ˆçš„ï¼Œæ¯”å¦‚ä»¥æ”¿åºœå’Œä¼ä¸šä¸ºæ ¸å¿ƒçš„æ“ä½œç³»ç»Ÿè·Ÿä»¥æœ€ç»ˆç”¨æˆ·ä¸ºæ ¸å¿ƒçš„æ“ä½œç³»ç»Ÿè°æ›´æœ‰å‰æ™¯è¿™ç§è¯é¢˜ï¼Œå°±è·Ÿæ˜¯æå®šè”åˆå›½äº”å¸¸å°±èƒ½è¿›è”åˆå›½ã€è¿˜æ˜¯è®©é»‘å…„å¼Ÿç»™æŠ¬è½¿å­æŠ¬è¿›è”åˆå›½å“ªä¸ªæ›´å®¹æ˜“ä¸€æ ·å¥½ç©ã€‚</p>

		
			<a href="https://marguerite.github.io/posts/%E5%85%B3%E4%BA%8E_deepin_%E7%94%A8%E6%88%B7%E5%BC%80%E5%8F%91%E8%80%85%E5%A4%A7%E4%BC%9A%E7%9A%84%E6%B5%85%E8%A7%81/">Read more...</a>
		
	</div>
</article>

		
			<article>
	<h1><a href="https://marguerite.github.io/posts/opensuse_%E4%B8%8B%E9%85%8D%E5%90%88_nginx_%E6%90%AD%E5%BB%BA_qwebirc_%E7%BD%91%E9%A1%B5_irc/">openSUSE ä¸‹é…åˆ Nginx æ­å»º qwebirc ç½‘é¡µ IRC</a></h1>
	<time>12.10.2013 00:00</time>
	
	<div>
		
		<p>åšè¿™ä¸ªçš„åˆè¡·å¾ˆç®€å•ï¼šIRC å¯¹å°ç™½å¤ªè¿œäº†ã€‚</p>
<p>å®ƒä¸åƒè®ºå›ï¼Œæ‰“å¼€ç½‘é¡µå°±èƒ½åˆ·; ä¸åƒ QQ/Gtalkï¼Œè½¯ä»¶æ˜¯äººéƒ½èƒ½æ‰¾åˆ°ï¼Œè£…ä¸Šå°±èƒ½ä¸Šã€‚å®ƒéœ€è¦ä¸“ç”¨å®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚ konversationï¼‰ï¼Œè€Œä¸”è£…å®Œä½ è¿˜ä¸èƒ½ä¸Šï¼Œè¿˜æœ‰ä¸€å †å‘½ä»¤ç­‰ç€ä½ ï¼Œä½•å†µè¿˜æœ‰ 20 å¹´æ—©æœŸäº’è”ç½‘æµä¼ ä¸‹æ¥çš„å„ç§åè¯ã€ç¤¼ä»ªã€‚æ€»ä¹‹å®ƒæ˜¯ä¸€æ•´ä¸ªä¸ä¸–éš”ç»çš„é»‘å®¢ç”Ÿæ€åœˆã€‚</p>
<p>ä½†æ˜¯å§ï¼Œä¸å­¦è¿˜ä¸è¡Œï¼Œä½ çœ‹å“ªä¸ªå¼€å‘è€…ä¸ä¼šä½¿ç”¨ IRC çš„ï¼Ÿäºæ˜¯æˆ‘æƒ³å…ˆé™ä½ä¸€ä¸‹å®ƒå¯¹å°ç™½ä»¬çš„é™Œç”Ÿæ„Ÿï¼Œåšä¸€ä¸ªç»™è ¢äººç”¨çš„ç©æ„ã€‚ï¼ˆæˆåŠŸæŠŠè‡ªå·±ä»å…¶å®ƒè ¢äººä¸­åˆ†ç¦»å¼€ä»¥ç¤ºåŒºåˆ«å“¦è€¶ï¼ï¼‰</p>
<p>äºæ˜¯æœ€è ¢çš„æ¥äº†ï¼šqwebircï¼Œæ˜¯ä¸€ä¸ªè‡ªç”±å¼€æºçš„ç½‘é¡µ IRC å®¢æˆ·ç«¯ï¼Œæœ€æ—©æ˜¯ç»™ QuakeNet æ¸¸æˆç½‘å¼€å‘çš„ã€‚è¿™æ˜¯ç›®å‰æˆ‘èƒ½æ‰¾åˆ°çš„å”¯ä¸€ä¸€ä¸ªå¼€æºçš„ã€‚</p>
<p>çœ‹äº†ä¸‹ï¼Œå‘ç°å®ƒå±…ç„¶ä¸æ”¯æŒå¤šè¯­è¨€ï¼å¥½å§ï¼Œç¡¬ hack å‡ºäº†ä¸€ä¸ªç¹ä½“ä¸­æ–‡ç‰ˆï¼ˆåˆ«é—®ä¸ºä»€ä¹ˆä¸ç”¨ç®€ä½“ï¼Œå› ä¸ºç¡¬ hack å°±æ˜¯åªèƒ½ä½¿ç”¨ä¸€ç§è¯­è¨€ï¼Œæ²¡æœ‰åŠ¨æ€åˆ‡æ¢ï¼Œé‚£ç®€ä½“ç”¨æˆ·ç¹ä½“ä¸€æ ·èƒ½çœ‹æ‡‚ï¼Œè‡ªè±ªå§ï¼Ÿï¼‰ã€‚</p>
<h4 id="å®‰è£…ä¾èµ–opensuse-ä¸‹">å®‰è£…ä¾èµ–ï¼ˆopenSUSE ä¸‹ï¼‰</h4>
<pre><code>sudo zypper in nginx python-Twisted python-simplejson java-1_7_0-openjdk
</code></pre>
<h4 id="ä¸‹è½½">ä¸‹è½½</h4>
<p>ç„¶åéšä¾¿æ‰¾ä¸ªæ–‡ä»¶å¤¹ï¼Œå› ä¸º qwebirc å’Œ HTTP æœåŠ¡å™¨çš„å…³ç³»ä¸æ˜¯å¸¸è§„é‚£æ ·çš„ï¼Œå¸¸è§„æ˜¯åœ¨ /srv/www/htdocsï¼ˆåˆå« webrootï¼‰ä¸‹é¢æ”¾ä¸€äº› html/php æ–‡ä»¶ï¼Œç„¶å HTTP æœåŠ¡å™¨è®©é‚£ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢çš„ä¸œè¥¿èƒ½è¢«è®¿é—®ï¼Œä½†æ˜¯ qwebirc å…¶å®æ˜¯è‡ªå·±è·‘èµ·æ¥äº†ä¸€ä¸ªä¸“ç”¨çš„ http æœåŠ¡å™¨ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ®è¯´æ˜¯é€šç”¨ HTTP æœåŠ¡å™¨è®¾è®¡ä¸æ˜¯ç”¨æ¥æœåŠ¡å¤§é‡çš„ã€é•¿æœŸæ´»åŠ¨çš„è¿æ¥çš„ï¼Œå®ƒä»¬å¯ä»¥å¤„ç†çš„æ˜¯å¤§é‡çš„ä½†æ˜¯éƒ½æ˜¯ä¸€æ¬¡æ€§çš„è¿æ¥ï¼Œè¿™ç§åŸºäºçº¿ç¨‹æˆ–è€…å¤šè¿›ç¨‹çš„æœåŠ¡å™¨ï¼ˆApache è¢«ç‚¹åäº†ï¼‰æ²¡åŠæ³•å¤„ç†å¤ªå¤šçš„è¿™ç§è¿æ¥ï¼Œåˆ°æ—¶å€™ä¼šæŠŠä½ çš„ç½‘ç«™ä¸€èµ·æ‹½ä¸‹çº¿å‘¦ï¼</p>
<p>ä½† qwebirc çš„ä¸“ç”¨æœåŠ¡å™¨æ˜¯å¼€åœ¨ 9090 ç«¯å£çš„ï¼Œä½ ä¸æƒ³è®¿é—® yourircserver.com:9090 è¿™ç§ä¸‘ä¸‘çš„é“¾æ¥å§ï¼Ÿæ‰€ä»¥ä½ éœ€è¦ä¸€ä¸ªåå‘ä»£ç†ï¼Œè¿˜ä¸èƒ½ç”¨è¢«æ€’é»‘çš„ Apacheã€‚ã€‚ã€‚ä¹Ÿå°± nginx äº†å§ï¼Ÿå¥½åœ¨æˆ‘ä»¬åˆ«çš„æœåŠ¡å™¨ä¹Ÿæ˜¯ç”¨çš„ nginxï¼Œå› ä¸º openSUSE ç¤¾åŒºç©· VPS å†…å­˜å°ã€‚ã€‚ã€‚</p>
<p>è¨€å½’æ­£ä¼ ã€‚æ‰¾åˆ°æ–‡ä»¶å¤¹äº†å§ï¼Ÿç„¶ååœ¨å‘½ä»¤è¡Œä¸‹è½½æœ€æ–°çš„ç¨³å®šç‰ˆ qwebircï¼š</p>
<pre><code>wget http://qwebirc.org/download-stable-zip
</code></pre>
<p>å®ƒæ²¡åç¼€ä½†å®ƒæ˜¯ä¸ª zipï¼Œè§£å‹ï¼š</p>
<pre><code>unzip download-stable-zip
</code></pre>
<p>è¿›å…¥æ–‡ä»¶å¤¹ï¼š</p>
<pre><code>cd qwebirc-qwebirc-516de557ddc7
</code></pre>
<h4 id="é…ç½®">é…ç½®</h4>
<p>æŠŠ config.py.example å¤åˆ¶ä¸º config.pyï¼š</p>
<pre><code>cp -r config.py.example config.py
</code></pre>
<p>æ‰“å¼€</p>
<pre><code>vi config.py
</code></pre>
<p>è¦æ”¹çš„æˆ‘éƒ½å†™å¥½ï¼š</p>
<p>è¿æ¥åˆ°çš„æœåŠ¡å™¨:</p>
<pre><code>IRCSERVER, IRCPORT = &quot;chat.freenode.net&quot;, 6667
</code></pre>
<p>å› ä¸ºæˆ‘ä»¬æ˜¯ç½‘é¡µå®¢æˆ·ç«¯ä¸æ˜¯ç½‘é¡µæœåŠ¡å™¨ç«¯ï¼Œæˆ‘ä»¬è¦è¿ä¸€ä¸ªæœåŠ¡å™¨çš„â€¦</p>
<p>REALNAME:</p>
<pre><code>REALNAME = &quot;http://irc.suse.org.cn/&quot;
</code></pre>
<p>ä½ è¦æä¾›æœåŠ¡çš„é‚£ä¸ªç½‘å€</p>
<p>BASE_URL:</p>
<pre><code>BASE_URL = &quot;http://irc.suse.org.cn/&quot;
</code></pre>
<p>åŒä¸Š</p>
<pre><code>NETWORK_NAME = â€œopenSUSE ä¸­æ–‡â€
</code></pre>
<p>ä½ çš„å®¢æˆ·ç«¯æ˜¾ç¤ºç»™å®¢æˆ·çœ‹çš„ã€Œä½ å«ä»€ä¹ˆåã€å­—æ®µã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœä½ è¦ç”¨ä¸­æ–‡ï¼Œè¦åœ¨è¿™ä¸ªé¡µé¢çš„æœ€ä¸Šé¢åŠ ä¸Šè¿™ä¸¤è¡Œï¼š</p>
<pre><code>#!/usr/bin/python
# -*- coding: utf-8 -*-
</code></pre>
<p>å› ä¸ºå®ƒç”¨ python2 å†™çš„ï¼Œé»˜è®¤æ˜¯è‹±æ–‡ç¼–ç â€¦</p>
<p>Nginx ç›¸å…³é…ç½®:</p>
<pre><code>FORWARDED_FOR_HEADER=&quot;x-forwarded-for&quot;
FORWARDED_FOR_IPS=[&quot;127.0.0.1&quot;]
ARGS = &quot;-i 127.0.0.1 -p 9090&quot;
</code></pre>
<p>ç®€å•è¯´å°±æ˜¯åœ¨ä½  VPS ä¸Šçš„ 127.0.0.1:9090 å¼€ä¸€ä¸ªç½‘é¡µ IRCï¼Œç„¶å Nginx åé¢å¹²çš„äº‹å°±æ˜¯æŠŠå¯¹ä½ çš„æŸä¸ªç½‘å€æ¯”å¦‚ irc.suse.org.cn çš„è®¿é—®å…¨ä¸­è½¬ç»™ 127.0.0.1:9090 ä¸Šã€‚æˆ‘ä¸å¤ªæ‡‚ï¼Œä½†å¬èµ·æ¥åƒæ˜¯æŒºå®‰å…¨çš„ï¼Œå› ä¸ºæˆ‘è§‰å¾— 127.0.0.1 åªæœ‰ç™»å½•åˆ°é‚£å° VPS æ‰èƒ½ç”¨çš„å˜›ã€‚</p>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥è¯•è¯•æŠŠå‰ä¸¤ä¸ªçš„ # å·ç»§ç»­ç•™ç€ï¼Œç„¶åç›´æ¥ï¼š</p>
<pre><code>ARGS = &quot;-i ä½ çš„å…¬ç½‘ IP -p 80&quot;
</code></pre>
<p>æ²¡è¯•éªŒå“¦ï¼Œä¼°è®¡è¿™æ ·å°±èƒ½ç›´æ¥å¼€åœ¨ä½ çš„ 80 ç«¯å£äº†ï¼Œä¹Ÿä¸ç”¨ nginx äº†ã€‚ä½†è¿™æ ·åšæœ€å¤§çš„é—®é¢˜å°±æ˜¯ä½ çš„é‚£ä¸ªå…¬ç½‘ IP ä¹Ÿåªèƒ½åšç½‘é¡µ IRC äº†ã€‚å› ä¸ºä¸ç®¡ä½ æ€ä¹ˆåšåŸŸåè§£æï¼Œé€šè¿‡æµè§ˆå™¨è¿‡æ¥çš„éƒ½é»˜è®¤è·‘ 80 ç«¯å£å°±æ¥åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœåˆ«çš„è¿˜ç”¨ï¼ˆæˆ‘ä¸æ‡‚ç½‘ç»œé‚£äº›å“¦ï¼‰ï¼Œå¯èƒ½å°±ä¼šå‡ºç°æˆ‘å‰é¢ nginx é‡å®šå‘é…ç½®é”™è¯¯æ—¶çš„æƒ…å†µï¼Œæ—¶è€Œæ‰“å¼€ç½‘é¡µ IRCï¼Œæ—¶è€Œæ‰“å¼€ä½ åˆ«çš„ç½‘ç«™â€¦</p>
<p>è€Œç”¨ nginx åšåå‘ä»£ç†çš„è¯ï¼Œé‚£ä¸ª IP è¿˜å¯ä»¥å¹²åˆ«çš„ã€‚ï¼ˆæˆ‘è¯´çš„æ˜¯ IP ä¸æ˜¯åŸŸåå“¦ï¼Œä½ ä¸å¯èƒ½ irc.suse.org.cn åˆå½“ wordpress åšå®¢åˆå½“ç½‘é¡µ IRC çš„ï¼‰</p>
<p>å‰©ä¸‹çš„é…ç½®å°±ç•™é»˜è®¤å°±å¥½</p>
<h4 id="ç¼–è¯‘å’Œå¯åŠ¨">ç¼–è¯‘å’Œå¯åŠ¨</h4>
<p>è¿™é‡Œå…¶å®æˆ‘æœ‰ç‚¹ä¸èƒ½ç†è§£ï¼Œå®ƒç¼–è¯‘åº”è¯¥æ˜¯æŠŠ *.py ç¼–è¯‘ä¸º *.pyc/pyo æ‰å¯¹ï¼Œä½†äº‹å®ä¸Šï¼Œä½ åœ¨ javascript é‡Œé¢çš„ç¡¬ç¿»è¯‘ï¼Œä¹Ÿæ˜¯ç”±ç¼–è¯‘æ¥ç®¡çš„â€¦æˆ‘åˆšå¼€å§‹å…ˆæ¶è®¾äº†ä¸€ä¸ªè‹±æ–‡çš„ï¼Œç„¶åæœ¬åœ°ç¿»è¯‘å®Œï¼Œä¸Šä¼ ï¼Œæˆ‘æƒ³ js åº”è¯¥åˆ·æ–°ç½‘é¡µå°±å¥½äº†å§ï¼Œç»“æœä¸è¡Œâ€¦debug äº†å¥½ä¹…ï¼Œåæ¥åœ¨å®˜ç½‘ Installation æŒ‡å—çœ‹åˆ°</p>
<pre><code>Run compile.py to &quot;compile the HTML/js/css&quot;
</code></pre>
<p>æ•´ä¸ªäººéƒ½å‘†æ‰äº†â€¦</p>
<p>å¼€å§‹ç¼–è¯‘ï¼š</p>
<pre><code>./compile.py
</code></pre>
<p>æŠŠå®ƒè·‘èµ·æ¥ï¼š</p>
<pre><code>./run.py
</code></pre>
<p>å®ƒå†™çš„å°±æ¯”è¾ƒæœ‰èŠ‚æ“ï¼Œè‡ªå·±ä¼š fork è‡ªå·±åˆ°åå°ï¼Œä¸åƒæˆ‘ä¹‹å‰å†™çš„é‚£äº› openshift è·‘ python çš„æ•™ç¨‹é‡Œé¢çš„è„šæœ¬éƒ½è¦ä½¿ç”¨ nohup æ¥è·‘â€¦</p>
<p>qwebirc å°±é…ç½®å¥½äº†ã€‚</p>
<h4 id="nginx-åå‘ä»£ç†">Nginx åå‘ä»£ç†</h4>
<pre><code>cd /etc/nginx
</code></pre>
<p>ä½ æ˜¯ç›´æ¥ç¼–è¾‘ /etc/nginx/nginx.conf è¿˜æ˜¯å»ºä¸€ä¸ª /etc/nginx/vhosts.d/irc.suse.org.cn.conf æˆ‘ç®¡ä¸ç€ï¼Œåæ­£é‡Œé¢æ˜¯åƒè¿™æ ·çš„ï¼š</p>
<pre><code>server {
listen 80;
listen [::]:80;

server_name webchat.domain.tld;

access_log /var/log/qwebirc.access.log;
error_log /var/log/qwebirc.error.log;

proxy_set_header X-Real-IP $remote_addr;
proxy_set_header Host $host;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_buffering off;

location / {
    proxy_pass http://127.0.0.1:9090;
    }
}
</code></pre>
<p>å®ƒå’Œ Nginx Wiki ä¸Šè¯´çš„é‚£ä¸ªé…ç½®çš„å”¯ä¸€ä¸åŒä¹‹å¤„åœ¨äºï¼š</p>
<pre><code>listen 80;
listen [::]:80;
</code></pre>
<p>Wiki ä¸Šç”¨çš„æ˜¯ï¼š</p>
<pre><code>listen 127.0.0.1:80;
listen [::1]:80;
</code></pre>
<p>å¯¼è‡´æˆ‘åœ¨ä¸æ˜ç™½å…¶åŸç†çš„æ—¶å€™ç‹‚åˆ· irc.suse.org.cnã€‚ã€‚ã€‚ã€‚</p>
<p>åæ¥æ‰ååº”è¿‡æ¥ï¼šWiki çš„æ•™å­¦çš„åœºæ™¯æ˜¯è¯´ï¼Œä½ åœ¨æœ¬æœºï¼ˆ127.0.0.1ï¼‰è·‘èµ·æ¥äº†ä¸€ä¸ª qwebircï¼Œç„¶åå«Œç”¨ 127.0.0.1:9090 è®¿é—®å®ƒæ¯”è¾ƒçš„éº»çƒ¦ï¼Œäºæ˜¯åšä¸‹åå‘ä»£ç†è®© 127.0.0.1 å¯ä»¥ç›´æ¥è®¿é—®åˆ°å®ƒã€‚</p>
<p>ä½†æˆ‘ä»¬çš„åœºæ™¯æ˜¯è¯´ï¼Œæˆ‘åœ¨æœ¬æœºï¼ˆ127.0.0.1ï¼‰è·‘èµ·æ¥äº†ä¸€ä¸ª qwebircï¼Œç„¶åæƒ³ç”¨ <a href="http://irc.suse.org.cn">http://irc.suse.org.cn</a> ç›´æ¥è®¿é—®å®ƒï¼127.0.0.1:9090 å’Œæˆ‘æ²¡ä¸€æ¯›é’±å…³ç³»ï¼Œå› ä¸ºæˆ‘æ²¡åœ¨æœåŠ¡å™¨ä¸Šç™»å½•è£…å›¾å½¢ç•Œé¢å¼€ç½‘é¡µæµè§ˆå™¨â€¦</p>
<p>æˆ‘ä»¬è¦è®© Nginx å»ç›‘å¬å¯¹ irc.suse.org.cn çš„ 80 ç«¯å£è®¿é—®ï¼Œç„¶åæŠŠå®ƒæ‰”ç»™ VPS ä¸Šçš„ 127.0.0.1:9090ã€‚ã€‚ã€‚æ‰€ä»¥ç›´æ¥ç›‘å¬ server_name çš„ 80 ç«¯å£å°±å¥½äº†å˜›â€¦</p>
<p>è¿™ä¸ªé”™è¯¯å¾ˆéš¾ååº”è¿‡æ¥ï¼Œå°¤å…¶å¯¹æˆ‘è¿™ç§æ°´è´§ SAï¼Nginx è¿˜ä¼šæ­£å¸¸è·‘ï¼Œä½†ä½ åœ¨ VPS å¤–é¢æ˜¯è®¿é—®ä¸åˆ°å®ƒçš„ï¼š</p>
<p>qwebirc æä¾›çš„æœåŠ¡åœ¨ 127.0.0.1 ä¸æ˜¯ä½ çš„å…¬ç½‘ IPï¼Œæ‰€ä»¥ä½ ç”¨ xxx.xxx.xxx.xxx:9090 æ ¹æœ¬æ‰“ä¸å¼€â€¦ç”šè‡³ Nginx ä¹Ÿä¸çŸ¥é“ä½ åœ¨å¹²å•¥ï¼Œå› ä¸ºåˆ«çš„é…ç½®æ˜¯æ²¡æœ‰ç”¨ 9090 ç«¯å£çš„ï¼Œè¿ Fallback è¿™ç§å®‰æ…°å¥–éƒ½æ²¡æœ‰â€¦</p>
<p>nginx ç›‘å¬ç€ä½ çš„å†…ï¼ç½‘ï¼IPï¼ä½ è®¿é—® irc.suse.org.cnï¼Œæ˜¯æœ‰è¿™ä¸ªé…ç½®ï¼Œä½†æ˜¯å®ƒæ‰¾äº†ä¸€åœˆå‘ç°æ²¡æœ‰è·Ÿ irc.suse.org.cn: æœ‰å…³çš„äº‹å•Šï¼Œè¿™ä¸ªé…ç½®åœ¨ç®¡ 127.0.0.1 å‘¢â€¦</p>
<p>è¿˜æœ‰æ³¨æ„ï¼šproxy_pass http://127.0.0.1:9090; è¿™ä¸ªä¸è¦æ‰‹è´±æŠŠ 127.0.0.1 æ”¹æˆ irc.suse.org.cn äº†ã€‚ã€‚ã€‚å› ä¸ºé‚£ä¸ªåŸŸåçš„ A è®°å½•æ˜¯ä½ çš„å…¬ç½‘ IPï¼Œè€Œ qwebirc å¹¶æ²¡æœ‰å¯¹å…¬ç½‘æä¾›æœåŠ¡â€¦è¡€æ³ªçš„æ•™è®­ï¼</p>
<p>æ¥ç€é‡å¯ä¸‹ Nginx æœåŠ¡å™¨ï¼š</p>
<pre><code>sudo systemctl restart nginx.service
</code></pre>
<p>å°± OK äº†ï¼</p>
<p>PSï¼šç»ˆäºæœ‰ä¸ªé¡ºæ‰‹çš„ IRC å»è°ƒæˆ #kde-cn çš„ BadGirl äº†â€¦</p>

		
			<a href="https://marguerite.github.io/posts/opensuse_%E4%B8%8B%E9%85%8D%E5%90%88_nginx_%E6%90%AD%E5%BB%BA_qwebirc_%E7%BD%91%E9%A1%B5_irc/">Read more...</a>
		
	</div>
</article>

		
		<div>

1 of 4

	<a href="/page/2/">Next Page</a>

</div>

	</main>
<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/posts/color_emoji_in_opensuse/">Color Emoji in openSUSE</a></li>
				
				<li><a href="/posts/fontconfig_%E5%87%A0%E4%B8%AA%E5%B8%B8%E8%A7%81%E7%9A%84%E5%9D%91/">fontconfig å‡ ä¸ªå¸¸è§çš„å‘</a></li>
				
				<li><a href="/posts/30_%E7%A7%92%E9%92%9F%E5%9C%A8_github_pages_%E4%B8%8A%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA_opensuse_%E9%A3%8E%E6%A0%BC%E7%9A%84%E9%83%A8%E8%90%BD%E6%A0%BC/">30 ç§’é’Ÿåœ¨ Github Pages ä¸Šæ­å»ºä¸€ä¸ª openSUSE é£æ ¼çš„éƒ¨è½æ ¼</a></li>
				
				<li><a href="/posts/introducing_the_brand_new_nodejs_packaging/">Introducing the brand new nodejs packaging</a></li>
				
				<li><a href="/posts/%E6%9C%AC%E5%91%A8%E5%BC%80%E5%8F%91%E6%9C%AD%E8%AE%B0/">æœ¬å‘¨å¼€å‘æœ­è®°</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p>&copy; 2020 <a href="https://marguerite.github.io">Marguerite Su: Golang/Ruby Programmer, openSUSE Member</a></p>
</footer>

</body>
</html>
